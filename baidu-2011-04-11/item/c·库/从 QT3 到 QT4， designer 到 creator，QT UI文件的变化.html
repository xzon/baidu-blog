<html><head><title>从 QT3 到 QT4， designer 到 creator，QT UI文件的变化</title></head><body><div id='tit'>从 QT3 到 QT4， designer 到 creator，QT UI文件的变化</div><div id='cate'>c&middot;库</div><div id='date'>2009年04月27日 星期一 01:30 A.M.</div><div id='page'>54</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/5e60d7c8ce18431f7e3e6f35.html'>http://hi.baidu.com/hxzon/blog/item/5e60d7c8ce18431f7e3e6f35.html</a><div id='cnt'><div class="cnt"> 
 <p align="center"><font style="background-color: #99ccff" color="#0000ff" size="4"><u><strong><a target="_blank" href="http://hi.baidu.com/kwunkuklan/blog/item/80726ed9714f402410df9b2c.html">从 QT3 到 QT4， designer 到 creator，QT UI文件的变化</a></strong></u></font></p> 
 <div class="tpc_content"> 
  <p> </p> 
  <p><font style="background-color: #333333" color="#ff0000" size="4">转帖！</font></p> 
  <p>转自 <a target="_blank" href="http://blog.chinaunix.net/u1/56545/showart.php?id=490742">分享自己一些对qt的理解（原创）</a></p> 
  <p>一些关于qt3和qt4的理解<br /> <br /> 如果你用过了qt3，也用过qt4的话，肯定觉得变化很大，不是吗？<br /> qt4没有了pro文件的管理<br /> Removed project manager. Qt Designer now only reads and edits .ui files. It has no notion of a project (.pro file)<br /> Qt4改变了.ui的文件格式，虽然提供了转化工具，大家还是觉得不好玩。<br /> Changed format of .ui files. Qt Designer 4 cannot read files created by Qt Designer 3 and vice versa. However, we provide the tool uic3 to generate Qt 4 code out of Qt 3 .ui files, and to convert old .ui files into a format readable by Qt Designer 4.<br /> 更抠门的是，居然连c++的编辑器也不给我们用。<br /> Removed code editor. Qt Designer can no longer be used to edit source files.<br /> 更深入一层来说，看一些qt4提供的例子，怎么觉得有点不大像qt3 c++的习惯，c++是可以这样的吗？qt4中自己的槽在哪里添加啊？<br /> <br /> 同样我们也会对qt3以前的.ui.h这个文件感到有点纳闷，看上去是头文件，但是进去看怎么看都觉得像是观念中的源文件，因为毕竟里面是实现特殊函数――槽（SLOT）功能的地方。<br /> <br /> 更烦的是，Qt3中用designer设计好了的.pro文件，然后用vc工具打开，添加一些自己改动，等到下次由于编译需要clean一下，再次用工具打开pro文件，天哪，我辛辛苦苦添加的东西到哪里去了啊？！！<br /> <br /> 本文试着根据自身的一些实践，结合论坛中的一些网友遇到的问题，说说自己的看法，希望能抛砖引玉，对大家学习qt有所帮助。<br /> <br /> 按照历史顺序，首先说qt3。<br /> <br /> 在qt3或者以前的版本中，可能大家的习惯做法是，打开designer，添加pro文件，设置头文件路径，设置是app还是lib，设置要连接lib的路径和对应的lib的名称；接着开始新建一个dialog，在上面添加按钮，然后保存成.ui文件；开始写main函数，像我这么懒的人，main函数都是根据designer生成的。一切都顺利的话，你可以选择开始qmake了，接着make（或者nmake等等）；如果在WINDOWS下，也可以选择用vc中的qt工具栏打开pro文件，编译链接，一般情况下，你都会很高兴的看到自己第一个qt的界面。<br /> <br /> 对了，要添加自己的槽呢？<br /> 你可以在（Object）下面的Member选项卡里面找到Slot一项，添加一个槽，如果你在某个slot点击Edit的话，qt就会弹出一个窗口，这个窗口上面提到的.ui.h的文件所在。如果想初始化自己定义的一些变量，可以在function里面添加init（）函数，当添加完以后，你会发现后面会多了（Constructor）这个东西，其实在.ui.h前面那段注释的代码里面就说得很清楚了，<br /> /****************************************************************************<br /> ** ui.h extension file, included from the uic-generated form implementation.<br /> **<br /> ** If you want to add, delete, or rename functions or slots, use<br /> ** Qt Designer to update this file, preserving your code.<br /> **<br /> ** You should not define a constructor or destructor in this file.<br /> ** Instead, write your code in functions called init() and destroy().<br /> ** These will automatically be called by the form's constructor and<br /> ** destructor.<br /> *****************************************************************************/<br /> <br /> 也可以通过打开根据ui生成的Form1.cpp看到，类的构造函数的最后面调用了init（）这个函数，这个函数在没有添加的时候是没有出现在ui生成的Form1.cpp文件里面的。init（）对应的就是destory（）了，这个就不多说了。<br /> <br /> 不喜欢Form1这个类的名字，要改变类的名字怎么办？可以在ui上面点击右键选择Form setting ，在弹出的对话框里面会看到class name的一项，在那里写上自己喜欢的类名吧。这个类名就是相当于Form1，Form1怎么用，这个类就怎么用。<br /> <br /> 大家是不是觉得这些步骤很像vc的做法呢？具体点就是MFC的做法呢？<br /> <br /> 也有一些网友会根据qt文档里面的说法去做：写好了.h文件和.cpp文件，接着用<br /> qmake –project<br /> 这样的方法来生成pro文件，个人觉得这样的做法不提倡，为什么呢？因为一般来说一个工程都要包含其他目录下的头文件，需要链接别的不是qt的库，这样的话就要对每次生成的pro文件进行添加修改，不是很方便。其次，有人喜欢把头文件和源文件分别放在不同的目录下，这样的话管理很方便，但是<br /> qmake –project<br /> 只对当前目录下的头文件和源文件起作用。<br /> 至少在windows下，用<br /> qmake –project<br /> 生成pro文件的话，后面的生成的.obj文件就很乱的<br /> 最好还是在designer里面的pro设置里面做这些吧。<br /> <br /> 论坛里面的有些牛人自己写pro文件的，这个就不是本人能够到达的境界了，没有能力在这里讨论了。<br /> <br /> 不管怎样，不就是为了得到Makefile吗？下面就专门看它怎么发飙了？<br /> 插播一下，真的要谢谢qmake，它那么容易就让我们得到了Makefile，Makefile是什么？！后面的一切都是听他指挥的，要是我们自己写的话，像我怎么懒的人才不写呢!!况且我也不大会写呢~_~<br /> <br /> 随便用一个文本编辑器打开Makefile，大概会看到下面的一些东西吧qt332版本的<br /> <br /> #############################################################################<br /> # Makefile for building: myqt332test<br /> # Generated by qmake (1.07a) (Qt 3.3.2) on: Thu Jun 08 22:41:07 2006<br /> # Project: myqt332test.pro<br /> # Template: app<br /> # Command: $(QMAKE) -o Makefile myqt332test.pro<br /> #############################################################################<br /> <br /> ####### Compiler, tools and options<br /> <br /> CC = cl<br /> CXX = cl<br /> LEX = flex<br /> YACC = byacc<br /> CFLAGS = -nologo -Zm200 -W3 -MDd -Zi -Gm -DUNICODE -DWIN32 -DQT_DLL -DQT_THREAD_SUPPORT<br /> CXXFLAGS = -nologo -Zm200 -W3 -w34100 -w34189 -MDd -Zi -Gm -DUNICODE -DWIN32 -DQT_DLL -DQT_THREAD_SUPPORT<br /> LEXFLAGS =<br /> YACCFLAGS =-d<br /> INCPATH = -I&quot;$(QTDIR)\include&quot; -I&quot;D:\qttest\myqt332test&quot; -I&quot;D:\QT332\mkspecs\win32-msvc.net&quot;<br /> LINK = link<br /> LFLAGS = /NOLOGO /DEBUG /SUBSYSTEM:WINDOWS /LIBPATH:&quot;$(QTDIR)\lib&quot;<br /> LIBS = &quot;qt-mt332.lib&quot; &quot;qtmain.lib&quot; &quot;kernel32.lib&quot; &quot;user32.lib&quot; &quot;gdi32.lib&quot; &quot;comdlg32.lib&quot; &quot;advapi32.lib&quot; &quot;shell32.lib&quot; &quot;ole32.lib&quot; &quot;oleaut32.lib&quot; &quot;uuid.lib&quot; &quot;imm32.lib&quot; &quot;winmm.lib&quot; &quot;wsock32.lib&quot; &quot;winspool.lib&quot; &quot;delayimp.lib&quot; &quot;opengl32.lib&quot; &quot;glu32.lib&quot;<br /> MOC = $(QTDIR)\bin\moc.exe<br /> UIC = $(QTDIR)\bin\uic.exe<br /> QMAKE = qmake<br /> IDC = $(QTDIR)\bin\idc.exe<br /> IDL = midl<br /> ZIP = zip -r -9<br /> COPY_FILE = copy<br /> COPY_DIR = copy<br /> DEL_FILE = del<br /> DEL_DIR = rmdir<br /> MOVE = move<br /> CHK_DIR_EXISTS = if not exist<br /> MKDIR = mkdir<br /> INSTALL_FILE= $(COPY_FILE)<br /> INSTALL_DIR = $(COPY_DIR)<br /> <br /> ####### Files<br /> <br /> HEADERS = <br /> SOURCES = main.cpp<br /> OBJECTS = main.obj \<br /> myqt332test.obj<br /> FORMS = myqt332test.ui<br /> UICDECLS = myqt332test.h<br /> UICIMPLS = myqt332test.cpp<br /> SRCMOC = moc_myqt332test.cpp<br /> OBJMOC = moc_myqt332test.obj<br /> DIST = <br /> TARGET = myqt332test.exe<br /> <br /> ####### Implicit rules<br /> <br /> .SUFFIXES: .c .cpp .cc .cxx .C<br /> <br /> {.}.cpp{}.obj::<br /> $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo @&lt;&lt;<br /> $&lt;<br /> &lt;&lt;<br /> <br /> {.}.cc{}.obj::<br /> $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo @&lt;&lt;<br /> $&lt;<br /> &lt;&lt;<br /> <br /> {.}.cxx{}.obj::<br /> $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo @&lt;&lt;<br /> $&lt;<br /> &lt;&lt;<br /> <br /> {.}.C{}.obj::<br /> $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo @&lt;&lt;<br /> $&lt;<br /> &lt;&lt;<br /> <br /> {.}.c{}.obj::<br /> $(CC) -c $(CFLAGS) $(INCPATH) -Fo @&lt;&lt;<br /> $&lt;<br /> &lt;&lt;<br /> <br /> ####### Build rules<br /> <br /> all: Makefile $(TARGET)<br /> <br /> $(TARGET): $(UICDECLS) $(OBJECTS) $(OBJMOC) <br /> $(LINK) $(LFLAGS) /OUT:$(TARGET) @&lt;&lt; <br /> $(OBJECTS) $(OBJMOC) $(LIBS)<br /> &lt;&lt;<br /> <br /> <br /> mocables: $(SRCMOC)<br /> uicables: $(UICIMPLS) $(UICDECLS)<br /> <br /> Makefile: myqt332test.pro D:\QT332\mkspecs\win32-msvc.net\qmake.conf ..\..\QT332\lib\qtmain.prl<br /> $(QMAKE) -o Makefile myqt332test.pro<br /> qmake: <br /> @$(QMAKE) -o Makefile myqt332test.pro<br /> <br /> dist:<br /> $(ZIP) myqt332test.zip $(SOURCES) $(HEADERS) $(DIST) $(FORMS) D:/qttest/myqt332test/myqt332test.pro ..\..\QT332\lib\qtmain.prl myqt332test.ui.h <br /> <br /> uiclean:<br /> -$(DEL_FILE) myqt332test.h<br /> -$(DEL_FILE) myqt332test.cpp<br /> mocclean:<br /> -$(DEL_FILE) moc_myqt332test.cpp<br /> -$(DEL_FILE) moc_myqt332test.obj<br /> clean: uiclean mocclean<br /> -$(DEL_FILE) main.obj<br /> -$(DEL_FILE) myqt332test.obj<br /> -$(DEL_FILE) myqt332test.pdb<br /> -$(DEL_FILE) myqt332test.ilk<br /> -$(DEL_FILE) vc*.pdb<br /> -$(DEL_FILE) vc*.idb<br /> <br /> <br /> <br /> <br /> FORCE:<br /> <br /> distclean: clean<br /> -$(DEL_FILE) $(TARGET)<br /> <br /> ####### Compile<br /> <br /> main.obj: main.cpp \<br /> myqt332test.h \<br /> <br /> <br /> myqt332test.h: myqt332test.ui <br /> $(UIC) myqt332test.ui -o myqt332test.h<br /> <br /> myqt332test.cpp: myqt332test.h myqt332test.ui <br /> $(UIC) myqt332test.ui -i myqt332test.h -o myqt332test.cpp<br /> <br /> myqt332test.obj: myqt332test.cpp \<br /> myqt332test.ui.h \<br /> myqt332test.h \<br /> <br /> <br /> moc_myqt332test.obj: moc_myqt332test.cpp myqt332test.h <br /> <br /> moc_myqt332test.cpp: $(MOC) myqt332test.h<br /> $(MOC) myqt332test.h -o moc_myqt332test.cpp<br /> <br /> ####### Install<br /> <br /> install: <br /> <br /> uninstall: <br /> <br /> <br /> <br /> 在里面，我们可以看到，myqt332test.h和myqt332test.cpp p是怎么生成，moc_*.cpp是怎么生成的，使用的是那个c++的编译器，clean的话会清除什么东西<br /> <br /> 有点晕了吧，坚持一下，你会有收获的，关键来看看这里<br /> <br /> myqt332test.h: myqt332test.ui <br /> $(UIC) myqt332test.ui -o myqt332test.h<br /> <br /> myqt332test.cpp: myqt332test.h myqt332test.ui <br /> $(UIC) myqt332test.ui -i myqt332test.h -o myqt332test.cpp<br /> <br /> myqt332test.obj: myqt332test.cpp \<br /> myqt332test.ui.h \<br /> myqt332test.h \<br /> <br /> <br /> moc_myqt332test.obj: moc_myqt332test.cpp myqt332test.h <br /> <br /> moc_myqt332test.cpp: $(MOC) myqt332test.h<br /> $(MOC) myqt332test.h -o moc_myqt332test.cpp<br /> <br /> myqt332test.h 是靠这句话生成的 $(UIC) myqt332test.ui -o myqt332test.h<br /> myqt332test.cpp 是靠这句话生成的 $(UIC) myqt332test.ui -i myqt332test.h -o myqt332test.cpp<br /> moc_myqt332test.cpp 是靠这句话生成的 $(MOC) myqt332test.h -o moc_myqt332test.cpp<br /> <br /> 至于$(UIC) 和 $(MOC)是什么意思，？<br /> MOC = $(QTDIR)\bin\moc.exe<br /> UIC = $(QTDIR)\bin\uic.exe<br /> QMAKE = qmake<br /> <br /> 一切的一切，都在Makefile里面说得清清楚楚。<br /> 这也是经常提到的为什么我的一些修改会丢了呢？因为你的修改是在myqt332test.h和myqt332test.cpp里面的，clean以后 再次qmake会重新生成的。所以你要改什么控件的话，最好还是在designer里面修改，但是myqt332test.ui.h不一样，它不是生成的，不会被覆盖。其实myqt332test.ui.h里面是一些自己定义的东西，比如槽，比如变量的初始化，所以qt3的设计者就是要我们在myqt332test.ui.h里面写东西，在init（）里面初始化，而不是像平时的c++一样，在myqt332test.h里面定义变量，跑到myqt332test.cpp里面写东西，这个在qt4里面改变了方式了，呵呵，不觉得myqt332test.ui.h有点怪怪的吗?<br /> <br /> 在生成的myqt332test.cpp 里面可以看到，里面的控件是怎么创建的。<br /> <br /> myqt332test::myqt332test( QWidget* parent, const char* name, bool modal, WFlags fl )<br /> : QDialog( parent, name, modal, fl )<br /> {<br /> if ( !name )<br /> setName( &quot;myqt332test&quot; );<br /> <br /> pushButton1 = new QPushButton( this, &quot;pushButton1&quot; );<br /> pushButton1-&gt;setGeometry( QRect( 110, 115, 126, 26 ) );<br /> <br /> pushButton2 = new QPushButton( this, &quot;pushButton2&quot; );<br /> pushButton2-&gt;setGeometry( QRect( 110, 210, 131, 31 ) );<br /> <br /> textLabel1 = new QLabel( this, &quot;textLabel1&quot; );<br /> textLabel1-&gt;setGeometry( QRect( 370, 180, 81, 46 ) );<br /> languageChange();<br /> resize( QSize(600, 480).expandedTo(minimumSizeHint()) );<br /> clearWState( WState_Polished );<br /> init();<br /> }<br /> 看到了吧，里面控件的父类都是this，在这里可能你觉得的很自然，到了qt4就不一样了，到qt4的时候再详细讨论。<br /> <br /> <br /> 看完了makefile ，再来看看qt3的designer的一些特色。<br /> 其实个人觉得qt4以前的designer很像vc，比如lib和include 的路径的设置，生成dll还是exe，新建一个槽或者函数，变量的添加，关键字的着色，都可以在designer里面做到，就差不能编译和调试，这也是很多人感到不爽的地方，qt4干脆就把这些砍掉，狠^_^<br /> <br /> 不过layout这个东西确实让人耳恳恍拢 褂芯褪悄歉龅 ?，<br /> qt3大概就先说这些吧，以后想到什么再补吧，<br /> <br /> 下面把目光放在qt4身上。对于designer来说，她确实苗条一些了。<br /> 首先是生成的头文件的默认的名字由qt3的classname.h变成了ui_*.h，其次就是创建控件的方式有了很大不同，这或许是很多网友感到郁闷的地方，还有就是pro文件不再跟designer在一起了。更要命的是，很多控件类的名字都改变了。但是有一点值得肯定的是：事物总是朝着好的方向发展的。<br /> 随便在designer里面画几个控件。保存.ui文件。然后写一个main函数<br /> 大概是这个样子吧<br /> <br /> #include &lt;qapplication.h&gt;<br /> #include &quot;ui_mytest.h&quot;<br /> <br /> int main(int argc, char *argv[])<br /> {<br /> QApplication app(argc,argv);<br /> <br /> QWidget *dlg = new QWidget();<br /> Ui::mytest ui;<br /> ui.setupUi(dlg);<br /> <br /> dlg-&gt;show();<br /> <br /> return app.exec();<br /> }<br /> <br /> 大家可能对这段身材比较感兴趣<br /> QWidget *dlg = new QWidget();<br /> Ui::mytest ui;<br /> ui.setupUi(dlg);<br /> <br /> dlg-&gt;show();<br /> <br /> 为什么show的是dlg呢？setupUi到底做了什么？为什么要Ui::mytest ui这样定义呢？<br /> 看头看尾，看来只好在ui_mytest.h里面找答案了；<br /> <br /> #ifndef UI_MYTEST_H<br /> #define UI_MYTEST_H<br /> <br /> #include &lt;QtCore/QVariant&gt;<br /> #include &lt;QtGui/QAction&gt;<br /> #include &lt;QtGui/QApplication&gt;<br /> #include &lt;QtGui/QButtonGroup&gt;<br /> #include &lt;QtGui/QLabel&gt;<br /> #include &lt;QtGui/QPushButton&gt;<br /> #include &lt;QtGui/QWidget&gt;<br /> <br /> class Ui_mytest<br /> {<br /> public:<br /> QPushButton *pushButton;<br /> QLabel *label;<br /> QPushButton *pushButton_2;<br /> <br /> void setupUi(QWidget *mytest)<br /> {<br /> mytest-&gt;setObjectName(QString::fromUtf8(&quot;mytest&quot;));<br /> mytest-&gt;resize(QSize(400, 300).expandedTo(mytest-&gt;minimumSizeHint()));<br /> pushButton = new QPushButton(mytest);<br /> pushButton-&gt;setObjectName(QString::fromUtf8(&quot;pushButton&quot;));<br /> pushButton-&gt;setGeometry(QRect(70, 100, 75, 23));<br /> label = new QLabel(mytest);<br /> label-&gt;setObjectName(QString::fromUtf8(&quot;label&quot;));<br /> label-&gt;setGeometry(QRect(183, 110, 111, 31));<br /> pushButton_2 = new QPushButton(mytest);<br /> pushButton_2-&gt;setObjectName(QString::fromUtf8(&quot;pushButton_2&quot;));<br /> pushButton_2-&gt;setGeometry(QRect(80, 200, 75, 23));<br /> retranslateUi(mytest);<br /> <br /> QMetaObject::connectSlotsByName(mytest);<br /> } // setupUi<br /> <br /> void retranslateUi(QWidget *mytest)<br /> {<br /> mytest-&gt;setWindowTitle(QApplication::translate(&quot;mytest&quot;, &quot;Form&quot;, 0, QApplication::UnicodeUTF8));<br /> pushButton-&gt;setText(QApplication::translate(&quot;mytest&quot;, &quot;PushButton&quot;, 0, QApplication::UnicodeUTF8));<br /> label-&gt;setText(QApplication::translate(&quot;mytest&quot;, &quot;TextLabel&quot;, 0, QApplication::UnicodeUTF8));<br /> pushButton_2-&gt;setText(QApplication::translate(&quot;mytest&quot;, &quot;PushButton&quot;, 0, QApplication::UnicodeUTF8));<br /> Q_UNUSED(mytest);<br /> } // retranslateUi<br /> <br /> };<br /> <br /> namespace Ui {<br /> class mytest: public Ui_mytest {};<br /> } // namespace Ui<br /> <br /> #endif // UI_MYTEST_H<br /> <br /> 看来答案已经差不多了。<br /> main.cpp 里面的这句话其实创建一个“画板”，好让你在上面画东西；<br /> QWidget *dlg = new QWidget();<br /> Ui::mytest ui;<br /> 这句话的是定义名字空间namespace Ui 里面的一个类成员class mytest的一个对象 ui；<br /> 要看到这个class mytest 是共有继承这个类的public Ui_mytest，而这个类class Ui_mytest却不是继承任何qt的类。所以setupUi()要用把画板的指针传进来，<br /> ui.setupUi(dlg);<br /> 然后所有的控件的创建都是在这个画板上面进行的。<br /> 最后我们show的时候就把dlg show出去。其实这个时候上面已经有我们画的东西（控件）了。<br /> 给你一张白纸（dlg）,画好你的东西，然后帖到画板上（setupUi），show的时候当然就是你画的东西啦！<br /> 注意一个小细节，名字空间里面的类的名字怎么设置的？是在designer画ui的时候，右键菜单里面有个change objName，这里就是你改变<br /> namespace Ui {<br /> class mytest: public Ui_mytest {};<br /> }<br /> 中的 class mytest的时候。<br /> <br /> 休息一下！！<br /> 对了，那些qt关键的槽在那里设置啊？这可是qt的卖点啊？<br /> <br /> 那是因为我们给的画板太白了！它只是简单的一个widget，没有我们自己的槽，还是自己动手吧！<br /> 因为我们自己的槽人家qt怎么知道是什么啊？<br /> mytest.h<br /> <br /> #include &quot;ui_mytest.h&quot;<br /> #include &lt;qwidget.h&gt;<br /> <br /> <br /> class mytest : public QWidget<br /> {<br /> Q_OBJECT//这个对于slots来说很重要，不要忘记了<br /> public:<br /> <br /> mytest();<br /> virtual ~mytest();<br /> <br /> <br /> public slots:<br /> void myslots();<br /> <br /> <br /> private :<br /> Ui::mytest ui;<br /> <br /> };<br /> <br /> 各位看官注意了！这个class mytest 和 Ui::mytest 是不一样的，这里就体现了qt4 中designer的特点，她只是画Ui而已，其他的回归c++<br /> mytest.cpp<br /> <br /> #include &quot;mytest.h&quot;<br /> #include &lt;qmessagebox.h&gt;<br /> <br /> mytest::mytest()<br /> {<br /> ui.setupUi(this);//以后写构造函数第一件事就是写这个函数<br /> connect(ui.pushButton,SIGNAL(clicked()),this,SLOT(myslots()));<br /> }<br /> <br /> mytest::~mytest()<br /> {<br /> <br /> }<br /> <br /> void mytest::myslots()<br /> {<br /> QMessageBox::information(this,&quot;debug&quot;,&quot;myslots&quot;);<br /> }<br /> <br /> 这里要注意的是connect(ui.pushButton,SIGNAL(clicked()),this,SLOT(myslots()));<br /> 中的ui.pushButton，而不是经常写的pushButton，这也是由于是在pushButton Ui里面的<br /> ，而不是在class mytest里面的。<br /> 对应的main.cpp就变成了这个样子了。<br /> <br /> #include &lt;qapplication.h&gt;<br /> //#include &quot;ui_mytest.h&quot;<br /> <br /> #include &quot;mytest.h&quot;<br /> <br /> int main(int argc, char *argv[])<br /> {<br /> QApplication app(argc,argv);<br /> <br /> // QWidget *dlg = new QWidget();<br /> // Ui::mytest ui;<br /> // ui.setupUi(dlg);<br /> <br /> // dlg-&gt;show();<br /> <br /> <br /> mytest *dlg = new mytest();<br /> dlg-&gt;show(); <br /> <br /> return app.exec();<br /> }<br /> <br /> 一句话，到处都体现了qt4的设计思想，designer 只是画控件的工具。<br /> 很久没有写东西了，语句不是很通顺，也是第一次写这样的东西，难免有错漏，请各位网友指正，共同进步。<br /> <br /> <br /> 终于在世界杯开幕前赶出来了！！</p> 
 </div> 
 <div class="tpc_content">
  qt332.windowsxp,.net下通过
 </div> 
 <div class="tpc_content"> 
  <table style="border-collapse: collapse" border="1" cellspacing="0" bordercolor="#dddddd" cellpadding="0" width="360" align="center"> 
   <tbody> 
    <tr height="60"> 
     <td width="60" align="center"><img border="0" src="image/从 QT3 到 QT4， designe.rar.gif" /><p class="origImg">http://control.cublog.cn/fileicon/rar.gif</p></td> 
     <td> 
      <table style="border-collapse: collapse" class="FCK__ShowTableBorders" border="0" cellspacing="0" cellpadding="0" width="100%"> 
       <tbody> 
        <tr height="20"> 
         <td width="40" align="center">文件:</td> 
         <td>myqt332test.rar</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">大小:</td> 
         <td>302KB</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">下载:</td> 
         <td><a href="http://blogimg.chinaunix.net/blog/upfile2/080306170207.rar">下载</a></td> 
        </tr> 
       </tbody> 
      </table> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
 <div class="tpc_content">
  qt4.1.0开源版，windows2000，vc6.0通过（没有自己的slots）
 </div> 
 <div class="tpc_content"> 
  <table style="border-collapse: collapse" border="1" cellspacing="0" bordercolor="#dddddd" cellpadding="0" width="360" align="center"> 
   <tbody> 
    <tr height="60"> 
     <td width="60" align="center"><img border="0" src="image/从 QT3 到 QT4， designe.rar.gif" /><p class="origImg">http://control.cublog.cn/fileicon/rar.gif</p></td> 
     <td> 
      <table style="border-collapse: collapse" class="FCK__ShowTableBorders" border="0" cellspacing="0" cellpadding="0" width="100%"> 
       <tbody> 
        <tr height="20"> 
         <td width="40" align="center">文件:</td> 
         <td>mytest.rar</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">大小:</td> 
         <td>18KB</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">下载:</td> 
         <td><a href="http://blogimg.chinaunix.net/blog/upfile2/080306170311.rar">下载</a></td> 
        </tr> 
       </tbody> 
      </table> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
 <div class="tpc_content">
  qt4.1.0开源版，windows2000，vc6.0通过（有自己的slots）
 </div> 
 <div class="tpc_content"> 
  <table style="border-collapse: collapse" border="1" cellspacing="0" bordercolor="#dddddd" cellpadding="0" width="360" align="center"> 
   <tbody> 
    <tr height="60"> 
     <td width="60" align="center"><img border="0" src="image/从 QT3 到 QT4， designe.rar.gif" /><p class="origImg">http://control.cublog.cn/fileicon/rar.gif</p></td> 
     <td> 
      <table style="border-collapse: collapse" class="FCK__ShowTableBorders" border="0" cellspacing="0" cellpadding="0" width="100%"> 
       <tbody> 
        <tr height="20"> 
         <td width="40" align="center">文件:</td> 
         <td>mytest2.rar</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">大小:</td> 
         <td>26KB</td> 
        </tr> 
        <tr height="20"> 
         <td width="40" align="center">下载:</td> 
         <td><a href="http://blogimg.chinaunix.net/blog/upfile2/080306170336.rar">下载</a></td> 
        </tr> 
       </tbody> 
      </table> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 转自 
 <a target="_blank" href="http://blog.chinaunix.net/u1/56545/showart.php?id=490742">分享自己一些对qt的理解（原创）</a>
</div> 
<br /></div></body></html>