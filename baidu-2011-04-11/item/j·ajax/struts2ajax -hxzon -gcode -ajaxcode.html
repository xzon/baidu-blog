<html><head><title>struts2ajax -hxzon -gcode -ajaxcode</title></head><body><div id='tit'>struts2ajax -hxzon -gcode -ajaxcode</div><div id='cate'>j&middot;ajax</div><div id='date'>2008年09月25日 星期四 11:24 A.M.</div><div id='page'>96</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/669e5f82465464a40df4d2f1.html'>http://hi.baidu.com/hxzon/blog/item/669e5f82465464a40df4d2f1.html</a><div id='cnt'><pre></pre>
<div>
 struts2ajax -hxzon -gcode -ajaxcode
 <br /> 
 <br /> hxzon:struts2 ajax
 <br /> index.html三个文本框，当释放按键时发送Ajax请求，由helloAction的三个方法处理。
 <br /> 第一个方法直接在out里写入数据。
 <br /> 第二个方法用result指定返回hello.html页面。
 <br /> 第三个方法用result指定返回hello.jsp页面。
 <br /> ===============================================
 <br /> 1.index.html
 <br /> &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
 <br /> &lt;html&gt;
 <br /> &lt;head&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;title&gt;index html&lt;/title&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;script src=&quot;ajax1.js&quot; type=&quot;text/javascript&quot; &gt;&lt;/script&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;script src=&quot;ajax2.js&quot; type=&quot;text/javascript&quot; &gt;&lt;/script&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;script src=&quot;ajax3.js&quot; type=&quot;text/javascript&quot; &gt;&lt;/script&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/head&gt;
 <br /> 
 <br /> &lt;body&gt;
 <br /> &lt;div id=&quot;testHello&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href=&quot;hello.action&quot;&gt;hello&lt;/a&gt;
 <br /> &lt;/div&gt;
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; &lt;form action=&quot;#&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;text&quot; id=&quot;testAjax1&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; onkeyup=&quot;makeRequest()&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;/form&gt;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;form action=&quot;#&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;text&quot; id=&quot;testAjax1&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; onkeyup=&quot;makeRequest2()&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/form&gt;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;form action=&quot;#&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;text&quot; id=&quot;testAjax1&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; onkeyup=&quot;makeRequest3()&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/form&gt;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;div id=&quot;previewArea&quot; &gt;&lt;/div&gt;
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> ---------------------------------------
 <br /> 2.HelloAction.java
 <br /> package struts2ajax.action;
</div> 
<div> 
</div> 
<div>
 import org.apache.struts2.ServletActionContext;
</div> 
<div> 
</div> 
<div>
 public class HelloAction {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private int count=0;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String execute(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //System.out.println(&quot;execute&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count++;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;execute&quot;;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String ajax1() throws Exception {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count++;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServletActionContext.getResponse().getWriter().write(&quot;ajax1 data&lt;br&gt;&lt;br&gt;count=&quot;+count);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //System.out.print(&quot;ajax1 data&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String ajax2() throws Exception {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServletActionContext.getResponse().getWriter().write(&quot;ajax2 data&quot;+count);//不起作用
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //System.out.print(&quot;ajax1 data&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count++;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;ajax2&quot;;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String ajax3() throws Exception {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count++;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;ajax3&quot;;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int getCount() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return count;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void setCount(int count) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.count = count;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 }
 <br /> -----------------------------------
 <br /> 3.struts.xml
 <br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 <br /> &lt;!DOCTYPE struts PUBLIC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;
 <br /> &lt;struts&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.objectFactory&quot; value=&quot;spring&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.enable.DynamicMethodInvocation&quot; value=&quot;true&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.i18n.encoding&quot; value=&quot;GBK&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;package name=&quot;default&quot; extends=&quot;struts-default&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action name=&quot;hello&quot; class=&quot;hello&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;result name=&quot;execute&quot;&gt;hello.html&lt;/result&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;result name=&quot;ajax2&quot;&gt;hello.html&lt;/result&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;result name=&quot;ajax3&quot;&gt;hello.jsp&lt;/result&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/action&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/package&gt;
 <br /> &lt;/struts&gt;
 <br /> --------------------------------------
 <br /> 4.applicationContext.xml
 <br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 <br /> &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xsi:schemaLocation=&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;bean id=&quot;hello&quot; class=&quot;struts2ajax.action.HelloAction&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/bean&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &lt;/beans&gt;
 <br /> -----------------------------------
 <br /> 5.web.xml
 <br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 <br /> &lt;web-app version=&quot;2.5&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- spring bean容器 --&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;context-param&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/context-param&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;struts2&lt;/filter-name&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-class&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; org.apache.struts2.dispatcher.FilterDispatcher
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/filter-class&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/filter&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-mapping&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;struts2&lt;/filter-name&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/filter-mapping&gt;
</div> 
<div> 
</div> 
<div>
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;listener&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;listener-class&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; org.springframework.web.context.ContextLoaderListener
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/listener-class&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/listener&gt;
 <br /> &lt;welcome-file-list&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
 <br /> &lt;/welcome-file-list&gt;
 <br /> &lt;/web-app&gt;
 <br /> -----------------------------------------
 <br /> 6.ajax1.js
 <br /> var xhr;
 <br /> var outmsg;
 <br /> function makeRequest(){
 <br /> createXMLHttpRequest();
 <br /> xhr.onreadystatechange=handleStateChange;
 <br /> //var queryString=&quot;names=&quot; +encodeURIComponent(str);
 <br /> xhr.open(&quot;POST&quot;,&quot;hello!ajax1.action&quot;,true);
 <br /> xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded;&quot;);
 <br /> //xhr.send(queryString);
 <br /> xhr.send(null);
 <br /> }//end makeRequest
</div> 
<div> 
</div> 
<div>
 function createXMLHttpRequest(){
 <br /> if(window.ActiveXObject){
 <br /> xhr=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
 <br /> }
 <br /> else if(window.XMLHttpRequest){
 <br /> xhr=new XMLHttpRequest();
 <br /> }
 <br /> }//end createXMLHttpRequest
</div> 
<div> 
</div> 
<div>
 function handleStateChange(){
 <br /> if(xhr.readyState==4){
 <br /> if(xhr.status==200){
 <br /> &nbsp;&nbsp; parseResults();
 <br /> }
 <br /> }
 <br /> }//end handleStateChang
</div> 
<div> 
</div> 
<div>
 function parseResults(){
 <br /> var previewArea=document.getElementById(&quot;previewArea&quot;);
 <br /> if(xhr.readyState==4){
 <br /> if(xhr.status==200){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; outmsg=xhr.responseText;
 <br /> }
 <br /> else{
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; outmsg=&quot;error,xhr status:&quot;+xhr.status;
 <br /> }
 <br /> }//end if
 <br /> previewArea.innerHTML=outmsg;
 <br /> previewArea.style.visibility=&quot;visible&quot;;
 <br /> }//end parseResults
 <br /> -------------------------------------------
 <br /> 7.ajax2.js//共用ajax1.js里面的变量定义，方法定义，其实只有open的路径不同
 <br /> function makeRequest2(){
 <br /> createXMLHttpRequest();
 <br /> xhr.onreadystatechange=handleStateChange;
 <br /> //var queryString=&quot;names=&quot; +encodeURIComponent(str);
 <br /> xhr.open(&quot;POST&quot;,&quot;hello!ajax2.action&quot;,true);
 <br /> xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded;&quot;);
 <br /> //xhr.send(queryString);
 <br /> xhr.send(null);
 <br /> }//end makeRequest
 <br /> ---------------------------------
 <br /> 8.ajax3.js
 <br /> function makeRequest3(){
 <br /> createXMLHttpRequest();
 <br /> xhr.onreadystatechange=handleStateChange;
 <br /> //var queryString=&quot;names=&quot; +encodeURIComponent(str);
 <br /> xhr.open(&quot;POST&quot;,&quot;hello!ajax3.action&quot;,true);
 <br /> xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded;&quot;);
 <br /> //xhr.send(queryString);
 <br /> xhr.send(null);
 <br /> }//end makeRequest
 <br /> -----------------------------------
 <br /> 9.hello.html
 <br /> &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
 <br /> &lt;html&gt;
 <br /> &lt;head&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;title&gt;hello html&lt;/title&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;
 <br /> &lt;/head&gt;
 <br /> 
 <br /> &lt;body&gt;
 <br /> &lt;div id=&quot;testHello&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hello html
 <br /> &lt;/div&gt;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> ------------------------------
 <br /> 10.hello.jsp
 <br /> &lt;%@ page language=&quot;java&quot; pageEncoding=&quot;GBK&quot;%&gt;
</div> 
<div> 
</div> 
<div>
 &lt;html&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;head&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;hello jsp&lt;/title&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/head&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;body&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hello jsp,&lt;br&gt;&lt;br&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count=${count }
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/body&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/html&gt;
 <br /> -----------------------------------
</div></div></body></html>