<html><head><title>Hack 86. Make Quick Look and Feel Changes</title></head><body><div id='tit'>Hack 86. Make Quick Look and Feel Changes</div><div id='cate'>j&middot;swing</div><div id='date'>2010年06月11日 星期五 11:02 A.M.</div><div id='page'>13</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/c55e1dd55901c6c950da4b43.html'>http://hi.baidu.com/hxzon/blog/item/c55e1dd55901c6c950da4b43.html</a><div id='cnt'><h3 class="docSection1Title">Hack 86. Make Quick Look and Feel Changes</h3> 
<p> </p> 
<p>swing hacks chm</p> 
<p>laf LookAndFeel hxzon</p> 
<p>------------------------------------------------------------</p> 
<p class="docText"><span class="docEmphBold">Customize Metal with custom fonts, colors, and even system-bound properties using just a few API calls</span>.</p> 
<p class="docText">Swing is a very customizable UI toolkit. The most advanced way of changing the look of your application is with a custom Look and Feel (L&amp;F), but they can be tricky to build. Swing's L&amp;F API is very complicated, often requiring thousands of lines of code for a complete custom theme. Fortunately, if you want to change just a few colors or fonts, the L&amp;F API provides a much easier way. This hack shows how to create simple visual changes using UI properties.</p> 
<a name="swinghacks-CHP-11-SECT-9.1"></a> 
<h4 class="docSection2Title">11.9.1. Look and Feel Properties</h4> 
<p class="docText">Every Look and Feel that extends the <tt><span style=";;font-family:NSimsun;">javax.swing.plaf.basic.*</span></tt> classes can accept special properties that define the behavior of each Swing component. For example, there is property to control the background color of every <tt><span style=";;font-family:NSimsun;">JButton</span></tt>. If you change this property at the start of your program, then every <tt><span style=";;font-family:NSimsun;">JButton</span></tt> you create will have that background color.</p> 
<p class="docText">The UI properties are stored in a static class called the <tt><span style=";;font-family:NSimsun;">UIManager</span></tt>. To set a property, just put in the name of the property and a value object like a <tt><span style=";;font-family:NSimsun;">Color</span></tt>. To set the background color of a button to green, you would do something like this:</p> 
<pre>UIManager.put(&quot;Button.background&quot;, Color.green);</pre>
<p class="docText">It is important to set these properties before any components are created or they won't pick up the new settings.</p> 
<p class="docText">Below is the code for a simple program that shows a few components in a frame. It has a button, label, and text field along the top and a text area in a scroll pane in the middle. There is also a simple file menu at the top. Before creating any components, it sets the foreground and background colors for the button, label, text field, and panel to light and dark green:</p> 
<pre>public static void main(String[] args) throws Exception {<br />  Color bg = Color.green.brighter();<br />  Color fg = Color.green.darker();<br />  UIManager.put(&quot;Button.background&quot;,bg);<br />  UIManager.put(&quot;Button.foreground&quot;,fg);<br /><br />  UIManager.put(&quot;Label.background&quot;,bg);<br />  UIManager.put(&quot;Label.foreground&quot;,fg);<br />  UIManager.put(&quot;TextField.background&quot;,bg);<br />  UIManager.put(&quot;TextField.foreground&quot;,fg);<br />  UIManager.put(&quot;Panel.background&quot;,bg);<br />  UIManager.put(&quot;Panel.foreground&quot;,fg);<br /><br />  JTextArea jta = new JTextArea();<br />  jta.setText(&quot;text\ntext\ntext\ntext\ntext\ntext&quot;+<br />   &quot;\ntext\ntext\ntext\ntext\ntext&quot;);<br />  JScrollPane scroll = new JScrollPane(jta);<br />  JButton button = new JButton(&quot;A Button&quot;);<br />  JLabel label = new JLabel(&quot;A Label&quot;);<br />  JTextField text = new JTextField(&quot;A TextField&quot;);<br /><br />  JMenuBar mb = new JMenuBar();<br />  JMenu file = new JMenu(&quot;File&quot;);<br />  file.add(new JMenuItem(&quot;Open&quot;));<br />  file.add(new JMenuItem(&quot;Close&quot;));<br />  mb.add(file);<br />  JFrame frame = new JFrame(&quot;Custom LaF Defaults&quot;);<br />  JPanel top = new JPanel();<br />  top.setLayout(new BoxLayout(top,BoxLayout.X_AXIS));<br />  top.add(button);<br />  top.add(label);<br />  top.add(text);<br /><br />  JPanel panel = new JPanel();<br />  panel.setLayout(new BorderLayout());<br />  panel.add(&quot;North&quot;,top);<br />  panel.add(&quot;Center&quot;,scroll);<br /><br />  frame.getContentPane().add(panel);<br />  frame.setJMenuBar(mb);<br /><br />  frame.pack();<br />  frame.setSize(300,200);<br />  frame.setVisible(true);<br /> }</pre>
<br /> 
<p class="docText">When compiled, this will <a name="idx-CHP-11-1491"></a>look like Figure 11-11.</p> 
<p class="docText">Swing provides over 300 <a name="idx-CHP-11-1492"></a>properties that define the colors and fonts of each standard component. This lets you customize almost anything in your program. You can even set a color to be transparent, which may look interesting if you have a pattern background.</p> 
<h4 class="docSection2Title">11.9.2. Text Components</h4> 
<a name="idx-CHP-11-1493"></a> 
<p class="docText"><a name="idx-CHP-11-1494"></a>Text components have font settings in addition to their colors. This lets you set a component to use a different font <a name="idx-CHP-11-1495"></a>style or size. You can even load a custom font from a file:</p> 
<pre>Font font = Font.createFont(Font.TRUETYPE_FONT,<br />  new FileInputStream(&quot;dungeon.ttf&quot;)); <br /> font = font.deriveFont(Font.BOLD,16f); <br /> UIManager.put(&quot;Label.font&quot;,font);</pre>
<br /> 
<p class="docText">This would <a name="idx-CHP-11-1496"></a>look like Figure 11-12.</p> 
<p class="docText">Most components also have margins that are defined by an <tt><span style=";;font-family:NSimsun;">Insets</span></tt> object. A text field with large insets:</p> 
<pre>UIManager.put(&quot;TextField.margin&quot;, new Insets(25,25,25,25));</pre>
<br /> 
<p class="docText">would look like Figure 11-13.</p> 
<p class="docText">Some components even have <a name="idx-CHP-11-1498"></a>borders. Menu items have borders but they are turned off by default. You need to set an extra boolean to make a new border show up, as in Figure 11-14.</p> 
<pre>Border border = BorderFactory.createEtchedBorder(<br />  EtchedBorder.LOWERED);<br /> UIManager.put(&quot;MenuItem.border&quot;, border);<br /> UIManager.put(&quot;MenuItem.borderPainted&quot;, new Boolean(true));</pre>
<h4 class="docSection2Title">11.9.3. Use System Colors</h4> 
<a name="idx-CHP-11-1499"></a>
<a name="idx-CHP-11-1500"></a> 
<p class="docText">The <tt><span style=";;font-family:NSimsun;">UIManager</span></tt> lets you change any color in your application to whatever you want. Now, what if you wanted to create a theme that matched the native operating <a name="idx-CHP-11-1501"></a>system closer? You could hardcode some color values for each OS, but most windowing systems also let their users customize their colors. Hardcoded values wouldn't take those dynamic colors into account. Fortunately, AWT provides a way out: the <tt><span style=";;font-family:NSimsun;">SystemColor</span></tt> class.</p> 
<p class="docText"><tt><span style=";;font-family:NSimsun;">SystemColor</span></tt> is a special subclass of <tt><span style=";;font-family:NSimsun;">Color</span></tt> that provides access to most of the standard color settings of any operating system. It also has the special ability to update itself whenever the underlying <a name="idx-CHP-11-1502"></a>system color changes. This means if the user switches her native colors from a control panel, your application will automatically update itself to reflect the new settings.</p> 
<p class="docText">Instead of methods, <tt><span style=";;font-family:NSimsun;">SystemColor</span></tt> has a bunch of constants that define each type of color from <tt><span style=";;font-family:NSimsun;">activeCaptionText</span></tt> to <tt><span style=";;font-family:NSimsun;">windowBorder</span></tt>. The documentation is minor, so you will need to play around with different settings to get the effect you are <a name="idx-CHP-11-1503"></a>looking for:</p> 
<pre>Color sysbg = SystemColor.control;<br /> Color sysfg = SystemColor.controlText;<br /> UIManager.put(&quot;Button.background&quot;,sysbg);<br /> UIManager.put(&quot;Button.foreground&quot;,sysfg);</pre>
<br /> 
<p class="docText">This code sets the background and foreground of every button to use the <tt><span style=";;font-family:NSimsun;">control</span></tt> and <tt><span style=";;font-family:NSimsun;">controlText</span></tt> fields of <tt><span style=";;font-family:NSimsun;">SystemColor</span></tt>. With my computer set to use the Desert theme, it looks like Figure 11-15.</p> 
<p class="docText">If I change my window theme to high-contrast black, it looks like Figure 11-16.</p> 
<p class="docText"><tt><span style=";;font-family:NSimsun;">UIManager</span></tt> properties give developers a simple way to customize the colors, fonts, and borders of almost any Swing component. As an enhancement, you could allow users to customize the colors themselves and store the values in a properties file.</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p></div></body></html>