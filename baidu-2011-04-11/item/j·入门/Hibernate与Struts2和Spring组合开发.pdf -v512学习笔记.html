<html><head><title>Hibernate与Struts2和Spring组合开发.pdf -v512学习笔记</title></head><body><div id='tit'>Hibernate与Struts2和Spring组合开发.pdf -v512学习笔记</div><div id='cate'>j&middot;入门</div><div id='date'>2008年07月30日 星期三 10:15 P.M.</div><div id='page'>111</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/36b54734528d1948241f145c.html'>http://hi.baidu.com/hxzon/blog/item/36b54734528d1948241f145c.html</a><div id='cnt'><div>
 Hibernate与Struts2和Spring组合开发.pdf -v512学习笔记
</div> 
<div> 
</div> 
<div>
 1.1 组合Hibernate与Spring
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 1. 在 Eclipse中，新建一个 Web project。
</div> 
<div> 
</div> 
<div>
 选择Java EE5.0 。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 2. 给该项目增加 Hibernate 开发能力，增加 Hibernate 相关类库到当前项目的 Build Path，同时也提供了 hibernate.cfg.xml 这个配置文件。
</div> 
<div> 
</div> 
<div>
 选择Hibernate3.1，
</div> 
<div> 
</div> 
<div>
 勾选Core包。
</div> 
<div> 
</div> 
<div>
 3. 给该项目增加 Spring 开发能力，增加 spring 相关类库到当前项目的 Build Path，同时也提供了 applicationContext.xml 文件。注意：最好把 applicationContext.xml 文件保存到当前项目的 WebRoot/WEB-INF的根目录下。
</div> 
<div> 
</div> 
<div>
 选择Spring 2，勾选Core，Persistence Core包（会自动选择AOP包），
</div> 
<div> 
</div> 
<div>
 勾选Web包。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 4. 删除 hibernate.cfg.xml文件，修改 applicationContext.xml文件的内容，增加 sessionFactory和 dataSource 的设置。修改的内容如下所示：
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</div> 
<div> 
</div> 
<div>
 &lt;beans xmlns=&quot;
 <a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>&quot;
</div> 
<div> 
</div> 
<div>
 xmlns:xsi=&quot;
 <a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;
</div> 
<div> 
</div> 
<div>
 xsi:schemaLocation=&quot;
 <a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
</div> 
<div> 
</div> 
<div>
 <a href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</a>&quot;&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;bean id=&quot;dataSource&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;driverClassName&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; value=&quot;oracle.jdbc.driver.OracleDriver&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;url&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; value=&quot;jdbc:oracle:thin:@liuweiv3000:1521:ora9&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;username&quot; value=&quot;scott&quot;&gt;&lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;property name=&quot;password&quot; value=&quot;tiger&quot;&gt;&lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/bean&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;bean id=&quot;sessionFactory&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;dataSource&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;ref bean=&quot;dataSource&quot; /&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;hibernateProperties&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;props&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;prop key=&quot;hibernate.dialect&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp; org.hibernate.dialect.Oracle9Dialect
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/prop&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/props&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;mappingResources&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;list&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;value&gt;cn/com/jobedu/shop/model/Catalog.hbm.xml&lt;/value&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/list&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &lt;/bean&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/beans&gt;
</div> 
<div> 
</div> 
<div>
 进入build path，添加commons-dbcp-1.2.2.jar和commons-pool-1.3.jar。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 5. 通过 MyEclipse 的反向工程向导方式，生成 POJO类和对应的映射文件。
</div> 
<div> 
</div> 
<div>
 <br /> 6. 修改 applicationContext.xml 文件中&lt;property name=&quot;mappingResources&quot;&gt;元素的内容。如
</div> 
<div> 
</div> 
<div>
 下所示：
</div> 
<div> 
</div> 
<div>
 &lt;property name=&quot;mappingResources&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;list&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;value&gt;cn/com/jobedu/shop/model/Catalog.hbm.xml&lt;/value&gt;
</div> 
<div> 
</div> 
<div>
 &lt;value&gt;cn/com/jobedu/shop/model/Product.hbm.xml&lt;/value&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/list&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/property&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 7. 编写 DAO接口。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 package cn.com.jobedu.shop.dao;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 import java.util.List;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 import cn.com.jobedu.shop.model.Catalog;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public interface CatalogDao {
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public void create(Catalog c);
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public Catalog getCatalog(Long id);
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public List getCatalogs();
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public void update(Catalog c);
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public void remove(Long id);
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 8. 编写 DAO接口的实现类，实现类使用 Spring 提供的帮助类。示意如下：
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 package cn.com.jobedu.shop.dao.hibernate;
</div> 
<div> 
</div> 
<div>
 import java.util.List;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 import cn.com.jobedu.shop.dao.CatalogDao;
</div> 
<div> 
</div> 
<div>
 import cn.com.jobedu.shop.model.Catalog;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 public class CatalogDaoHibernate extends HibernateDaoSupport implements CatalogDao {
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 @Override
</div> 
<div> 
</div> 
<div>
 public void create(Catalog c) {
</div> 
<div> 
</div> 
<div>
 // HibernateTemplate template=getHibernateTemplate();
</div> 
<div> 
</div> 
<div>
 // template.save(c);
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; getHibernateTemplate().save(c);
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 @Override
</div> 
<div> 
</div> 
<div>
 public Catalog getCatalog(Long id) {
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; return (Catalog)getHibernateTemplate().get(Catalog.class, id);&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 @Override
</div> 
<div> 
</div> 
<div>
 public List getCatalogs() {
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; return getHibernateTemplate().find(&quot;from Catalog order by id desc&quot;);
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 @Override
</div> 
<div> 
</div> 
<div>
 public void remove(Long id) {
</div> 
<div> 
</div> 
<div>
 // Catalog c=this.getCatalog(id);
</div> 
<div> 
</div> 
<div>
 // getHibernateTemplate().delete(c);
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; getHibernateTemplate().delete(getCatalog(id));
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 @Override
</div> 
<div> 
</div> 
<div>
 public void update(Catalog c) {
</div> 
<div> 
</div> 
<div>
 getHibernateTemplate().update(c);&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 }&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 9. 修改 applicationContext.xml文件，增加对 Dao实现类的配置。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;bean id=&quot;catalogDao&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; class=&quot;cn.com.jobedu.shop.dao.hibernate.CatalogDaoHibernate&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;sessionFactory&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;ref bean=&quot;sessionFactory&quot; /&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/bean&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 1.2 再组合Struts2，完成Struts2、Spring和Hibernate的三者组合
</div> 
<div> 
</div> 
<div>
 0. 修改 web.xml 文件，增加struts2 的所需要的过滤器配置。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;filter&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;filter-name&gt;struts2&lt;/filter-name&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;filter-class&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; org.apache.struts2.dispatcher.FilterDispatcher
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/filter-class&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/filter&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;filter-mapping&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;filter-name&gt;struts2&lt;/filter-name&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/filter-mapping&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 1.增加 Struts2 相应类库， 增加 struts2-spring-plugin-x-x-x.jar文件。 （Struts 的压缩包中， Struts所提供的。 ）
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 2. 需要拷贝struts.xml 文件到 src 跟目录下，再修改 struts.xml 文件，进行常量配置。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;struts&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.objectFactory&quot; value=&quot;spring&quot; /&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/struts&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 3. 修改 web.xml 文件，配置 Spring 监听器和上下文变量。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;context-param&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;/WEB-INF/applicationContext*.xml&lt;/param-value&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/context-param&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;listener&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/listener&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 修改 web.xml 文件，增加OpenSessionInViewFilter的设置。
</div> 
<div> 
</div> 
<div>
 &lt;filter&gt;
</div> 
<div> 
</div> 
<div>
 &lt;filter-name&gt;lazyLoadingFilter&lt;/filter-name&gt;
</div> 
<div> 
</div> 
<div>
 &lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
</div> 
<div> 
</div> 
<div>
 &lt;/filter-class&gt; &lt;/filter&gt;
</div> 
<div> 
</div> 
<div>
 &lt;filter-mapping&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;filter-name&gt;lazyLoadingFilter&lt;/filter-name&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/filter-mapping&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 4. 编写 Action 类。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 5. 配置 struts.xml 文件。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 struts.xml
</div> 
<div> 
</div> 
<div>
 &lt;!DOCTYPE struts PUBLIC
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;
 <a href="http://struts.apache.org/dtds/struts-2.0.dtd">http://struts.apache.org/dtds/struts-2.0.dtd</a>&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &lt;struts&gt;
</div> 
<div> 
</div> 
<div>
 &lt;constant name=&quot;struts.objectFactory&quot; value=&quot;spring&quot; /&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;include file=&quot;struts-default.xml&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;package name=&quot;default&quot; extends=&quot;struts-default&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action name=&quot;hello&quot; class=&quot;helloBean&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;result&gt;hello.jsp&lt;/result&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/action&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; ....
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/package&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/struts&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 6. 修改 applicationConext.xml，默认情况下，Spring 从下面的文件中寻找为 action 所做的配置。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</div> 
<div> 
</div> 
<div>
 &lt;beans default-autowire=&quot;byName&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;bean id=&quot;helloBean&quot; class=&quot;cn.com.jobedu.HelloWorld&quot;&nbsp;&nbsp; 
 <font color="#ff0000">scope=&quot;prototype&quot;</font> /&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
</div> 
<div> 
</div> 
<div>
 &lt;/beans&gt;
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 7.编写所需要的 JSP 文件。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 8. 部署，调试整个项目。
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div> 
</div> 
<div>
 &lt;!-- 配置事务管理器 --&gt;&nbsp;&nbsp; &lt;bean id=&quot;transactionManager&quot;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;property name=&quot;sessionFactory&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;ref local=&quot;sessionFactory&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp; &lt;/property&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/bean&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;!-- 配置事务特性 ，配置 add、delete 和 update 开始的方法，事务传播特性为
</div> 
<div> 
</div> 
<div>
 required--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tx:attributes&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tx:method name=&quot;add*&quot; propagation=&quot;REQUIRED&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tx:method name=&quot;*&quot; read-only=&quot;true&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tx:attributes&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;/tx:advice&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;!-- 配置那些类的方法进行事务管理， 当前 cn.com.jobedu.crm.service 包中的子包、
</div> 
<div> 
</div> 
<div>
 类中所有方法需要，还需要参考 tx:advice 的设置 --&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;aop:config&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:pointcut id=&quot;allManagerMethod&quot; expression=&quot;execution (*&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div>
 cn.com.jobedu.crm.service.*.*(..))&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;allManagerMethod&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;/aop:config&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div> 
<div> 
</div> 
<div> 
</div></div></body></html>