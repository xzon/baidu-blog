<html><head><title>hibernate学习笔记(一，二)</title></head><body><div id='tit'>hibernate学习笔记(一，二)</div><div id='cate'>j&middot;入门</div><div id='date'>2008年08月27日 星期三 12:06 P.M.</div><div id='page'>105</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/fe50e0cdd2ccea570fb34592.html'>http://hi.baidu.com/hxzon/blog/item/fe50e0cdd2ccea570fb34592.html</a><div id='cnt'><p>hibernate学习笔记(一，二)</p> 
<p>hibernate学习笔记(一)</p> 
<ol class="dp-j"> 
 <li class="alt"><span twffan="done"><span twffan="done">一、hibernate数据持久化组件 &nbsp;&nbsp;</span></span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">对象持久化，把数据保存在永久的存储介质中（数据库） &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">OR/M（object relation mapping）对象关系映射。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">POJO类，就是标准的Java Bean。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">Hibernate就是一个可以自动的根据xml完成对象关系映射，并持久化到数据库的开源组件。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">Hibernate的底层也是有JDBC实现的。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">hibernate是通过xml文件的配置，对数据库的底层的方言，以及数据库连接所需的信息，以及连接数据库的驱动。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">hibernate的系统配置文件的名字一般叫做hibernate.cfg.xml，一般是映射类名加.hbm.xml。一般将映射类的xml文件和实体类放在一起。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">对象映射文件 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">hibernate的映射类的XXXX.hbm.xml的写法 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;?xml version=</span><span class="string" twffan="done"><font color="#0000ff">&quot;1.0&quot;</font></span><span twffan="done"> encoding=</span><span class="string" twffan="done"><font color="#0000ff">&quot;gbk&quot;</font></span><span twffan="done">?&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;!DOCTYPE hibernate-mapping PUBLIC &nbsp;&nbsp;</span></li> 
 <li><span class="string" twffan="done"><font color="#0000ff">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</font></span><span twffan="done"> &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="string" twffan="done"><font color="#0000ff">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;hibernate-mapping </span><span class="keyword" twffan="done"><strong><font color="#7f0055">package</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;XXX.XXX.XXX&quot;</font></span><span twffan="done">&gt;&lt;!--映射类所在的包--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done"> name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Xxxxxx&quot;</font></span><span twffan="done"> table=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Xxxxx&quot;</font></span><span twffan="done">&gt;&lt;!--将类和数据库的表联系起来--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;studentId&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;studentId&quot;</font></span><span twffan="done">&gt;&lt;!--主键生成策略--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;assigned&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;!--指定主键生成策略为用户指定--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;XXX&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;XXXX&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;string&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;!--类中的书性和字段之间建立联系--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;homeAddress&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;homeAddress&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;schoolAddress&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;schoolAddress&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;brithday&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;brithday&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;date&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;!--在hibernate中其他类型可以自动识别只有Date类型必须指名--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;/</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;/hibernate-mapping&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">hibernate.cfg.xml中会设置数据库的连接信息，以及引用的其他文件的文件名，和一些其他的摄制。这个文件一般放在项目的根目录下。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">在hibernate.cfg.xml的写法 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;!DOCTYPE hibernate-configuration PUBLIC &nbsp;&nbsp;</span></li> 
 <li><span class="string" twffan="done"><font color="#0000ff">&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</font></span><span twffan="done"> &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="string" twffan="done"><font color="#0000ff">&quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;hibernate-configuration&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;session-factory&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;show_sql&quot;</font></span><span twffan="done">&gt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">true</font></strong></span><span twffan="done">&lt;/property&gt;&lt;!--显示sql语句--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;format_sql&quot;</font></span><span twffan="done">&gt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">true</font></strong></span><span twffan="done">&lt;/property&gt;&lt;!--使显示的sql语句格式化--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;dialect&quot;</font></span><span twffan="done">&gt;....&lt;/property&gt;&lt;!--使用的数据库方言信息--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;connection.driver_class&quot;</font></span><span twffan="done">&gt;....&lt;/property&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;!--使用的数据库的驱动--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;connection.url&quot;</font></span><span twffan="done">&gt;....&lt;/property&gt;&lt;!--连接数据库使用的url--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;connection.username&quot;</font></span><span twffan="done">&gt;...&lt;/property&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;!--连接数据库的用户名--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;connection.password&quot;</font></span><span twffan="done">&gt;...&lt;/property&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;!--连接数据库的密码--&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;mapping resource=</span><span class="string" twffan="done"><font color="#0000ff">&quot;xxx/xxxx/Xxxxxx.hbm.xml&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;!--引入的映射对象的xml文件的全路径及文件名--&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&lt;/session-factory&gt; &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&lt;/hibernate-configuration&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">使用hibernate编程步骤 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="number" twffan="done">1</span><span twffan="done">，配置环境，加载hibernate的jar文件，以及连接数据库连接使用的jar文件，并配置CLASSPATH环境变量。 &nbsp;&nbsp;</span></li> 
 <li><span class="number" twffan="done">2</span><span twffan="done">，写hibernate所需的配置文件，hibernate.cfg.xml ，Xxxxx.hbm.xml &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="number" twffan="done">3</span><span twffan="done">，写POJO类 &nbsp;&nbsp;</span></li> 
 <li><span class="number" twffan="done">4</span><span twffan="done">，调用hibernate API。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="number" twffan="done">1</span><span twffan="done">)使用Configuration对象的buildSessionFactory()方法创建SessionFactory对象 &nbsp;&nbsp;</span></li> 
 <li><span class="number" twffan="done">2</span><span twffan="done">)使用SessionFactory对象openSession()方法创建Session对象。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="number" twffan="done">3</span><span twffan="done">)使用Session的相应方法来操作数据库，将对象信息持久化到数据库。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">二、ORM &nbsp;&nbsp;</span></li> 
 <li><span class="number" twffan="done">1</span><span twffan="done">、持久化管理器 --- session &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">持久化对象和临时对象，持久化对象，即对象的信息在数据库中存在，在内存中也有。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">临时对象也就是新对象，没有同步到数据库。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">session开放，对对象的修改，session都会保持其的同步 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">session.save(Object); 变为持久状态，默认在调用commit()时执行语句 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">session关闭，对象进入游离状态 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">删除对象，可以直接删除游离状态的对象，到临时状态，其间有一个转换到持久状态的过程 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="number" twffan="done">2</span><span twffan="done">、Hibernate中的对象的状态： &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">（</span><span class="number" twffan="done">1</span><span twffan="done">） Transient Object 临时对象 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">不与数据库中的任何一条记录关联，其生命周期在不被任何其他对象引用时为止，然后被垃圾回收。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">（</span><span class="number" twffan="done">2</span><span twffan="done">） Persistent Object 持久化对象 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">持久化对象实例有一个主健值作为其数据库标识，与Persistence Manage相关联，持久化对象实例总是与一个Session相关联。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">注：ORM有一个策略侦察持久化对象的更改，即automatic dirty checking。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">对于应用他是隐藏的。Hibernate的策略时尽可能晚的更新数据库，Hibernate默认时更新数据库的所有字段，若只想更新更改了的字段则改dynamic-update = “</span><span class="keyword" twffan="done"><strong><font color="#7f0055">true</font></strong></span><span twffan="done">”,即动态更新。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">（</span><span class="number" twffan="done">3</span><span twffan="done">） Datached Object 脱管对象 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">当关闭session，实例失去了与Persistence manager的关联，这些对象称作为托管对象，即不再与数据库关联也不在hibernater的管理之下。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">在应用中的一个事务之外可保存脱管对象的引用，这些引用可被再次用于新的事务中。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span class="number" twffan="done">3</span><span twffan="done">、ORM就是关系映射 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">是把对象永久保存到数据库的过程 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">三、SessionFactory是和一个数据库一一对应的，他只能对应一个hibernate.cfg.xml文件，一个hibernate.cfg.xml中只能配置一个数据库的连接信息。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">POJO（普通的java类） &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">持久化对象和临时对象，持久化对象，即对象的信息在数据库中存在，在内存中也有。临时对象也就是新对象，没有同步到数据库。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">Session，持久化管理器。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">四、Hibernate的核心接口 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">Configuration，用于解析hibernate.cfg.xml文件和XXXXX.hbm.xml文件，并创建SessionFactory对象。 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">SessionFactory，用于创建Session对象。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">Session，持久化管理器，对象级数据库操作 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">必须工作在单线程环境下：（</span><span class="number" twffan="done">1</span><span twffan="done">）加</span><span class="keyword" twffan="done"><strong><font color="#7f0055">synchronized</font></strong></span><span twffan="done"> （</span><span class="number" twffan="done">2</span><span twffan="done">）不能保存为成员变量，要创建局部变量 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">Query，对对象作持久化操作或查询操作 &nbsp;&nbsp;</span></li> 
 <li><span twffan="done">Transaction ，用于管理操作事务。 &nbsp;&nbsp;</span></li> 
 <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
 <li><span twffan="done">五、&lt;hibernate-mapping </span><span class="keyword" twffan="done"><strong><font color="#7f0055">package</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;XXX.XXX.XXX&quot;</font></span><span twffan="done"> auto-</span><span class="keyword" twffan="done"><strong><font color="#7f0055">import</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;false&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
 <li class="alt"><span class="keyword" twffan="done"><strong><font color="#7f0055">package</font></strong></span><span twffan="done"> 类的包名，在下面的映射中就可以不写类的全限定名称&nbsp;&nbsp;&nbsp;</span></li> 
 <li class="alt"> </li> 
</ol> 
<p class="alt">hibernate学习笔记(二)</p> 
<div class="alt"> 
 <ol class="dp-j"> 
  <li class="alt"><span twffan="done"><span twffan="done">一、id生成方式 &nbsp;&nbsp;</span></span></li> 
  <li><span class="number" twffan="done">1</span><span twffan="done">，序列sequence 只适用于Oracle &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;sequence&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;param name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;sequence&quot;</font></span><span twffan="done">&gt;person_seq&lt;/param&gt;&lt;!--指定sequence名--&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/generator&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li class="alt"><span class="number" twffan="done">2</span><span twffan="done">，自增列，适用于SQLServer、MySql &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;identity&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li><span class="number" twffan="done">3</span><span twffan="done">，取最大值加一 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;integer&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;increment&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li class="alt"><span class="number" twffan="done">4</span><span twffan="done">，根据底层数据库指定生成方法 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;native&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">使用缺省策略 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">针对Oracle数据库的生成方式还是sequence，只不过需要一个特定名字的sequence，</span><span class="string" twffan="done"><font color="#0000ff">&quot;hibernate_sequence&quot;</font></span><span twffan="done">。 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li><span class="number" twffan="done">5</span><span twffan="done">，高低位算法 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;hilo&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;param name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;table&quot;</font></span><span twffan="done">&gt;high_value&lt;/param&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;!--设置高位值取值的表--&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;param name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;column&quot;</font></span><span twffan="done">&gt;next_value&lt;/param&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;!--设置高位值取值的字段--&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;param name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;max_lo&quot;</font></span><span twffan="done">&gt;</span><span class="number" twffan="done">50</span><span twffan="done">&lt;/param&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;!--指定低位最大值，当取道最大值是会再取一个高位值再运算--&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/generator&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">以上是hilo算法的普通形式，不适合用于squenece &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">在一个会话中保存多个对象 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li><span twffan="done">二、Hibernate中对类关系的处理： &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">one―to―one关系在数据库中如何体现，在JavaBean中如何体现，在 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">Hibernate中如何映射one－to－one关系。 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span class="number" twffan="done">1</span><span twffan="done">、 数据库中：一个表的外健对应另一个表的主健，外健要加上Unique约束(外健关联)。或者是两个表共享一个主健,表现为子表中的pk同时引用了父表的pk作外健而存在（主健关联，子表中的pk和fk为一个字段）。 &nbsp;&nbsp;</span></li> 
  <li><span class="number" twffan="done">2</span><span twffan="done">、 javaBean中：在JavaBean中增加一个属性，即另外一个对象的引用，可以单向也可以双向。 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span class="number" twffan="done">3</span><span twffan="done">、 在hibernate中： &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">A、主健映射：都是one－to－one要用foreign生成策略。 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">以汽车car和发动机Engine（一对一关系）为例： &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">a、主表Car.hbm.xml的写法 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done"> name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Car&quot;</font></span><span twffan="done"> table=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car_pk&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;integer&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;native&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;name&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;name&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;string&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;one-to-one name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;engine&quot;</font></span><span twffan="done"> </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Engine&quot;</font></span><span twffan="done"> cascade=</span><span class="string" twffan="done"><font color="#0000ff">&quot;all&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">注：cascade=</span><span class="string" twffan="done"><font color="#0000ff">&quot;all&quot;</font></span><span twffan="done"> 表示增删改查Car对象时都会级联增加、删除和修改Engine对象。 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done"> 级联一定是在主对象的映射文件中 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li><span twffan="done">b、附表Engine.hbm.xml的写法 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done"> name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Engine&quot;</font></span><span twffan="done"> table=</span><span class="string" twffan="done"><font color="#0000ff">&quot;engine_pk&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;integer&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;foreign&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;param name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;property&quot;</font></span><span twffan="done">&gt;car&lt;/param&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/generator&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;model&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;model&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;string&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;one-to-one name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car&quot;</font></span><span twffan="done"> </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Car&quot;</font></span><span twffan="done"> constrained=</span><span class="string" twffan="done"><font color="#0000ff">&quot;true&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;/</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">注：constrained=</span><span class="string" twffan="done"><font color="#0000ff">&quot;true&quot;</font></span><span twffan="done">表示Engine应用了Car的主健作为外健。 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">foregin表明id的生成方式是引用表car的主键 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">B、外健映射：主表中用one－to－one，通过property －ref many－to－one &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">a、主表Car.hbm.xml的写法 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done"> name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Car&quot;</font></span><span twffan="done"> table=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car_fk&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;integer&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;native&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;name&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;name&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;string&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;one-to-one name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;engine&quot;</font></span><span twffan="done"> </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Engine&quot;</font></span><span twffan="done"> &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">property-ref=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car&quot;</font></span><span twffan="done"> cascade=</span><span class="string" twffan="done"><font color="#0000ff">&quot;save-update&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">注：name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;engine&quot;</font></span><span twffan="done"> property-ref=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car&quot;</font></span><span twffan="done">表示engine表引用了car表的主健作为他的外健。 &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">cascade=</span><span class="string" twffan="done"><font color="#0000ff">&quot;save-update&quot;</font></span><span twffan="done">表示增改Car对象时都会级联增加和修改Engine对象。 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&nbsp;&nbsp;</span></li> 
  <li><span twffan="done">b、附表Engine.hbm.xml的写法 &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done"> name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Engine&quot;</font></span><span twffan="done"> table=</span><span class="string" twffan="done"><font color="#0000ff">&quot;engine_fk&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;id name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;id&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;integer&quot;</font></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;generator </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;native&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/id&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">&lt;property name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;model&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;model&quot;</font></span><span twffan="done"> type=</span><span class="string" twffan="done"><font color="#0000ff">&quot;string&quot;</font></span><span twffan="done"> /&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;many-to-one name=</span><span class="string" twffan="done"><font color="#0000ff">&quot;car&quot;</font></span><span twffan="done"> </span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">=</span><span class="string" twffan="done"><font color="#0000ff">&quot;Car&quot;</font></span><span twffan="done"> &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">unique＝</span><span class="string" twffan="done"><font color="#0000ff">&quot;ture&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;carid&quot;</font></span><span twffan="done">/&gt; &nbsp;&nbsp;</span></li> 
  <li><span twffan="done">&lt;/</span><span class="keyword" twffan="done"><strong><font color="#7f0055">class</font></strong></span><span twffan="done">&gt; &nbsp;&nbsp;</span></li> 
  <li class="alt"><span twffan="done">注：unique＝</span><span class="string" twffan="done"><font color="#0000ff">&quot;ture&quot;</font></span><span twffan="done"> column=</span><span class="string" twffan="done"><font color="#0000ff">&quot;carid&quot;</font></span><span twffan="done">表示为engine表中的外健carid加上唯一约束，使之一对多关系强制转化为一对一关系。&nbsp;&nbsp;&nbsp;</span></li> 
  <li class="alt"> </li> 
 </ol> 
</div> 
<div class="alt"> 
</div></div></body></html>