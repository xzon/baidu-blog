<html><head><title>Chapter 3 JNI Types and Data Structures</title></head><body><div id='tit'>Chapter 3 JNI Types and Data Structures</div><div id='cate'>j&middot;基础</div><div id='date'>2009年08月25日 星期二 06:24 P.M.</div><div id='page'>35</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/7a9f35fa97d17217a9d3116a.html'>http://hi.baidu.com/hxzon/blog/item/7a9f35fa97d17217a9d3116a.html</a><div id='cnt'><h2 class="pNewHTMLPage"> </h2> 
<h2 class="pChapNum">Chapter 3 JNI Types and Data Structures</h2> 
<a name="wp15901"></a> 
<p class="pBody">This chapter discusses how the JNI maps Java types to native C types.</p> 
<a name="wp428"></a> 
<h2 class="pHeading1">Primitive Types</h2> 
<a name="wp16207"></a> 
<p class="pBody"><a href="http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp198">Table 3-1</a> describes Java primitive types and their machine-dependent native equivalents.</p> 
<a name="wp522"></a> 
<p class="pBody"> </p> 
<div align="left"> 
 <table class="FCK__ShowTableBorders" border="0" summary="Primitive Types and Native Equivalents" cellpadding="7"> 
  <caption>
   <a name="wp198"></a> 
   <div class="pTableCaption">
    Table 3-1 Primitive Types and Native Equivalents
   </div> 
  </caption> 
  <thead> 
   <tr align="center"> 
    <th><a name="wp16285"></a> 
     <div style="text-align: left" class="pTableHead">
      Java Type
     </div> </th> 
    <th><a name="wp16287"></a> 
     <div style="text-align: left" class="pTableHead">
      Native Type
     </div> </th> 
    <th><a name="wp16289"></a> 
     <div style="text-align: left" class="pTableHead">
      Description
     </div> </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16291"></a> 
     <div class="pTableText">
      boolean
     </div> </td> 
    <td valign="top" align="left"><a name="wp16293"></a> 
     <div class="pTableText">
      jboolean
     </div> </td> 
    <td valign="top" align="left"><a name="wp16295"></a> 
     <div class="pTableText">
      unsigned 8 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16297"></a> 
     <div class="pTableText">
      byte
     </div> </td> 
    <td valign="top" align="left"><a name="wp16299"></a> 
     <div class="pTableText">
      jbyte
     </div> </td> 
    <td valign="top" align="left"><a name="wp16301"></a> 
     <div class="pTableText">
      signed 8 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16303"></a> 
     <div class="pTableText">
      char
     </div> </td> 
    <td valign="top" align="left"><a name="wp16305"></a> 
     <div class="pTableText">
      jchar
     </div> </td> 
    <td valign="top" align="left"><a name="wp16307"></a> 
     <div class="pTableText">
      unsigned 16 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16309"></a> 
     <div class="pTableText">
      short
     </div> </td> 
    <td valign="top" align="left"><a name="wp16311"></a> 
     <div class="pTableText">
      jshort
     </div> </td> 
    <td valign="top" align="left"><a name="wp16313"></a> 
     <div class="pTableText">
      signed 16 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16315"></a> 
     <div class="pTableText">
      int
     </div> </td> 
    <td valign="top" align="left"><a name="wp16317"></a> 
     <div class="pTableText">
      jint
     </div> </td> 
    <td valign="top" align="left"><a name="wp16319"></a> 
     <div class="pTableText">
      signed 32 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16321"></a> 
     <div class="pTableText">
      long
     </div> </td> 
    <td valign="top" align="left"><a name="wp16323"></a> 
     <div class="pTableText">
      jlong
     </div> </td> 
    <td valign="top" align="left"><a name="wp16325"></a> 
     <div class="pTableText">
      signed 64 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16327"></a> 
     <div class="pTableText">
      float
     </div> </td> 
    <td valign="top" align="left"><a name="wp16329"></a> 
     <div class="pTableText">
      jfloat
     </div> </td> 
    <td valign="top" align="left"><a name="wp16331"></a> 
     <div class="pTableText">
      32 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16344"></a> 
     <div class="pTableText">
      double
     </div> </td> 
    <td valign="top" align="left"><a name="wp16346"></a> 
     <div class="pTableText">
      jdouble
     </div> </td> 
    <td valign="top" align="left"><a name="wp16348"></a> 
     <div class="pTableText">
      64 bits
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16333"></a> 
     <div class="pTableText">
      void
     </div> </td> 
    <td valign="top" align="left"><a name="wp16335"></a> 
     <div class="pTableText">
      void
     </div> </td> 
    <td valign="top" align="left"><a name="wp16337"></a> 
     <div class="pTableText">
      N/A
     </div> </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p class="pBody"> </p> 
<p>/******************************************************************************<br /> * Java Runtime Interface<br /> * Copyright (c) 1996 Netscape Communications Corporation. All rights reserved.<br /> *****************************************************************************/</p> 
<p>#ifndef _JAVASOFT_JNI_H_<br /> #define _JAVASOFT_JNI_H_</p> 
<p>#include &lt;stdio.h&gt;<br /> #include &lt;stdarg.h&gt;</p> 
<p>/* jni_md.h contains the machine-dependent typedefs for jbyte, jint<br /> and jlong */</p> 
<p>#include &quot;jni_md.h&quot;</p> 
<p>#ifdef __cplusplus<br /> extern &quot;C&quot; {<br /> #endif</p> 
<p>/*<br /> * JNI Types<br /> */</p> 
<p>#ifndef JNI_TYPES_ALREADY_DEFINED_IN_JNI_MD_H</p> 
<p>typedef unsigned char jboolean;<br /> typedef unsigned short jchar;<br /> typedef short&nbsp;&nbsp; jshort;<br /> typedef float&nbsp;&nbsp; jfloat;<br /> typedef double&nbsp;&nbsp; jdouble;</p> 
<p>typedef jint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jsize;</p> 
<p>#ifdef __cplusplus</p> 
<p>class _jobject {};<br /> class _jclass : public _jobject {};<br /> class _jthrowable : public _jobject {};<br /> class _jstring : public _jobject {};<br /> class _jarray : public _jobject {};<br /> class _jbooleanArray : public _jarray {};<br /> class _jbyteArray : public _jarray {};<br /> class _jcharArray : public _jarray {};<br /> class _jshortArray : public _jarray {};<br /> class _jintArray : public _jarray {};<br /> class _jlongArray : public _jarray {};<br /> class _jfloatArray : public _jarray {};<br /> class _jdoubleArray : public _jarray {};<br /> class _jobjectArray : public _jarray {};</p> 
<p>typedef _jobject *jobject;<br /> typedef _jclass *jclass;<br /> typedef _jthrowable *jthrowable;<br /> typedef _jstring *jstring;<br /> typedef _jarray *jarray;<br /> typedef _jbooleanArray *jbooleanArray;<br /> typedef _jbyteArray *jbyteArray;<br /> typedef _jcharArray *jcharArray;<br /> typedef _jshortArray *jshortArray;<br /> typedef _jintArray *jintArray;<br /> typedef _jlongArray *jlongArray;<br /> typedef _jfloatArray *jfloatArray;<br /> typedef _jdoubleArray *jdoubleArray;<br /> typedef _jobjectArray *jobjectArray;</p> 
<p>#else</p> 
<p>struct _jobject;</p> 
<p>typedef struct _jobject *jobject;<br /> typedef jobject jclass;<br /> typedef jobject jthrowable;<br /> typedef jobject jstring;<br /> typedef jobject jarray;<br /> typedef jarray jbooleanArray;<br /> typedef jarray jbyteArray;<br /> typedef jarray jcharArray;<br /> typedef jarray jshortArray;<br /> typedef jarray jintArray;<br /> typedef jarray jlongArray;<br /> typedef jarray jfloatArray;<br /> typedef jarray jdoubleArray;<br /> typedef jarray jobjectArray;</p> 
<p>#endif</p> 
<p>typedef jobject jweak;</p> 
<p>typedef union jvalue {<br /> jboolean z;<br /> jbyte&nbsp;&nbsp;&nbsp; b;<br /> jchar&nbsp;&nbsp;&nbsp; c;<br /> jshort&nbsp;&nbsp; s;<br /> jint&nbsp;&nbsp;&nbsp;&nbsp; i;<br /> jlong&nbsp;&nbsp;&nbsp; j;<br /> jfloat&nbsp;&nbsp; f;<br /> jdouble d;<br /> jobject l;<br /> } jvalue;</p> 
<p>struct _jfieldID;<br /> typedef struct _jfieldID *jfieldID;</p> 
<p>struct _jmethodID;<br /> typedef struct _jmethodID *jmethodID;</p> 
<p>/* Return values from jobjectRefType */<br /> typedef enum _jobjectType {<br /> JNIInvalidRefType&nbsp;&nbsp;&nbsp; = 0,<br /> JNILocalRefType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 1,<br /> JNIGlobalRefType&nbsp;&nbsp;&nbsp;&nbsp; = 2,<br /> JNIWeakGlobalRefType = 3 <br /> } jobjectRefType;</p> 
<p><br /> #endif /* JNI_TYPES_ALREADY_DEFINED_IN_JNI_MD_H */</p> 
<p>-----------------------------------------------------<br /> /*<br /> * @(#)jni_md.h 1.15 05/11/17<br /> *<br /> * Copyright 2006 Sun Microsystems, Inc. All rights reserved.<br /> * SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.<br /> */</p> 
<p>#ifndef _JAVASOFT_JNI_MD_H_<br /> #define _JAVASOFT_JNI_MD_H_</p> 
<p>#define JNIEXPORT __declspec(dllexport)<br /> #define JNIIMPORT __declspec(dllimport)<br /> #define JNICALL __stdcall</p> 
<p>typedef long jint;<br /> typedef __int64 jlong;<br /> typedef signed char jbyte;</p> 
<p>#endif /* !_JAVASOFT_JNI_MD_H_ */</p> 
<p><a name="wp15927"></a></p> 
<p class="pBody">The following definition is provided for convenience.</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">#define JNI_FALSE  0<a name="wp525"> </a> #define JNI_TRUE   1<a name="wp526"> </a></pre> 
</div> 
<a name="wp16071"></a> 
<p class="pBody">The <code class="cCode"><font face="新宋体">jsize</font></code> integer type is used to describe cardinal indices and sizes:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">typedef jint jsize;<a name="wp534"> </a></pre> 
</div> 
<a name="wp15954"></a> 
<h2 class="pHeading1">Reference Types</h2> 
<a name="wp970"></a> 
<p class="pBody">The JNI includes a number of reference types that correspond to different kinds of Java objects. JNI reference types are organized in the hierarchy shown in <a href="http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp914">Figure 3-1</a>.</p> 
<a name="wp912"></a> 
<p class="pBody"> </p> 
<div align="center">
 <img border="0" hspace="0" alt="The top of the heirarchy is jobject. Subclasses of jobject are jclass, jstring, jarray and jthrowable. Subclasses of jarray are jobjectArray, jbooleanArray, jbyteArray, jcharArray, jshortArray, jintArray, jlongArray, jfloatArray, jdoubleArray." width="662" height="226" src="image/Chapter 3 JNI Types .types4.gif" />
 <p class="origImg">http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/images/types4.gif</p>
</div> 
<p class="pBody"> </p> 
<a name="wp914"></a> 
<div class="pFigureCaption">
 Figure 3-1 Reference Type Hierarchy
</div> 
<a name="wp663"></a> 
<p class="pBody">In C, all other JNI reference types are defined to be the same as jobject. For example:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">typedef jobject jclass;<a name="wp1032"> </a></pre> 
</div> 
<a name="wp1033"></a> 
<p class="pBody">In C++, JNI introduces a set of dummy classes to enforce the subtyping relationship. For example:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">class _jobject {};<a name="wp1041"> </a> class _jclass : public _jobject {};<a name="wp1055"> </a> ...<a name="wp1057"> </a> typedef _jobject *jobject;<a name="wp1058"> </a> typedef _jclass *jclass;<a name="wp1063"> </a></pre> 
</div> 
<a name="wp1064"></a> 
<h2 class="pHeading1">Field and Method IDs</h2> 
<a name="wp1065"></a> 
<p class="pBody">Method and field IDs are regular C pointer types:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">struct _jfieldID;              /* opaque structure */<a name="wp1067"> </a> typedef struct _jfieldID *jfieldID;   /* field IDs */<a name="wp1068"> </a> <a name="wp1069"> </a> struct _jmethodID;              /* opaque structure */<a name="wp1070"> </a> typedef struct _jmethodID *jmethodID; /* method IDs */<a name="wp574"> </a></pre> 
</div> 
<a name="wp568"></a> 
<h2 class="pHeading1">The Value Type</h2> 
<a name="wp16107"></a> 
<p class="pBody">The <code class="cCode"><font face="新宋体">jvalue</font></code> union type is used as the element type in argument arrays. It is declared as follows:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">typedef union jvalue {<a name="wp582"> </a>     jboolean z;<a name="wp583"> </a>     jbyte    b;<a name="wp584"> </a>     jchar    c;<a name="wp585"> </a>     jshort   s;<a name="wp586"> </a>     jint     i;<a name="wp587"> </a>     jlong    j;<a name="wp588"> </a>     jfloat   f;<a name="wp589"> </a>     jdouble  d;<a name="wp590"> </a>     jobject  l;<a name="wp591"> </a> } jvalue;<a name="wp592"> </a></pre> 
</div> 
<a name="wp16432"></a> 
<h2 class="pHeading1">Type Signatures</h2> 
<a name="wp16437"></a> 
<p class="pBody">The JNI uses the Java VM’s representation of type signatures. <a href="http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp276">Table 3-2</a> shows these type signatures.</p> 
<a name="wp597"></a> 
<p class="pBody"> </p> 
<div align="left"> 
 <table class="FCK__ShowTableBorders" border="0" summary="Java VM Type Signatures" cellpadding="7"> 
  <caption>
   <a name="wp276"></a> 
   <div class="pTableCaption">
    Table 3-2 Java VM Type Signatures
   </div> 
  </caption> 
  <thead> 
   <tr align="center"> 
    <th><a name="wp16445"></a> 
     <div style="text-align: left" class="pTableHead">
      Type Signature
     </div> </th> 
    <th><a name="wp16447"></a> 
     <div style="text-align: left" class="pTableHead">
      Java Type
     </div> </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16449"></a> 
     <div class="pTableText">
      Z
     </div> </td> 
    <td valign="top" align="left"><a name="wp16451"></a> 
     <div class="pTableText">
      boolean
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16453"></a> 
     <div class="pTableText">
      B
     </div> </td> 
    <td valign="top" align="left"><a name="wp16455"></a> 
     <div class="pTableText">
      byte
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16457"></a> 
     <div class="pTableText">
      C
     </div> </td> 
    <td valign="top" align="left"><a name="wp16459"></a> 
     <div class="pTableText">
      char
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16461"></a> 
     <div class="pTableText">
      S
     </div> </td> 
    <td valign="top" align="left"><a name="wp16463"></a> 
     <div class="pTableText">
      short
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16465"></a> 
     <div class="pTableText">
      I
     </div> </td> 
    <td valign="top" align="left"><a name="wp16467"></a> 
     <div class="pTableText">
      int
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16469"></a> 
     <div class="pTableText">
      J
     </div> </td> 
    <td valign="top" align="left"><a name="wp16471"></a> 
     <div class="pTableText">
      long
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16473"></a> 
     <div class="pTableText">
      F
     </div> </td> 
    <td valign="top" align="left"><a name="wp16475"></a> 
     <div class="pTableText">
      float
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16477"></a> 
     <div class="pTableText">
      D
     </div> </td> 
    <td valign="top" align="left"><a name="wp16479"></a> 
     <div class="pTableText">
      double
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16520"></a> 
     <div class="pTableText">
      L fully-qualified-class ;
     </div> </td> 
    <td valign="top" align="left"><a name="wp16522"></a> 
     <div class="pTableText">
      fully-qualified-class
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16528"></a> 
     <div class="pTableText">
      [ type
     </div> </td> 
    <td valign="top" align="left"><a name="wp16530"></a> 
     <div class="pTableText">
      type[]
     </div> </td> 
   </tr> 
   <tr align="left"> 
    <td valign="top" align="left"><a name="wp16534"></a> 
     <div class="pTableText">
      ( arg-types ) ret-type
     </div> </td> 
    <td valign="top" align="left"><a name="wp16536"></a> 
     <div class="pTableText">
      method type
     </div> </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p class="pBody"> </p> 
<a name="wp16537"></a> 
<p class="pBody">For example, the Java method:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">long f (int n, String s, int[] arr);<a name="wp600"> </a></pre> 
</div> 
<a name="wp16540"></a> 
<p class="pBody">has the following type signature:</p> 
<div class="pPreformatted"> 
 <pre class="pPreformatted">(ILjava/lang/String;[I)J<a name="wp607"> </a></pre> 
</div> 
<p><a name="wp16542"></a></p> 
<p>hxzon：无返回值用V，无参数用()。</p> 
<h2 class="pHeading1">Modified UTF-8 Strings</h2> 
<a name="wp477"></a> 
<p class="pBody">The JNI uses modified UTF-8 strings to represent various string types. Modified UTF-8 strings are the same as those used by the Java VM. Modified UTF-8 strings are encoded so that character sequences that contain only non-null ASCII characters can be represented using only one byte per character, but all Unicode characters can be represented.</p> 
<p>All characters in the range \u0001 to \u007F are represented by a single byte, as follows:</p> 
<p> </p>
<table border="1" cellspacing="0" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="7"> <p> </p> 
    <center>
     bits 6-0
    </center></td> 
  </tr> 
 </tbody> 
</table>  
<p> </p> 
<p>The seven bits of data in the byte give the value of the character represented.</p> 
<p>The null character (<code><font face="新宋体">'\u0000'</font></code>) and characters in the range <code><font face="新宋体">'\u0080'</font></code> to <code><font face="新宋体">'\u07FF'</font></code> are represented by a pair of bytes x and y:</p> 
<p>x: </p>
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="5"> <p> </p> 
    <center>
     bits 10-6
    </center></td> 
  </tr> 
 </tbody> 
</table> y: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="6"> <p> </p> 
    <center>
     bits 5-0
    </center></td> 
  </tr> 
 </tbody> 
</table>  
<p> </p> 
<p>The bytes represent the character with the value ((x &amp; <code><font face="新宋体">0x1f</font></code>) &lt;&lt; <code><font face="新宋体">6</font></code>) + (y &amp; <code><font face="新宋体">0x3f</font></code>).</p> 
<p>Characters in the range <code><font face="新宋体">'\u0800'</font></code> to <code><font face="新宋体">'\uFFFF'</font></code> are represented by 3 bytes x, y, and z:</p> 
<p>x: </p>
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="4"> <p> </p> 
    <center>
     bits 15-12
    </center></td> 
  </tr> 
 </tbody> 
</table> y: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="6"> <p> </p> 
    <center>
     bits 11-6
    </center></td> 
  </tr> 
 </tbody> 
</table> z: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="6"> <p> </p> 
    <center>
     bits 5-0
    </center></td> 
  </tr> 
 </tbody> 
</table>  
<p> </p> 
<p>The character with the value ((x &amp; <code><font face="新宋体">0xf</font></code>) &lt;&lt; <code><font face="新宋体">12</font></code>) + ((y &amp; <code><font face="新宋体">0x3f</font></code>) &lt;&lt; <code><font face="新宋体">6</font></code>) + (z &amp; <code><font face="新宋体">0x3f</font></code>) is represented by the bytes.</p> 
<p>Characters with code points above U+FFFF (so-called <em>supplementary characters</em>) are represented by separately encoding the two surrogate code units of their UTF-16 representation. Each of the surrogate code units is represented by three bytes. This means, supplementary characters are represented by six bytes, <em>u</em>, <em>v</em>, <em>w</em>, <em>x</em>, <em>y</em>, and <em>z</em>:</p> 
<p>u: </p>
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
  </tr> 
 </tbody> 
</table> v: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="4"> <p> </p> 
    <center>
     (bits 20-16) - 1
    </center></td> 
  </tr> 
 </tbody> 
</table> w: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="6"> <p> </p> 
    <center>
     bits 15-10
    </center></td> 
  </tr> 
 </tbody> 
</table> x: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
  </tr> 
 </tbody> 
</table> y: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td colspan="4"> <p> </p> 
    <center>
     bits 9-6
    </center></td> 
  </tr> 
 </tbody> 
</table> z: 
<table border="1" cellspacing="0" cellpadding="2" width="30%"> 
 <tbody> 
  <tr> 
   <td width="12%"> <p> </p> 
    <center>
     1
    </center></td> 
   <td width="13%"> <p> </p> 
    <center>
     0
    </center></td> 
   <td colspan="6"> <p> </p> 
    <center>
     bits 5-0
    </center></td> 
  </tr> 
 </tbody> 
</table>  
<p> </p> 
<p>The character with the value 0x10000+((v&amp;0x0f)&lt;&lt;16)+((w&amp;0x3f)&lt;&lt;10)+(y&amp;0x0f)&lt;&lt;6)+(z&amp;0x3f) is represented by the six bytes.</p> 
<p>The bytes of multibyte characters are stored in the <code><font face="新宋体">class</font></code> file in big-endian (high byte first) order.</p> 
<p>There are two differences between this format and the standard UTF-8 format. First, the null character <code><font face="新宋体">(char)0</font></code> is encoded using the two-byte format rather than the one-byte format. This means that modified UTF-8 strings never have embedded nulls. Second, only the one-byte, two-byte, and three-byte formats of standard UTF-8 are used. The Java VM does not recognize the four-byte format of standard UTF-8; it uses its own two-times-three-byte format instead.</p> 
<p>For more information regarding the standard UTF-8 format, see section <em>3.9 Unicode Encoding Forms</em> of <em>The Unicode Standard, Version 4.0</em>.</p></div></body></html>