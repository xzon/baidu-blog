<html><head><title>prefuse introduction &gt; example application</title></head><body><div id='tit'>prefuse introduction &gt; example application</div><div id='cate'>j&middot;桌面</div><div id='date'>2009年08月16日 星期日 05:01 P.M.</div><div id='page'>37</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/60b2912bb5888cf3e7cd4027.html'>http://hi.baidu.com/hxzon/blog/item/60b2912bb5888cf3e7cd4027.html</a><div id='cnt'><h1 class="pagetitle">prefuse introduction &gt; example application</h1> 
<div class="entry"> 
 <p>In this section we'll deconstruct an example of a prefuse application: a simple social network visualization. Our visualization will provide an animated force-directed layout of a social network, with nodes colored according to gender and showing the names of people they represent. All code presented below is assumed to be within the <code><font face="新宋体">main</font></code> method of an application class. The full code for this example is available as <a href="http://prefuse.org/doc/manual/introduction/example/Example.java">Example.java</a>.</p> 
 <div class="manual-figure">
  <img src="image/prefuse introduction.example_app.gif" />
  <p class="origImg">http://prefuse.org/doc/manual/introduction/example/example_app.gif</p>
  <br /> Example Application: A Simple Social Network Visualization
 </div> 
 <h3>1. loading data</h3> 
 <p>The first step is to load the graph data into a prefuse <a class="api" href="http://prefuse.org/doc/api/prefuse/data/Graph.html">Graph</a> instance. First take a look at the content of the file: <code><a href="http://prefuse.org/doc/manual/introduction/example/socialnet.xml"><font face="新宋体">socialnet.xml</font></a></code> (the file is also available in the <code><font face="新宋体">data</font></code> directory of the prefuse distribution). Note that the nodes have two data attributes: a <code><font face="新宋体">name</font></code> field and a <code><font face="新宋体">gender</font></code> field. The following code shows how to load the GraphML-formatted <code><font face="新宋体">socialnet.xml</font></code> file into a prefuse Graph data structure using the <a class="api" href="http://prefuse.org/doc/api/prefuse/data/GraphMLReader.html">GraphMLReader</a> class (an instance of the more general <a class="api" href="http://prefuse.org/doc/api/prefuse/data/GraphReader.html">GraphReader</a> class).</p> 
 <pre class="codebox">Graph graph = null;
try {
    graph = new GraphMLReader().readGraph(&quot;/socialnet.xml&quot;);
} catch ( DataIOException e ) {
    e.printStackTrace();
    System.err.println(&quot;Error loading graph. Exiting...&quot;);
    System.exit(1);
}</pre> 
 <p>The code attempts to load the graph, and if an error occurs, exits with an error code (any exit value not equal to zero signals an error). More should be said about the input to the <a class="api" href="http://prefuse.org/doc/api/prefuse/data/io/GraphReader.html#readGraph%28java.lang.String%29">readGraph</a> method. Why does <code><font face="新宋体">&quot;/socialnet.xml&quot;</font></code> work? This is because the data reader tries to resolve input strings in multiple ways. First, it checks to see if the string is a URL (e.g., if it starts with <code><font face="新宋体">http://</font></code>, <code><font face="新宋体">ftp://</font></code>, or <code><font face="新宋体">file://</font></code>) and if so, opens a URL connection. If not, it checks to see if the string points to a resource currently on the Java runtime's classpath. Since the <code><font face="新宋体">data</font></code> folder of the prefuse distribution should be included on the classpath, <code><font face="新宋体">&quot;/socialnet.xml&quot;</font></code> should load without incident -- it is located in the root of the classpath. Finally, if the string does not successfully resolve to a resource on the classpath, it is treated as the path to a file on the file system.</p> 
 <p>If you are having trouble loading the file, either make sure the prefuse data directory is on your classpath, or, alternatively, change the file location. For example, <code><font face="新宋体">http://prefuse.org/doc/manual/intro/socialnet.xml</font></code> should do the trick. In any case, the end result should be that the contents of the <code><font face="新宋体">socialnet.xml</font></code> file are now loaded into <code><font face="新宋体">graph</font></code>.</p> 
 <h3>2. the visualization</h3> 
 <p>Now we need to create a visual abstraction of the graph. To do this, we first create a new <a class="api" href="http://prefuse.org/doc/api/prefuse/Visualization.html">Visualization</a> instance and add the graph data to it. We register the loaded graph with the data group name &quot;graph&quot;. This data group name will be used to reference the visual data later. When Graph or Tree instances are added to a visualization, two other subgroups are automatically registered: one for the nodes (with a &quot;.nodes&quot; suffix) and one for edges (with a &quot;.edges&quot; suffix). We will see these subgroups used later in the example.</p> 
 <div class="codebox"> 
  <pre>// add the graph to the visualization as the data group &quot;graph&quot;
// nodes and edges are accessible as &quot;graph.nodes&quot; and &quot;graph.edges&quot;
Visualization vis = new Visualization();
vis.add(&quot;graph&quot;, graph);</pre> 
 </div> 
 <h3>3. the renderers and renderer factory</h3> 
 <p>The next step is to set up the <a class="api" href="http://prefuse.org/doc/api/prefuse/render/Renderer.html">Renderers</a> used to draw the <a class="api" href="http://prefuse.org/doc/api/prefuse/visual/VisualItem.html">VisualItems</a> now contained in the Visualiaztion. By default, the Visualization contains an instance of a <a class="api" href="http://prefuse.org/doc/api/prefuse/render/DefaultRendererFactory.html">DefaultRendererFactory</a> that uses an <a class="api" href="http://prefuse.org/doc/api/prefuse/renderer/EdgeRenderer.html">EdgeRenderer</a> (which draws straight-line edges by default) for any EdgeItems encountered and a <a class="api" href="http://prefuse.org/doc/api/prefuse/renderer/ShapeRenderer.html">ShapeRenderer</a> (which draws items as basic shapes such as squares and triangles) for all other items. Since we want to see text labels on the nodes, we instead create a new <a class="api" href="http://prefuse.org/doc/api/prefuse/render/LabelRenderer.html">LabelRenderer</a> and tell it to use the value of the &quot;name&quot; data field for the labels. We also tell the renderer to use rounded edges for the label shape, giving a smoother look. We then create a new DefaultRendererFactory that uses the new label renderer as the default renderer for all non-edge items (all EdgeItems will use the aforementioned default EdgeRenderer). DefaultRendererFactory has a lot more functionality that we are not currently using -- we could also set the default edge renderer and add any number of additional rules governing Renderer assignment (see the API documentation for more).</p> 
 <div class="codebox"> 
  <pre>// draw the &quot;name&quot; label for NodeItems
LabelRenderer r = new LabelRenderer(&quot;name&quot;);
r.setRoundedCorner(8, 8); // round the corners

// create a new default renderer factory
// return our name label renderer as the default for all non-EdgeItems
// includes straight line edges for EdgeItems by default
vis.setRendererFactory(new DefaultRendererFactory(r));</pre> 
 </div> 
 <h3>4. the processing actions</h3> 
 <p>We are now ready to set up the visual encodings. These are provided by creating <a class="api" href="http://prefuse.org/doc/api/prefuse/action/Action.html">Action</a> modules that process the VisualItems in the Visualization. We start by creating a set of ColorActions. Each VisualItem supports three color values by default: the stroke, fill, and text colors. The stroke color is the color for lines and outlines, the fill color is for the internal color of the item, and the text color is the color for any text strings or labels. The default value for all colors is pure transparency, and so by default nothing is drawn. In prefuse, each color value is encoded as single integer, representing RGBA (red-green-blue-alpha) values, each ranging from 0 to 255. Alpha represents transparency, with 0 being fully transparent and 255 being fully opaque. The <a class="api" href="http://prefuse.org/doc/api/prefuse/util/ColorLib.html">ColorLib</a> class provides a number of useful methods for creating color values.</p> 
 <p>To assign colors based on the gender of people in the social network, we first create a custom color palette. This is just an array of the allowed color values. In this case, we create an array with pink for females and baby blue for males. We then create a <a class="api" href="http://prefuse.org/doc/api/prefuse/action/assignment/DataColorAction.html">DataColorAction</a> that computes the color assignment. The DataColorAction constructor takes as arguments</p> 
 <ul> 
  <li>The name of the data group to process (in this case <code><font face="新宋体">graph.nodes</font></code>)</li> 
  <li>The name of the data field on which to base the encoding (in this case <code><font face="新宋体">gender</font></code>)</li> 
  <li>The data type of the field, one of <a class="api" href="http://prefuse.org/doc/api/prefuse/Constants.html#NOMINAL">NOMINAL</a> (for sets of category labels), <a class="api" href="http://prefuse.org/doc/api/prefuse/Constants.html#ORDINAL">ORDINAL</a> (for an ordered list), or <a class="api" href="http://prefuse.org/doc/api/prefuse/Constants.html#NUMERICAL">NUMERICAL</a> (for numbers)</li> 
  <li>The color field to set, typically one of the <a class="api" href="http://prefuse.org/doc/api/prefuse/visual/VisualItem.html#STROKECOLOR">stroke</a>, <a class="api" href="http://prefuse.org/doc/api/prefuse/visual/VisualItem.html#FILLCOLOR">fill</a>, or <a class="api" href="http://prefuse.org/doc/api/prefuse/visual/VisualItem.html#TEXTCOLOR">text</a> color fields.</li> 
  <li>An optional color palette (if no palette is supplied, a default one will be created).</li> 
 </ul> One note about the ordering: The DataColorAction will order the values of both NOMINAL and ORDINAL data by their natural sort-order, which for text strings is alphabetical order. This is why the pink color comes first in the color palette, because the 'F' for female precedes the 'M' for male in the sort order. 
 <p>Similarly, we assign the colors for the node text to black and the stroke color for edges to a light gray using the <a class="api" href="http://prefuse.org/doc/api/prefuse/action/ColorAction.html">ColorAction</a> component. ColorActions can be used to set a default color value for all items, but also can support any number of additional rules for more complicated color assignment.</p> 
 <p>Finally, we create an <a class="api" href="http://prefuse.org/doc/api/prefuse/action/ActionList.html">ActionList</a> instance that groups all the color assignment actions into a single executable unit.</p> 
 <div class="codebox"> 
  <pre>// create our nominal color palette
// pink for females, baby blue for males
int[] palette = new int[] {
    ColorLib.rgb(255,180,180), ColorLib.rgb(190,190,255)
};
// map nominal data values to colors using our provided palette
DataColorAction fill = new DataColorAction(&quot;graph.nodes&quot;, &quot;gender&quot;,
    Constants.NOMINAL, VisualItem.FILLCOLOR, palette);
// use black for node text
ColorAction text = new ColorAction(&quot;graph.nodes&quot;,
    VisualItem.TEXTCOLOR, ColorLib.gray(0));
// use light grey for edges
ColorAction edges = new ColorAction(&quot;graph.edges&quot;,
    VisualItem.STROKECOLOR, ColorLib.gray(200));
 
// create an action list containing all color assignments
ActionList color = new ActionList();
color.add(fill);
color.add(text);
color.add(edges);</pre> 
 </div> 
 <p>Next, we create a separate ActionList providing an animated layout. All Action instances can either be parameterized to run once (the default), or to run repeatedly within a given time duration. By providing the parameter <a class="api" href="http://prefuse.org/doc/api/prefuse/activity/Activity.html#INFINITY">INFINITY</a> as the duration value, we are telling the ActionList to run indefinitely, causing a continuous update of the layout. We then add a <a class="api" href="http://prefuse.org/doc/api/prefuse/action/layout/graph/ForceDirectedLayout.html">ForceDirectedLayout</a> to assign the spatial positions of the elements of the graph. We also add a <a class="api" href="http://prefuse.org/doc/api/prefuse/action/RepaintAction.html">RepaintAction</a> to signal that any Displays should be repainted after the layout has been recomputed.</p> 
 <div class="codebox"> 
  <pre>// create an action list with an animated layout
// the INFINITY parameter tells the action list to run indefinitely
ActionList layout = new ActionList(Activity.INFINITY);
layout.add(new ForceDirectedLayout(&quot;graph&quot;));
layout.add(new RepaintAction());</pre> 
 </div> 
 <p>We now add our two ActionLists with the Visualization. This causes the Actions to be properly registered with the Visualization such that they will have access to the Visualization when later invoked. Each registered Action is also given a unique name for reference.</p> 
 <div class="codebox"> 
  <pre>// add the actions to the visualization
vis.putAction(&quot;color&quot;, color);
vis.putAction(&quot;layout&quot;, layout);</pre> 
 </div> 
 <h3>5. the display and interactive controls</h3> 
 <p>We still need to create a <a class="api" href="http://prefuse.org/doc/api/prefuse/Display.html">Display</a> for the visualized data. Here we create a new Display instance configured to pull all VisualItems from the Visualization (you can also optionally supply a <a class="api" href="http://prefuse.org/doc/api/prefuse/data/ /Predicate.html">Predicate</a> controlling which items the Display will consider). We also set the desired size, in pixels, of the Display. We then add three interactive controls to the Display:</p> 
 <ul> 
  <li>A <a class="api" href="http://prefuse.org/doc/api/prefuse/controls/DragControl.html">DragControl</a> for dragging VisualItems around with a left-click mouse drag</li> 
  <li>A <a class="api" href="http://prefuse.org/doc/api/prefuse/controls/PanControl.html">PanControl</a> for moving the Display region with a left-click mouse drag on the Display background</li> 
  <li>A <a class="api" href="http://prefuse.org/doc/api/prefuse/controls/ZoomControl.html">ZoomControl</a> for zooming the display in or out with a vertical right-click mouse drag</li> 
 </ul> We use the default settings of the Controls. The mouse button used to trigger the control and other settings can be changed by using alternative constructors. 
 <div class="codebox"> 
  <pre>// create a new Display that pull from our Visualization
Display display = new Display(vis);
display.setSize(720, 500); // set display size
display.addControlListener(new DragControl()); // drag items around
display.addControlListener(new PanControl());  // pan with background left-drag
display.addControlListener(new ZoomControl()); // zoom with vertical right-drag</pre> 
 </div> 
 <h3>6. launching the visualization</h3> 
 <p>We're almost done! All that's left to do is to add the Display to a new application window and set things running. We create a new <a class="api" href="http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/JFrame.html">JFrame</a> instance (the top-level window class in the Java Swing user interface toolkit), set it's title, and make sure the application exits when the window is closed. We then add our Display, &quot;pack&quot; the window (making sure the components--in this case just our Display--are laid out properly), and make the window visible. Lastly, we run the color assignment action list, making sure each item has the proper colors assigned, and then set the continuously-running layout list running.</p> 
 <div class="codebox"> 
  <pre>// create a new window to hold the visualization
JFrame frame = new JFrame(&quot;prefuse example&quot;);
// ensure application exits when window is closed
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.add(display);
frame.pack();           // layout components in window
frame.setVisible(true); // show the window

vis.run(&quot;color&quot;);  // assign the colors
vis.run(&quot;layout&quot;); // start up the animated layout</pre> 
 </div> 
 <h3>wrap-up</h3> 
 <p>You can download this example in it's entirety as the file <a href="http://prefuse.org/doc/manual/introduction/example/Example.java">Example.java</a>. After you get the example running, try replacing some of the components. For example, you could change the layout ActionList to only run once by removing the INFINITY parameter and then try any of the <a class="api" href="http://prefuse.org/doc/api/prefuse/action/layout/graph/package-summary.html">other graph layouts</a> included with the toolkit.</p> 
 <p>In addition, there are plenty of other example applications included in the <code><font face="新宋体">demos</font></code> folder of the prefuse toolkit distribution. If you are comfortable with the example presented above, you are ready to start exploring the included demos.<br /> ========================<br /> package prefuse.example;</p> 
 <p>import javax.swing.JFrame;</p> 
 <p>import prefuse.Constants;<br /> import prefuse.Display;<br /> import prefuse.Visualization;<br /> import prefuse.action.ActionList;<br /> import prefuse.action.RepaintAction;<br /> import prefuse.action.assignment.ColorAction;<br /> import prefuse.action.assignment.DataColorAction;<br /> import prefuse.action.layout.graph.ForceDirectedLayout;<br /> import prefuse.activity.Activity;<br /> import prefuse.controls.DragControl;<br /> import prefuse.controls.PanControl;<br /> import prefuse.controls.ZoomControl;<br /> import prefuse.data.Graph;<br /> import prefuse.data.io.DataIOException;<br /> import prefuse.data.io.GraphMLReader;<br /> import prefuse.render.DefaultRendererFactory;<br /> import prefuse.render.LabelRenderer;<br /> import prefuse.util.ColorLib;<br /> import prefuse.visual.VisualItem;</p> 
 <p>public class Example {</p> 
 <p>&nbsp;&nbsp;&nbsp; public static void main(String[] argv) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 1. load the data ------------------------------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // load the socialnet.xml file. it is assumed that the file can be<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // found at the root of the java classpath<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Graph graph = null;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; graph = new GraphMLReader().readGraph(&quot;/socialnet.xml&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch ( DataIOException e ) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println(&quot;Error loading graph. Exiting...&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.exit(1);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 2. the visualization --------------------------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // add the graph to the visualization as the data group &quot;graph&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // nodes and edges are accessible as &quot;graph.nodes&quot; and &quot;graph.edges&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Visualization vis = new Visualization();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.add(&quot;graph&quot;, graph);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.setInteractive(&quot;graph.edges&quot;, null, false);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 3. the renderers and renderer factory ---------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // draw the &quot;name&quot; label for NodeItems<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LabelRenderer r = new LabelRenderer(&quot;name&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; r.setRoundedCorner(8, 8); // round the corners<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create a new default renderer factory<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // return our name label renderer as the default for all non-EdgeItems<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // includes straight line edges for EdgeItems by default<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.setRendererFactory(new DefaultRendererFactory(r));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 4. the processing actions ---------------------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create our nominal color palette<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // pink for females, baby blue for males<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int[] palette = new int[] {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ColorLib.rgb(255,180,180), ColorLib.rgb(190,190,255)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // map nominal data values to colors using our provided palette<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataColorAction fill = new DataColorAction(&quot;graph.nodes&quot;, &quot;gender&quot;,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Constants.NOMINAL, VisualItem.FILLCOLOR, palette);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // use black for node text<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ColorAction text = new ColorAction(&quot;graph.nodes&quot;,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VisualItem.TEXTCOLOR, ColorLib.gray(0));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // use light grey for edges<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ColorAction edges = new ColorAction(&quot;graph.edges&quot;,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VisualItem.STROKECOLOR, ColorLib.gray(200));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create an action list containing all color assignments<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ActionList color = new ActionList();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color.add(fill);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color.add(text);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color.add(edges);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create an action list with an animated layout<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ActionList layout = new ActionList(Activity.INFINITY);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; layout.add(new ForceDirectedLayout(&quot;graph&quot;));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; layout.add(new RepaintAction());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // add the actions to the visualization<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.putAction(&quot;color&quot;, color);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.putAction(&quot;layout&quot;, layout);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 5. the display and interactive controls -------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Display d = new Display(vis);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d.setSize(720, 500); // set display size<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // drag individual items around<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d.addControlListener(new DragControl());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // pan with left-click drag on background<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d.addControlListener(new PanControl()); <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // zoom with right-click drag<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d.addControlListener(new ZoomControl());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- 6. launch the visualization -------------------------------------<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create a new window to hold the visualization<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JFrame frame = new JFrame(&quot;prefuse example&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // ensure application exits when window is closed<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frame.add(d);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frame.pack();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // layout components in window<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frame.setVisible(true); // show the window<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // assign the colors<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.run(&quot;color&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // start up the animated layout<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis.run(&quot;layout&quot;);<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; <br /> }</p> 
</div></div></body></html>