<html><head><title>Log4J使用完全手册 -grule -logcode</title></head><body><div id='tit'>Log4J使用完全手册 -grule -logcode</div><div id='cate'>j&middot;通用</div><div id='date'>2008年09月04日 星期四 00:46 A.M.</div><div id='page'>103</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/901fcfea1f57b1d5d439c92e.html'>http://hi.baidu.com/hxzon/blog/item/901fcfea1f57b1d5d439c92e.html</a><div id='cnt'>Log4J使用完全手册 -grule -logcode
<br /> &nbsp;&nbsp;
<br /> Log4J是Apache的一个开放源代码项目(
<a href="http://logging.apache.org/log4j/docs/"><font color="#73af1d">http://logging.apache.org/log4j/docs/</font></a>)，它是一个日志操作包。
<br /> 通过使用Log4J,可以指定日志信息输出的目的地，控制每一条日志的输出格式，定义日志信息的级别。所
<br /> 有这些功能通过一个配置文件灵活进行配置。 
<p>一、LOG4J组成</p> 
<p>&nbsp;&nbsp;&nbsp; LOG4J主要由三大组件组成：<br /> &nbsp;&nbsp;&nbsp; . Logger: 决定什么日志信息应该被输出、什么日志信息应该被忽略；<br /> &nbsp;&nbsp;&nbsp; . Appender: 指定日志信息应该输出到什么地方, 这些地方可以是控制台、文件、网络设备；<br /> &nbsp;&nbsp;&nbsp; . Layout: 指定日志信息的输出格式；</p> 
<p>&nbsp;&nbsp;&nbsp; 一个Logger可以有多个Appender，也就是说日志信息可以同时输出到多个设备上，每个Appender对应<br /> &nbsp;&nbsp;&nbsp; 一种Layout(示例见下图)。</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ↗ Appender1 → Layout<br /> &nbsp;&nbsp;&nbsp;&nbsp; ／&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; Logger<br /> &nbsp;&nbsp;&nbsp;&nbsp; ﹨ <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ↘ Appender2 → Layout</p> 
<p><br /> 二、Logger组件</p> 
<p>&nbsp;&nbsp;&nbsp; 1. Logger组件提供的方法：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger组件是LOG4J的核心组件，它代表了Log4J的日志记录器，它能够对日志信息进行分类筛选。它<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 由org.apache.log4j.Logger类实现，提供了如下方法：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; package org.apache.log4j;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public class Logger {</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Creation &amp; retrieval methods:<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static Logger getRootLogger();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static Logger getLogger(String name);</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // printing methods:<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void debug(Object message);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void info(Object message);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void warn(Object message);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void error(Object message);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void fatal(Object message);<br /> &nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // generic printing method:<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void log(Priority p, Object message);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp; 2. 在配置文件中配置Logger组件</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可在Log4J配置文件中配置自己的Logger组件，示例：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.logger.myLogger=WARN</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以上代码定义了一个Logger组件，名称为myLogger，日志级别为WARN。<br /> <br /> &nbsp;&nbsp;&nbsp; 3. 日志级别种类：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一共有五种，级别由高到低依次是：fatal、error、warn、info、debug。获得Logger实例后，我们可<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 调用以下方法之一输出日志信息：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void debug(Object message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //输出debug级别的日志信息；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void info(Object message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //输出info级别的日志信息；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void warn(Object message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //输出warn级别的日志信息；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void error(Object message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //输出error级别的日志信息；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void fatal(Object message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //输出fatal级别的日志信息；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void log(Priority p, Object message);//输出参数Priority指定级别的日志信息；</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以上方法只有当它的级别大于或等于Logger组件配置的日志级别时才调用。以前面我们配置的myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为例，它的日志级别为WARN, 那么在程序中，它的warn()、error()、fatal()方法会被执行。对于log()<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 方法，只有当它的参数Priority指定的日志级别大于或等于WARN时，它才会被执行。</p> 
<p>&nbsp;&nbsp;&nbsp; 4. 为什么需要对日志进行分级？<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在写程序的时候，为了调试程序，我们会在很多出错的地方输出大量的日志信息。当程序调试完，不需要<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这些信息时，将程序中这些输出日志信息代码删除吗？这样费时费力，对于大型程序几乎不可行。通过对<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 日志分级，假如不想输出WARN级别的日志信息，则Logger组件的级别调高即可，省时省心。</p> 
<p>&nbsp;&nbsp;&nbsp; 5. Logger组件的继承性</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log4J提供了一个root Logger，它是所有Logger组件的“祖先”,它永远存在，且不能通过名字检索或引<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 用，通过Logger.getRootLogger()方法取得它。配置root Logger代码：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.rootLogger=INFO,console</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可在配置文件中方便地配置存在继承关系的Logger组件，凡是在符号“.”后面的组件都会成为在符号“.”<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 前面的Logger组件的子类。例如：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.apache.myLogger=WARN<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.apache.myLogger.mySonLogger=,file</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以上代码中, mySonLogger是myLogger的子类Logger组件。Logger组件的继承关系：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 如果子类Logger组件没有定义日志级别，则将继承父类的日志级别;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 如果子类Logger组件定义了日志级别，就不会继承父类的日志级别;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 黙认情况下，子类Logger组件会继承父类所有的Appender，把它们加入到自己的Appener;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 如果把子类Logger组件的additivity标志设为false，那么它就不会继承父类Appender。additivity标志<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 默认值为false；</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以上配置的三个Logger继承关系示例如图：<br /> &nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root Logger: 日志级别=INFO appender清单=console<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ↑<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger: 日志级别=WARN appender清单=null<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ↑<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger: 日志级别=null appender清单=file</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这三个Logger组件实际日志级别和Appender如下表：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger组件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 日志级别&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Appender清单<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root Logger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INFO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console(继承)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN(继承)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file，console(继承)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> 三、Appender组件</p> 
<p>&nbsp;&nbsp;&nbsp; Appender组件决定将日志信息输出到什么地方。支持以下目的地：<br /> &nbsp;&nbsp;&nbsp; . 控制台(Console);<br /> &nbsp;&nbsp;&nbsp; . 文件(File);<br /> &nbsp;&nbsp;&nbsp; . GUI组件(GUI component);<br /> &nbsp;&nbsp;&nbsp; . 套接口服务器(Remote socket server);<br /> &nbsp;&nbsp;&nbsp; . NT的事件记录器(NT Event Logger);<br /> &nbsp;&nbsp;&nbsp; . UNIX Syslog守护进程(Remote UNIX Syslog daemon);</p> 
<p>&nbsp;&nbsp;&nbsp; 一个Logger可同时对应多个Appender，示例：myLogger配置二个Appender: 一个file, 一个是console：</p> 
<p>&nbsp;&nbsp;&nbsp; log4j.logger.myAppender=WARN,file,console</p> 
<p>&nbsp;&nbsp;&nbsp; log4j.appender.file=org.apache.log4j.RollingFileAppender<br /> &nbsp;&nbsp;&nbsp; log4j.appender.file.File=log.txt</p> 
<p>&nbsp;&nbsp;&nbsp; log4j.apender.console=org.apache.log4j.ConsoleAppender</p> 
<p>四、Layout组件</p> 
<p>&nbsp;&nbsp;&nbsp; Layout组件决定日志输出格式，有以下几种类型：<br /> &nbsp;&nbsp;&nbsp; . org.apache.log4j.HTMLLayout(以HTML表格形式布局);<br /> &nbsp;&nbsp;&nbsp; . org.apache.log4j.PatternLayout(可以灵活地指定布局模式);<br /> &nbsp;&nbsp;&nbsp; . org.apache.log4j.SimpleLayout(包含日志信息的级别和信息字符串);<br /> &nbsp;&nbsp;&nbsp; . org.apache.log4j.TTCCLayout(包含日志产生的时间、线程和类别等信息);<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; 为名称为console的Appender配置SimpleLayout，代码如下：</p> 
<p>&nbsp;&nbsp;&nbsp; log4j.appender.console.layout=org.apache.log4j.SimpleLayout</p> 
<p>&nbsp;&nbsp;&nbsp; 输出日志格式如下：</p> 
<p>&nbsp;&nbsp;&nbsp; WARN - This is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; 为名称为file的Appender配置PatternLayout，代码如下：</p> 
<p>&nbsp;&nbsp;&nbsp; log4j.appender.file.layout=org.apache.log4j.PatternLayout<br /> &nbsp;&nbsp;&nbsp; log4j.appender.file.layout.ConversionPattern=%t %p - %m%n</p> 
<p>&nbsp;&nbsp;&nbsp; 输出日志格式如下：</p> 
<p>&nbsp;&nbsp;&nbsp; THREAD-1 WARN - This is a log message from the myLogger</p> 
<p>&nbsp;&nbsp;&nbsp; PatternLayout让开发者依照ConversionPattern定义输出格式。ConversionPattern中一些指定日志<br /> &nbsp;&nbsp;&nbsp; 内容和格式的预定义符号说明如下：</p> 
<p>&nbsp;&nbsp;&nbsp; 符号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 描述<br /> &nbsp;&nbsp;&nbsp; %r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 自程序开始后消耗的毫秒数<br /> &nbsp;&nbsp;&nbsp; %t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 表示日志记录请求生成的线程<br /> &nbsp;&nbsp;&nbsp; %p&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 表示日专语句的优先级<br /> &nbsp;&nbsp;&nbsp; %r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 与日志请求相关的类别名称<br /> &nbsp;&nbsp;&nbsp; %c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 日志信息所在的类名<br /> &nbsp;&nbsp;&nbsp; %m%n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 表示日志信息的内容</p> 
<p>五、Log4J的基本用法</p> 
<p>&nbsp;&nbsp;&nbsp; 1. 定义配置文件<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log4J支持二种配置文件格式：XML和Java属性文件(采用“键=值”形式)。以下为Java属性文件<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 格式配置文件：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 配置Logger组件<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 配置root Logger语法为：log4j.rootLogger=[priority],appenderName,appenderName,...<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 配置自定义Logger组件语法为：log4j.logger.loggerName=[priority],appenderName,appenderName,...</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其中：priority为日志级别，可选值包括FATAL、ERROR、WARN、INFO、DEBUG、ALL；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; appenderName指定Appender组件，可指定多个;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 配置Appender组件</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 配置日志信息输出目的地Appender, 语法为：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName=fully.ualified.name.of.appender.class<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName.option1=value1<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName.optionN=valueN</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log4J提供的Appender有以下几种：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. org.apache.log4j.ConsoleAppender(控制台);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. org.apache.log4j.FileAppender(文件);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c. org.apache.log4j.DailyRollingFileAppender(每天产生一个日志文件);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d. org.apache.log4j.RollingFileAppender(文件大小到指定尺寸产生一个新的文件);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e. org.apache.log4j.WriteAppender(将日志信息以流格式发送到任意指定地方);</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 配置Layout组件</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 配置Layout组件语法为：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName.layout=fully.ualified.name.of.appender.class<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName.layout.option1=value1<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.appenderName.layout.optionN=valueN</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面为一配置文件示例，文件名为log4j.properties：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ## LOGGERS ##</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #configure root logger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.rootLogger=INFO,console<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #define a logger named myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.logger.myLogger=WARN<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #define a second logger that is a child to myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.logger.myLogger.mySonLogger=,file</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ## APPENDERS ##</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #define an appender named console, which is set to be a ConsoleAppender<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.console=org.apache.log4j.ConsoleAppender</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # define an appender named file, which is set to be a RollingFileAppender<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.file=org.apache.log4j.FileAppender<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.file.File=log.txt</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ## LAYOUTS ##<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # assian a SimpleLayout to console appender<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.console.layout=org.apache.log4j.SimpleLayout</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # assian a PatternLayout to file appender<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.file.layout=org.apache.log4j.PatternLayout<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log4j.appender.file.layout.ConversionPattern=%t%p-%m%n<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; 2. 程序中使用Log4j</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 获得日志记录器：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获得rootLogger：Logger rootLogger=Logger.getRootLogger();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获得自定义Logger：Logger myLogger = Logger.getLogger(&quot;log4j.logger.myLogger&quot;);</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 读取日志记录器，配置Log4J环境;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. BasicConfigurator.configure(): 自动快速地使用默认Log4J环境;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. Property.configurator.configure(String configFilename): 读取使用Java属性格式的配置文件并配置Log4J环境；<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c. DOMConfigurator.configure(String filename): 读取XML形式的配置文件并配置LOG4J环境;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . 输出日志信息;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在程序代码中需要生成日志的地方，调用Logger的各种输出日志方法输出不同级别的日志，例如：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.debug(&quot;Thie is a log message from the &quot; + myLogger.getName());</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面为一使用Log4J的程序，程序名为Test.java：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import org.apache.log4j.Logger;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import org.apache.log4j.PropertyConfigurator;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public class Test {</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Get an instance of the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger myLogger = Logger.getLogger(&quot;myLogger&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Get an instance of the childLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger mySonLogger = Logger.getLogger(&quot;myLogger.mySonLogger&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Load the proerties using the PropertyConfigurator<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyConfigurator.configure(&quot;log4j.properties&quot;);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Log Messages using the Parent Logger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.debug(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.info(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.warn(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.error(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.fatal(&quot;Thie is a log message from the &quot; + myLogger.getName());</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.debug(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.info(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.warn(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.error(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.fatal(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 程序运行结果为:</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 另在Test.class所在的目录下看到一个log.txt文件，内容如下：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如将配置文件log4j.properties中语句</p> 
<p>log4j.logger.myLogger.mySonLogger=,file</p> 
<p>改为</p> 
<p>log4j.logger.myLogger.mySonLogger=,file,console</p> 
<p>再次运行程序，结果如下：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger的日志在控制台上输出了二次，这是因为mySonLogger继承了父类console Appender，<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本身又定义了一个console Appender, 因而有二个console Appender。</p> 
<p>六、在web应用中使用Log4J</p> 
<p>&nbsp;&nbsp;&nbsp; 创建一个Servlet，在它初始化方法中读取Log4J配置文件并配置Log4J环境，这个Servlet在Web应用启<br /> &nbsp;&nbsp;&nbsp; 动时候被加载和初始化，然后就可在其它Web组件中获取Logger对象并输出日志。</p> 
<p>&nbsp;&nbsp;&nbsp; 1. 创建用于配置Log4J环境的Servlet</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import javax.servlet.*;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import javax.servlet.http.*;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import java.io.*;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import java.util.*;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; import org.apache.log4j.PropertyConfigurator;</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public class Log4JServlet extends HttpServlet {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void init() throws ServletException {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String path = getServletContext().getRealPath(&quot;/&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //getInitParameter(&quot;propfile&quot;)方法从web.xml文件中读取Log4J配置文件的名字&quot;profile&quot;。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String propfile = path + getInitParameter(&quot;propfile&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyConfigurator.configure(propfile);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 该Servlet在web.xml中的配置如下：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;log4jServlet&lt;/servlet-name&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-class&gt;Log4JServlet&lt;/servlet-class&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;propfile&lt;/param-name&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;/WEB-INF/log4j.properties&lt;/param-value&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/servlet&gt;</p> 
<p>&nbsp;&nbsp;&nbsp; 2. 在login.jsp中输出日志<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;<a href="mailto:%@page"><font color="#73af1d">%@page</font></a> import=&quot;org.apache.log4j.Logger&quot;%&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;html&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;head&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;login&lt;/title&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/head&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;body&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;%<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger myLogger = Logger.getLogger(&quot;myLogger&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger mySonLogger = Logger.getLogger(&quot;myLogger.mySonLogger&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.debug(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.info(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.warn(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.error(&quot;Thie is a log message from the &quot; + myLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myLogger.fatal(&quot;Thie is a log message from the &quot; + myLogger.getName());</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.debug(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.info(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.warn(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.error(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySonLogger.fatal(&quot;Thie is a log message from the &quot; + mySonLogger.getName());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; %&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;form name=&quot;loginForm&quot; method=&quot;post&quot; action=&quot;dispatcher&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; username: &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; password: &lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;submit&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/form&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/body&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/html&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; 3. 发布运行使用Log4J的web应用<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1) 将Log4J的JAR文件拷贝至目录：&lt;WEB应用所在目录&gt;/WEB-INF/lib<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2) 创建Log4J的配置文件log4j.properties, 存放目录为：&lt;WEB应用所在目录&gt;/WEB-INF。内容同前面配置文件示例。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3) 编译Log4JServlet, 存放至目录： &lt;WEB应用所在目录&gt;/WEB-INF/classes<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4) 修改web.xml文件，加入以下内容：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;log4jServlet&lt;/servlet-name&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-class&gt;Log4JServlet&lt;/servlet-class&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;profile&lt;/param-name&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;/WEB-INF/log4j.properties&lt;/param-value&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/servlet&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5) 启动服务器，访问login.jsp页面，在服务器控制台上看到如下日志：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 另在&lt;WEB应用所在目录&gt;/WEB-INF目录下看到一个log.txt文件，内容如下：</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WARN - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ERROR - Thie is a log message from the myLogger.mySonLogger<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FATAL - Thie is a log message from the myLogger.mySonLogger <br /> <a href="http://blog.donews.com/dyh/archive/2005/05/11/374589.aspx">http://blog.donews.com/dyh/archive/2005/05/11/374589.aspx</a> 本文<br /> <a href="http://www.cjsdn.net/post/view?bid=51&amp;id=125515&amp;sty=1">http://www.cjsdn.net/post/view?bid=51&amp;id=125515&amp;sty=1</a> log4j使用大全</p></div></body></html>