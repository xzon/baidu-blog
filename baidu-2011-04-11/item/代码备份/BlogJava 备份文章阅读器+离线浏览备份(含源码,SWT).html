<html><head><title>BlogJava 备份文章阅读器+离线浏览备份(含源码,SWT)</title></head><body><div id='tit'>BlogJava 备份文章阅读器+离线浏览备份(含源码,SWT)</div><div id='cate'>代码备份</div><div id='date'>2008年04月07日 星期一 03:49 P.M.</div><div id='page'>141</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/206eb1457bed7d22cffca390.html'>http://hi.baidu.com/hxzon/blog/item/206eb1457bed7d22cffca390.html</a><div id='cnt'><h3 align="center"><font face="Arial">BlogJava </font>备份文章阅读器+离线浏览备份(含源码,SWT)</h3> 
<p><font color="#00ff00">作者</font><font face="Arial" color="#00ff00">: BeanSoft(beansoft@126.com)<br /> </font><font color="#00ff00">日期</font><font face="Arial" color="#00ff00">: 2007.03<br /> 最后更新: 2007.06.20 </font><font face="Arial" color="#00ff00"><br /> Blog </font><font color="#00ff00">地址</font><font face="Arial" color="#00ff00">: <a href="http://www.blogjava.net/beansoft/"><u><font color="#800080"><strong>http://www.blogjava.net/beansoft/</strong></font></u></a> <br /> </font><font color="#00ff00">版权所有 刘长炯<br /> 转载和修改请保留出处以及此版权信息</font><font face="Arial" color="#00ff00">.<br /> </font><font color="#00ff00">如果你觉得这个程序有用</font><font face="Arial" color="#00ff00">, </font><font color="#00ff00">何不<a href="http://www.blogjava.net/beansoft/"><u><font color="#800080"><strong>留言</strong></font></u></a>支持一下</font><font face="Arial" color="#00ff00">?</font></p> 
<ul> 
 <li><strong>前言</strong></li> 
</ul> 
<p>在 BlogJava 的每一天, 我都无时无刻不在担心如何有效的备份我的所有文章以及离线浏览文章(包括文字和里面的图片)的问题, 甚至担心万一哪天 BlogJava 当机了而我要看自己写过的文章的时候却无处寻找的苦恼. 所幸站长 dudu 提供了一个备份文件(XML格式)下载, 在加上本人练习 Code Manager .SWT 的过程中对 MHT (mshtml 文件, 一种 IE 可以识别的包含网页正文和所有附件的文件格式, 本质上是一份 Mail, 可以通过 JavaMail 方便的生成, 当然需要事先解析 HTML 然后提取里面的资源文件, 有兴趣的可以阅读源码, 这个版本提供了一个方便的基于事件处理模型的 MHT 生成器)文件格式的透彻理解, 终于出台了方便阅读自己所有文章和备份为离线浏览格式的 BlogJava 备份文章阅读器. 请阅读文末来了解如何生成离线浏览的文件.</p> 
<p><strong>2007-06-20 更新</strong></p> 
<p>加入备份所有文章为离线浏览(MHT)格式的功能.</p> 
<p><strong>2007-03-05 更新</strong>:</p> 
<p>1. 加入从 XML 中解析Blog主机地址的功能, 便于显示内嵌的相对于当前 Blog地址的图片以及 BlogJava 代码高亮引擎所使用的一些图片, 为最后的 HTML 加入 &quot;&lt;BASE HREF=http://www.Host/Application'/&gt;&quot; 这样的路径标签.</p> 
<p>2.加入后退,前进和停止按钮的功能代码(漏掉了, 实在不好意思).</p> 
<ul> 
 <li><strong>下载和安装</strong></li> 
</ul> 
<p><a href="http://www.blogjava.net/Files/beansoft/BlogJavaReader.zip"><u><font color="#0000ff"><strong>BlogJavaReader.zip</strong></font></u></a> 1362KB</p> 
<p> </p> 
<p> </p> 
<ul> 
 <li><strong><font color="#00ff00">下载和安装</font></strong></li> 
</ul> 
<p><font color="#00ff00">文件下载</font>后解压缩 ZIP 压缩包, 得到 .7Z 格式的压缩包, 解压缩到硬盘上的任意<strong>不带空格的</strong>目录(不要放在桌面直接解, <font color="#ff9900">千万注意不要放在有空格的路径里, 应该解压缩到C:\BlogJavaReader 这样的路径而不是 <strong>
   <s>
    C:\Blog Java Reader
   </s></strong></font>), 接着请<font color="#00ff00">执行一次(只需一次) </font><font face="Arial" color="#00ff00">&quot;</font><strong>解压缩.bat</strong>&quot; 解压缩 Java 程序文件. 因为使用了 Java 5.0 的 Pack200 压缩功能, 所以下载包才能小于 2 MB, 这样才能放在 blogjava.net 的附件里.<br /> 程序的执行需要 JRE 5.0 或者更高. Windows 版本的 JRE 5.0 下载: <a class="external" href="http://www.java.com/zh_CN/download/manual.jsp"><u><font color="#0000ff"><strong>http://www.java.com/zh_CN/download/manual.jsp</strong></font></u></a> 建议选择 Windows（脱机安装） (文件大小: 15.82 MB).</p> 
<ul> 
 <li><strong>使用说明</strong></li> 
</ul> 
<font face="Arial"> <p>1. 备份文章内容</p> <p>首先根据管理员 dudu 的提醒, 登录 <a href="http://www.blogjava.net/"><font color="#1a8bc8"><strong>www.blogjava.net</strong></font></a> &quot;管理&quot; 后, 在管理&gt;选项页面的左侧有&quot;数据备份&quot;:<br /> <strong>http://www.blogjava.net/$用户名/admin/BlogExport.aspx</strong><br /> 为了减少对网站性能的影响,请在18:00-8:00之间进行数据备份。 <br /> 如图所示:</p> <p> </p> <p><img alt="http://www.blogjava.net/images/blogjava_net/beansoft/20272/o_blogjava_backup.png" src="image/BlogJava 备份文章阅读器+离线浏.o_blogjava_backup.png" /><p class="origImg">http://www.blogjava.net/images/blogjava_net/beansoft/20272/o_blogjava_backup.png</p></p> <p>2. 运行阅读器</p> <p>备份后得到的是一份 XML 文件, 很遗憾的, 这份文件里虽然包含了几乎所有的信息(还有<strong>密码</strong>!!!, 虽然我看不懂 dudu 的密码字段存储的信息, 但是为了安全, 我还是删除了从第 91 行开始的 <strong>blog_Config</strong> 里的一些信息), 但是这些文章却无法在本机打开进行阅读, 用 IE 打开后只能看到 HTML 源码却无法正常显示. 好了, 这时候请您双击 &quot;<strong>运行阅读器.bat</strong>&quot;, 可以看到主界面如下, 默认自带的是我的 Blog 的全部文章列表:</p> <p><img alt="http://www.blogjava.net/images/blogjava_net/beansoft/17570/o_blogjava_reader.png" src="image/BlogJava 备份文章阅读器+离线浏.o_blogjava_reader.png" /><p class="origImg">http://www.blogjava.net/images/blogjava_net/beansoft/17570/o_blogjava_reader.png</p><br /> 3. 打开备份文件内容<br /> 然后选择菜单 &quot;文件(<u>F</u>) -&gt; 打开 XML(<u>O</u>)...&quot; 或者工具栏按钮&quot;打开 XML...&quot;后稍等片刻, 文件解析完毕后即可阅读文章内容和相关的评论了. &quot;在外部浏览器中打开&quot;功能可以用系统自带的浏览器来显示文章内容, 便于另存为单一档案文件等保存下来或者发给朋友.</p> <p>4. 根据标题搜索文章<br /> 点击搜索, 打开搜索面板, 然后在输入框输入标题中所包含的字符(不分大小写), 随着您的输入, 符合条件的文章将即时显示在搜索结果栏中, 点击文章即可阅读相关内容.</p> <p><img alt="http://www.blogjava.net/images/blogjava_net/beansoft/17570/o_blogjava_reader_search.png" src="image/BlogJava 备份文章阅读器+离线浏.o_blogjava_reader_search.png" /><p class="origImg">http://www.blogjava.net/images/blogjava_net/beansoft/17570/o_blogjava_reader_search.png</p></p> <p> </p> <p>操作过程:</p> <p><img alt="http://www.blogjava.net/images/blogjava_net/beansoft/20752/o_blogjava_reader.gif" src="image/BlogJava 备份文章阅读器+离线浏.o_blogjava_reader.gif" /><p class="origImg">http://www.blogjava.net/images/blogjava_net/beansoft/20752/o_blogjava_reader.gif</p></p> 
 <ul> 
  <li>程序说明</li> 
 </ul> <p>使用 SWT 3.3 和 JDM 1.0 开发, 开发工具 Eclipse 3.3 M5, 界面设计工具插件<font size="1"> </font><a href="http://cloudgarden.com/jigloo/index.html"><u><font color="#0000ff"><strong>Cloud Garden - Jigloo GUI Builder (SWT and Swing) for Eclipse</strong></font></u></a>.</p> <p>目录结构:</p> <p>classes&nbsp;&nbsp;&nbsp; 类文件<br /> css&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BlogJava 的 Blog CSS 文件, 您可以换成自己的<br /> lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 类库, swt.jar 和 jdom.jar<br /> src&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 源代码目录<br /> temp&nbsp;&nbsp;&nbsp; 临时目录, 放置解析后的HTML文章, 退出时清空</p> 
 <ul> 
  <li>感谢</li> 
 </ul> <p>感谢杨采的 FileOperate, 用来清空临时目录; 感谢优秀简练的 Jigloo GUI Builder 能够让我在非商业的目的下用它开发这个简单的阅读器; 感谢 JDOM 可以方便的解析 XML; 感谢 SWT 可以显示出来一个简单的界面.</p> 
 <ul> 
  <li>下一步计划?</li> 
 </ul> <p>暂时还没有, 这个工具只是根据个人的需要开发使用, 自己的这个需求得到了满足. 用 SWT 来做它只是为了练习 SWT, 用其它 GUI 框架都可以很快作出来, 因为我掌握了 MHT 文件生成和 XML 解析的核心算法, 呵呵. 有了它, 我可以方便的离线阅读自己曾经写过的文章, 这样要比一页一页的在浏览器中阅读方便多了. 现在不用再一个一个的通过 IE 浏览器费劲的保存为 MHT 来备份文章和里面的图片. 我想将来可以在 Code Manager .SWT 中增加导入 BlogJava 备份 XML 的功能(可选功能)来把文章中的图片, CSS 资源也一块备份为单一 Web 档案(MHT文件). 现在大家可以把自己的文章和这个工具一块打包发给用 Java 的朋友分享 Blog 内容.</p> <p><a href="http://www.blogjava.net/beansoft/archive/2007/06/20/125255.html">http://www.blogjava.net/beansoft/archive/2007/06/20/125255.html</a></p> </font>
<font face="Verdana">5. 备份所有文章为MHT格式(可以离线浏览看到图片等完整内容,仅限于 Windows 下的 Internet Explorer 浏览器) (2007.06新增功能) <br /> 注意这个过程可能需要较长时间, 中间软件界面可能会失去响应, 在完成之前请您耐心等待, 因为我们将会下载您网页里所有显示的图片(CSS背景除外), 不管它是来自 blogjava 还是来自 eclipse.org, netbeans.org. </font></div></body></html>