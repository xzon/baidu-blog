<html><head><title>java dom解析xml -javacode</title></head><body><div id='tit'>java dom解析xml -javacode</div><div id='cate'>代码备份</div><div id='date'>2008年05月03日 星期六 11:41 A.M.</div><div id='page'>134</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/aca3cf3dca1505c29e3d62ee.html'>http://hi.baidu.com/hxzon/blog/item/aca3cf3dca1505c29e3d62ee.html</a><div id='cnt'><p>java dom解析xml -javacode</p> 
<p>原文地址：<a href="http://blog.chinaunix.net/u1/42966/showart.php?id=353195">http://blog.chinaunix.net/u1/42966/showart.php?id=353195</a></p> 
<p>一、前言<br /> 用Java解析XML文档，最常用的有两种方法：使用基于事件的XML简单API （Simple API for XML）称为SAX和基于树和节点的文档对象模型（Document Object Module）称为DOM。Sun公司提供了Java API for XML Parsing（JAXP）接口来使用SAX和DOM，通过JAXP，我们可以使用任何与JAXP兼容的XML解析器。<br /> JAXP接口包含了三个包：<br /> （1）org.w3c.dom W3C推荐的用于XML标准规划文档对象模型的接口。<br /> （2）org.xml.sax 用于对XML进行语法分析的事件驱动的XML简单API（SAX）<br /> （3）javax.xml.parsers解析器工厂工具，程序员获得并配置特殊的特殊语法分析器。<br /> 二、使用DOM解析XML文档<br /> 我们现在来看看DOM是如何解析XML的吧！同样的，我将从一个简单的不能再简单的例子来说明DOM是如何解析XML文档的，先让我们看看XML是什么内容吧：</p> 
<p><br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt;<br /> &lt;books&gt;<br /> &lt;book email=&quot;<a href="mailto:123@990.net">123@990.net</a>&quot;&gt;<br /> &lt;name&gt;bookname&lt;/name&gt;<br /> &lt;price&gt;102&lt;/price&gt;<br /> &lt;/book&gt;<br /> &lt;/books&gt;</p> 
<p>解析这个XML文件的Java代码</p> 
<p><br /> import java.io.FileInputStream;<br /> import java.io.FileNotFoundException;<br /> import java.io.IOException;<br /> import java.io.InputStream;<br /> import javax.xml.parsers.DocumentBuilder;<br /> import javax.xml.parsers.DocumentBuilderFactory;<br /> import javax.xml.parsers.ParserConfigurationException;<br /> import org.w3c.dom.Document;<br /> import org.w3c.dom.Element;<br /> import org.w3c.dom.Node;<br /> import org.w3c.dom.NodeList;<br /> import org.xml.sax.SAXException;</p> 
<p>public class DomParse {<br /> &nbsp;&nbsp;&nbsp; public DomParse()...{</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DocumentBuilderFactory domfac=DocumentBuilderFactory.newInstance();</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DocumentBuilder dombuilder=domfac.newDocumentBuilder();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InputStream is=new FileInputStream(&quot;WebRoot/WEB-INF/hell.xml&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Document doc=dombuilder.parse(is);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Element root=doc.getDocumentElement();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NodeList books=root.getChildNodes();</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(books!=null)...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;books.getLength();i++)...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Node book=books.item(i);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(book.getNodeType()==Node.ELEMENT_NODE)...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String email=book.getAttributes().getNamedItem(&quot;email&quot;).getNodeValue();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(email);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(Node node=book.getFirstChild();node!=null;node=node.getNextSibling())...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(node.getNodeType()==Node.ELEMENT_NODE)...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(node.getNodeName().equals(&quot;name&quot;))...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String name=node.getNodeValue();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String name1=node.getFirstChild().getNodeValue();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(name);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(name1);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(node.getNodeName().equals(&quot;price&quot;))...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String price=node.getFirstChild().getNodeValue();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(price);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (ParserConfigurationException e) ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (FileNotFoundException e) ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (SAXException e) ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (IOException e) ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp; public static void main(String[] args) <br /> &nbsp;&nbsp;&nbsp; ...{<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DomParse();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <br /> }<br /> ...</p> 
<p>三、代码解释<br /> 先看看这个程序引用类：<br /> import java.io.FileInputStream;<br /> import java.io.FileNotFoundException;<br /> import java.io.IOException;<br /> import java.io.InputStream;<br /> import javax.xml.parsers.DocumentBuilder;<br /> import javax.xml.parsers.DocumentBuilderFactory;<br /> import javax.xml.parsers.ParserConfigurationException;<br /> //下面主要是org.xml.sax包的类<br /> import org.w3c.dom.Document;<br /> import org.w3c.dom.Element;<br /> import org.w3c.dom.Node;<br /> import org.w3c.dom.NodeList;<br /> import org.xml.sax.SAXException;<br /> 上面那么简单的代码一看就明白了，但是为了介绍个DOM编程的大概还是来看看这个程序吧：<br /> （1）得到DOM解析器的工厂实例<br /> DocumentBuilderFactory domfac=DocumentBuilderFactory.newInstance();<br /> 得到javax.xml.parsers.DocumentBuilderFactory;类的实例就是我们要的解析器工厂<br /> （2）从DOM工厂获得DOM解析器<br /> DocumentBuilder dombuilder=domfac.newDocumentBuilder();<br /> 通过javax.xml.parsers.DocumentBuilderFactory实例的静态方法newDocumentBuilder()得到DOM解析器<br /> （3）把要解析的XML文档转化为输入流，以便DOM解析器解析它<br /> InputStream is=new FileInputStream(&quot;bin/library.xml&quot;);<br /> InputStream是一个接口。<br /> （4）解析XML文档的输入流，得到一个Document<br /> Document doc=dombuilder.parse(is);<br /> 由XML文档的输入流得到一个org.w3c.dom.Document对象，以后的处理都是对Document对象进行的<br /> （5）得到XML文档的根节点<br /> Element root=doc.getDocumentElement();<br /> 在DOM中只有根节点是一个org.w3c.dom.Element对象。<br /> （6）得到节点的子节点<br /> NodeList books=root.getChildNodes();<br /> for(int i=0;i&lt;books.getLength();i++){<br /> Node book=books.item(i);}<br /> 这是用一个org.w3c.dom.NodeList接口来存放它所有子节点的，还有一种轮循子节点的方法，后面有介绍<br /> （7）取得节点的属性值<br /> String email=book.getAttributes().getNamedItem(&quot;email&quot;).getNodeValue();<br /> System.out.println(email);<br /> 注意，节点的属性也是它的子节点。它的节点类型也是Node.ELEMENT_NODE<br /> （8）轮循子节点<br /> for(Node node=book.getFirstChild();node!=null;node=node.getNextSibling()){<br /> if(node.getNodeType()==Node.ELEMENT_NODE){<br /> if(node.getNodeName().equals(&quot;name&quot;)){<br /> String name=node.getNodeValue();<br /> String name1=node.getFirstChild().getNodeValue();<br /> System.out.println(name);<br /> System.out.println(name1);<br /> }<br /> if(node.getNodeName().equals(&quot;price&quot;)){<br /> String price=node.getFirstChild().getNodeValue();<br /> System.out.println(price);<br /> }}<br /> 这段代码的打印输出为：<br /> <a href="mailto:123@990.net">123@990.net</a><br /> null<br /> bookname<br /> 102<br /> 从上面可以看出<br /> String name=node.getNodeValue(); 是一个空值。而<br /> String name1=node.getFirstChild().getNodeValue(); 才是真正的值，这是因为DOM把&lt;name&gt; rjzjh&lt;/name&gt;也当作是两层结构的节点，其父节点为&lt;name&gt;节点本身，且它只有一个子节点（如果有属性的话就不止一个了！），子节点是它的值“rjzjh”，所以我们看到上面的结果。<br /> 还有，子节点的节点类型也是Node.ELEMENT_NODE型的，node.getNextSibling()方法是取下一个相邻的节点。<br /> 四、DOM结点<br /> DOM是一些节点的集合，由于文档中可能包含有不同类型的信息，所以定义了几种不同类型的节点。DOM中最常见的节点类型有：<br /> （1）元素：<br /> 元素是XML的基本构件。元素的子节点可以是其它元素、文本节点或两者都有。元素节点还可以只含有属性这一唯一类型的节点。<br /> （2）属性：属性节点包含关于元素节点的信息，但它不是元素的子节点<br /> （3）文本：文本节点文本信息，或干脆是空白的文本。<br /> （4）文档：文档节点是整个文档中所有其它节点的父节点<br /> 元素是一种很重要的类型节点，元素节点可以是其他节点的容器。</p></div></body></html>