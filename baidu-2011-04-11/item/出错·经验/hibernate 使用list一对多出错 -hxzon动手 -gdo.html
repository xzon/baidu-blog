<html><head><title>hibernate 使用list一对多出错 -hxzon动手 -gdo</title></head><body><div id='tit'>hibernate 使用list一对多出错 -hxzon动手 -gdo</div><div id='cate'>出错&middot;经验</div><div id='date'>2009年03月16日 星期一 09:14 P.M.</div><div id='page'>61</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/3874b28f283abce6f11f3645.html'>http://hi.baidu.com/hxzon/blog/item/3874b28f283abce6f11f3645.html</a><div id='cnt'><p> </p> 
<p>hibernate 使用list一对多出错 -hxzon动手 -gdo</p> 
<p class="MsoNormal" style="text-indent: 17.8pt">hxzon：hibernate使用list，发现取出的元素总是多出来一些空值，查到如下资料，索引不连续会自己添加空值上去。</p> 
<p class="MsoNormal" style="text-indent: 17.8pt">&lt;list&gt;映射需要把一个索引列（index column）新增到集合表。索引列定义元素在集合中的位置。因而，Hibernate能够保存集合元素的顺序。映射集合为&lt;list&gt;：</p> 
<p class="MsoNormal" style="text-indent: 20pt">（XML DTD中也有index元素，用于与Hibernate 2.x兼容。建议使用这个新的list-index；它比较不容易引起混淆，并且作用相同。）</p> 
<p class="MsoNormal" style="text-indent: 20pt">集合表的主键是ITEM_ID和POSITION的复合。注意，现在允许重复元素（FILENAME）了，这与列表的语义一致，请见图6-3。</p> 
<p class="MsoNormal" style="text-indent: 20pt">持久化列表的索引从0开始。可以改变它，例如在映射中使用&lt;list-index base=&quot;1&quot;.../&gt;。注意，如果数据库中的索引数字不连续，Hibernate就会把空元素添加到Java列表中。</p> 
<p class="MsoNormal" style="text-indent: 20pt"><a href="http://book.csdn.net/bookfiles/670/10067021145.shtml">http://book.csdn.net/bookfiles/670/10067021145.shtml</a></p> 
<p class="MsoNormal" style="text-indent: 20pt">原本是以为list排序，set没有排序，事实上set也能排序，代码如下：</p> 
<p class="MsoNormal" style="text-indent: 20pt">&lt;set inverse=&quot;true&quot; lazy=&quot;false&quot; name=&quot;forums&quot;<br /> &nbsp;&nbsp; order-by=&quot;forumAt desc&quot; &gt;<br /> &nbsp;&nbsp; &lt;key&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;column length=&quot;32&quot; name=&quot;categoryId&quot; not-null=&quot;true&quot;/&gt;<br /> &nbsp;&nbsp; &lt;/key&gt;<br /> &nbsp;&nbsp; &lt;one-to-many class=&quot;com.hxzon.wswj.model.Forum&quot;/&gt;<br /> &lt;/set&gt;</p></div></body></html>