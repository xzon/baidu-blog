<html><head><title>Thumbnail.java Java生成缩略图 -javacode</title></head><body><div id='tit'>Thumbnail.java Java生成缩略图 -javacode</div><div id='cate'>复用代码</div><div id='date'>2009年05月22日 星期五 11:04 A.M.</div><div id='page'>50</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/3058b41144ba7776cb80c439.html'>http://hi.baidu.com/hxzon/blog/item/3058b41144ba7776cb80c439.html</a><div id='cnt'><div> 
 <p>Thumbnail.java Java生成缩略图 -javacode</p> 
 <p>package com.xxx.utils;</p> 
</div> 
<div> 
</div> 
<div>
 import java.awt.Image;
 <br /> import java.awt.image.BufferedImage;
 <br /> import java.io.File;
 <br /> import java.io.FileOutputStream;
 <br /> import java.io.IOException;
</div> 
<div> 
</div> 
<div>
 import com.sun.image.codec.jpeg.JPEGCodec;
 <br /> import com.sun.image.codec.jpeg.JPEGImageEncoder;
</div> 
<div> 
</div> 
<div>
 /** */
 <br /> /**
 <br /> * 
 <br /> * &lt;p&gt;
 <br /> * Title: Thumbnail
 <br /> * &lt;/p&gt;
 <br /> * 
 <br /> * &lt;p&gt;
 <br /> * Description: Picture Thumbnail
 <br /> * &lt;/p&gt;
 <br /> * 
 <br /> * &lt;p&gt;
 <br /> * Copyright: Copyright (c) 
 <a href="mailto:54powerman@163.com">54powerman@163.com</a> 2005
 <br /> * &lt;/p&gt;
 <br /> * 
 <br /> * &lt;p&gt;
 <br /> * Company: 
 <a href="http://blog.sina.com.cn/u1055000490">http://blog.sina.com.cn/u1055000490</a>
 <br /> * &lt;/p&gt;
 <br /> * 
 <br /> * @author 54powerman
 <br /> * @version 1.0
 <br /> */
 <br /> public class Thumbnail {
 <br /> private String srcFile;
 <br /> private String destFile;
 <br /> private int width;
 <br /> private int height;
 <br /> private Image img;
</div> 
<div> 
</div> 
<div>
 public static void main(String[] args) throws Exception {
 <br /> &nbsp;&nbsp; Thumbnail thum = new Thumbnail(&quot;images/image9.bmp&quot;);
 <br /> &nbsp;&nbsp; thum.resizeFix(100, 100);
 <br /> }
</div> 
<div> 
</div> 
<div>
 public Thumbnail(String fileName) throws IOException {
 <br /> &nbsp;&nbsp; File _file = new File(fileName); // 读入文件
 <br /> &nbsp;&nbsp; this.srcFile = _file.getName();
 <br /> &nbsp;&nbsp; this.destFile = this.srcFile
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; .substring(0, this.srcFile.lastIndexOf(&quot;.&quot;))
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;_s.jpg&quot;;
 <br /> &nbsp;&nbsp; img = javax.imageio.ImageIO.read(_file); // 构造Image对象
 <br /> &nbsp;&nbsp; width = img.getWidth(null); // 得到源图宽
 <br /> &nbsp;&nbsp; height = img.getHeight(null); // 得到源图长
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void resize(int w, int h) throws IOException {
 <br /> &nbsp;&nbsp; BufferedImage _image = new BufferedImage(w, h,
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; BufferedImage.TYPE_INT_RGB);
 <br /> &nbsp;&nbsp; _image.getGraphics().drawImage(img, 0, 0, w, h, null); // 绘制缩小后的图
 <br /> &nbsp;&nbsp; FileOutputStream out = new FileOutputStream(destFile); // 输出到文件流
 <br /> &nbsp;&nbsp; JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
 <br /> &nbsp;&nbsp; encoder.encode(_image); // 近JPEG编码
 <br /> &nbsp;&nbsp; out.close();
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void resize(double t) throws IOException {
 <br /> &nbsp;&nbsp; int w = (int) (width * t);
 <br /> &nbsp;&nbsp; int h = (int) (height * t);
 <br /> &nbsp;&nbsp; resize(w, h);
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void resizeByWidth(int w) throws IOException {
 <br /> &nbsp;&nbsp; int h = (int) (height * w / width);
 <br /> &nbsp;&nbsp; resize(w, h);
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void resizeByHeight(int h) throws IOException {
 <br /> &nbsp;&nbsp; int w = (int) (width * h / height);
 <br /> &nbsp;&nbsp; resize(w, h);
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void resizeFix(int w, int h) throws IOException {
 <br /> &nbsp;&nbsp; if (width / height &gt; w / h) {
 <br /> &nbsp;&nbsp;&nbsp; resizeByWidth(w);
 <br /> &nbsp;&nbsp; } else {
 <br /> &nbsp;&nbsp;&nbsp; resizeByHeight(h);
 <br /> &nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 public void setDestFile(String fileName) throws Exception {
 <br /> &nbsp;&nbsp; if (!fileName.endsWith(&quot; .jpg &quot;)) {
 <br /> &nbsp;&nbsp;&nbsp; throw new Exception(&quot; Dest File Must end with \&quot; .jpg\&quot; . &quot;);
 <br /> &nbsp;&nbsp; }
 <br /> &nbsp;&nbsp; destFile = fileName;
 <br /> }
</div> 
<div> 
</div> 
<div>
 public String getDestFile() {
 <br /> &nbsp;&nbsp; return destFile;
 <br /> }
</div> 
<div> 
</div> 
<div>
 public int getSrcWidth() {
 <br /> &nbsp;&nbsp; return width;
 <br /> }
</div> 
<div> 
</div> 
<div>
 public int getSrcHeight() {
 <br /> &nbsp;&nbsp; return height;
 <br /> }
 <br /> }
</div></div></body></html>