<html><head><title>换行问题，过滤脚本 -v512 -webproject2.SurveyServlet.java</title></head><body><div id='tit'>换行问题，过滤脚本 -v512 -webproject2.SurveyServlet.java</div><div id='cate'>复用代码</div><div id='date'>2008年07月25日 星期五 09:56 A.M.</div><div id='page'>112</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/9a7087cbc326affb53664fca.html'>http://hi.baidu.com/hxzon/blog/item/9a7087cbc326affb53664fca.html</a><div id='cnt'><p> </p> 
<p>换行问题，过滤脚本 -v512 -webproject2.SurveyServlet.java</p> 
<p>package webbook.chapter4;</p> 
<p>import java.io.IOException;<br /> import java.io.PrintWriter;</p> 
<p>import javax.servlet.ServletException;<br /> import javax.servlet.http.HttpServlet;<br /> import javax.servlet.http.HttpServletRequest;<br /> import javax.servlet.http.HttpServletResponse;</p> 
<p>/**<br /> * <br /> * @author Liuwei<br /> * @version 1.0<br /> * <br /> */<br /> public class SurveyServlet extends HttpServlet {</p> 
<p>private static final long serialVersionUID = -8179113771502345601L;</p> 
<p>public void doGet(HttpServletRequest request, HttpServletResponse response)<br /> &nbsp;&nbsp;&nbsp; throws ServletException, IOException {<br /> &nbsp;&nbsp; doPost(request, response);<br /> }</p> 
<p>public void doPost(HttpServletRequest request, HttpServletResponse response)<br /> &nbsp;&nbsp;&nbsp; throws ServletException, IOException {<br /> &nbsp;&nbsp; response.setContentType(&quot;text/html;charset=utf-8&quot;);<br /> &nbsp;&nbsp; PrintWriter out = response.getWriter();<br /> &nbsp;&nbsp; request.setCharacterEncoding(&quot;utf-8&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;html&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;head&gt;&lt;title&gt;display survey infomation&lt;/title&gt;&lt;/head&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;body&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;h2&gt;用户输入信息：&lt;/h2&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;用户名：&quot; + filter(request.getParameter(&quot;name&quot;))<br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;&lt;/strong&gt;&lt;br&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;email：&quot; + filter(request.getParameter(&quot;email&quot;))<br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;&lt;/strong&gt;&lt;br&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;年纪：&quot; + request.getParameter(&quot;age&quot;)<br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;&lt;/strong&gt;&lt;br&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;编程时间：&quot; + request.getParameter(&quot;codetime&quot;)<br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;&lt;/strong&gt;&lt;br&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;使用的操作系统：&lt;/strong&gt;&quot;);<br /> &nbsp;&nbsp; printValues(out, request.getParameterValues(&quot;os&quot;));<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;使用的编程语言：&lt;/strong&gt;&quot;);<br /> &nbsp;&nbsp; printValues(out, request.getParameterValues(&quot;language&quot;));<br /> &nbsp;&nbsp; out.println(&quot;&lt;strong&gt;建议：&quot; + filter(request.getParameter(&quot;comment&quot;))<br /> &nbsp;&nbsp;&nbsp;&nbsp; + &quot;&lt;/strong&gt;&lt;br&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;/body&gt;&quot;);<br /> &nbsp;&nbsp; out.println(&quot;&lt;/html&gt;&quot;);</p> 
<p>&nbsp;&nbsp; out.flush();<br /> &nbsp;&nbsp; out.close();<br /> }</p> 
<p>/**<br /> * 输出字符串数组中所有的元素<br /> */<br /> public void printValues(PrintWriter out, String[] values) {<br /> &nbsp;&nbsp; if (values == null || values.length == 0) {<br /> &nbsp;&nbsp;&nbsp; return;<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; out.println(&quot;&lt;ul&gt;&quot;);<br /> &nbsp;&nbsp; for (int i = 0; i &lt; values.length; i++) {<br /> &nbsp;&nbsp;&nbsp; out.println(&quot;&lt;li&gt;&quot; + values[i] + &quot;&lt;/li&gt;&quot;);<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; out.println(&quot;&lt;/ul&gt;&quot;);<br /> }</p> 
<p>/**<br /> * 过滤&lt;, &gt;,\n 字符的方法<br /> * <br /> * @param input<br /> *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 需要过滤的字符<br /> * @return 完成过滤以后的字符串<br /> */<br /> public String filter(String input) {<br /> &nbsp;&nbsp; if (input == null) {<br /> &nbsp;&nbsp;&nbsp; return null;<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; if (input.length() == 0) {<br /> &nbsp;&nbsp;&nbsp; return input;<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; input = input.replaceAll(&quot;&amp;&quot;, &quot;&amp;amp;&quot;);<br /> &nbsp;&nbsp; input = input.replaceAll(&quot;&lt;&quot;, &quot;&amp;lt;&quot;);<br /> &nbsp;&nbsp; input = input.replaceAll(&quot;&gt;&quot;, &quot;&amp;gt;&quot;);<br /> &nbsp;&nbsp; input = input.replaceAll(&quot; &quot;, &quot;&amp;nbsp;&quot;);<br /> &nbsp;&nbsp; input = input.replaceAll(&quot;'&quot;, &quot;&amp;#39;&quot;);<br /> &nbsp;&nbsp; input = input.replaceAll(&quot;\&quot;&quot;, &quot;&amp;quot;&quot;);<br /> &nbsp;&nbsp; return input.replaceAll(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);<br /> }<br /> }</p></div></body></html>