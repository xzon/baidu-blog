<html><head><title>Java屏幕截图 -javacode 弃</title></head><body><div id='tit'>Java屏幕截图 -javacode 弃</div><div id='cate'>存档&middot;垃圾</div><div id='date'>2009年09月05日 星期六 11:11 A.M.</div><div id='page'>32</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/3047ad643e8489f9f636541b.html'>http://hi.baidu.com/hxzon/blog/item/3047ad643e8489f9f636541b.html</a><div id='cnt'><p>Java屏幕截图 -javacode 弃</p> 
<p>package com.xxx.goodcode;<br /> <br /> import java.awt.Dimension;<br /> import java.awt.Rectangle;<br /> import java.awt.Robot;<br /> import java.awt.Toolkit;<br /> import java.awt.image.BufferedImage;<br /> import java.io.File;</p> 
<p>import javax.imageio.ImageIO;</p> 
<p>/*******************************************************************************<br /> * 该JavaBean可以直接在其他Java应用程序中调用，实现屏幕的&quot;拍照&quot; This JavaBean is used to snapshot the<br /> * GUI in a Java application! You can embeded it in to your java application<br /> * source code, and us it to snapshot the right GUI of the application<br /> * <br /> * @see javax.ImageIO<br /> * @author liluqun ([email]liluqun@263.net[/email])<br /> * @version 1.0<br /> * <br /> ******************************************************************************/</p> 
<p>class GuiCamera<br /> {<br /> &nbsp;&nbsp;&nbsp; private String fileName; // 文件的前缀</p> 
<p>&nbsp;&nbsp;&nbsp; private String defaultName = &quot;GuiCamera&quot;;</p> 
<p>&nbsp;&nbsp;&nbsp; static int serialNum = 0;</p> 
<p>&nbsp;&nbsp;&nbsp; private String imageFormat; // 图像文件的格式</p> 
<p>&nbsp;&nbsp;&nbsp; private String defaultImageFormat = &quot;png&quot;;</p> 
<p>&nbsp;&nbsp;&nbsp; Dimension d = Toolkit.getDefaultToolkit().getScreenSize();</p> 
<p>&nbsp;&nbsp;&nbsp; /***********************************************************************<br /> &nbsp;&nbsp;&nbsp;&nbsp; * 默认的文件前缀为GuiCamera，文件格式为PNG格式 The default construct will use the<br /> &nbsp;&nbsp;&nbsp;&nbsp; * default Image file surname &quot;GuiCamera&quot;, and default image format<br /> &nbsp;&nbsp;&nbsp;&nbsp; * &quot;png&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp; **********************************************************************/<br /> &nbsp;&nbsp;&nbsp; public GuiCamera()<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; fileName = defaultName;<br /> &nbsp;&nbsp;&nbsp; imageFormat = defaultImageFormat;<br /> &nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp; /***********************************************************************<br /> &nbsp;&nbsp;&nbsp;&nbsp; * @param s<br /> &nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the surname of the snapshot file<br /> &nbsp;&nbsp;&nbsp;&nbsp; * @param format<br /> &nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the format of the image file, it can be &quot;jpg&quot; or &quot;png&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本构造支持JPG和PNG文件的存储<br /> &nbsp;&nbsp;&nbsp;&nbsp; **********************************************************************/<br /> &nbsp;&nbsp;&nbsp; public GuiCamera(String s, String format)<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; fileName = s;<br /> &nbsp;&nbsp;&nbsp; imageFormat = format;<br /> &nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp; /***********************************************************************<br /> &nbsp;&nbsp;&nbsp;&nbsp; * 对屏幕进行拍照 snapShot the Gui once<br /> &nbsp;&nbsp;&nbsp;&nbsp; **********************************************************************/<br /> &nbsp;&nbsp;&nbsp; public void snapShot()<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; try<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 拷贝屏幕到一个BufferedImage对象screenshot<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BufferedImage screenshot = (new Robot())<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .createScreenCapture(new Rectangle(0, 0,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (int) d.getWidth(), (int) d.getHeight()));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; serialNum++;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 根据文件前缀变量和文件格式变量，自动生成文件名<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String name = fileName + String.valueOf(serialNum) + &quot;.&quot;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + imageFormat;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; File f = new File(name);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.print(&quot;Save File &quot; + name);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 将screenshot对象写入图像文件<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ImageIO.write(screenshot, imageFormat, f);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.print(&quot;..Finished! &quot;);<br /> &nbsp;&nbsp;&nbsp; } catch (Exception ex)<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(ex);<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; }</p> 
<p>&nbsp;&nbsp;&nbsp; public static void main(String[] args)<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; GuiCamera cam = new GuiCamera(&quot;d:/test&quot;, &quot;png&quot;);<br /> &nbsp;&nbsp;&nbsp; cam.snapShot();<br /> &nbsp;&nbsp;&nbsp; }<br /> }</p></div></body></html>