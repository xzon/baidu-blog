<html><head><title>生产者消费者算法-Java源代码</title></head><body><div id='tit'>生产者消费者算法-Java源代码</div><div id='cate'>存档&middot;垃圾</div><div id='date'>2008年01月18日 星期五 11:10 P.M.</div><div id='page'>173</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/f6c753fb95cc0b126d22eb82.html'>http://hi.baidu.com/hxzon/blog/item/f6c753fb95cc0b126d22eb82.html</a><div id='cnt'><h1>生产者消费者算法-Java源代码</h1> 
<p>class Consumer implements Runnable {<br /> Q q=null;<br /> public Cunsumer(Q q){<br /> this.q = q;<br /> }<br /> public void run(){<br /> while(true){<br /> q.get();<br /> }<br /> }<br /> }<br /> class Producer implements Runnable {<br /> Q q=null;<br /> public Producer(Q q){<br /> this.q = q;<br /> }<br /> public void run(){<br /> int i=0;<br /> while(true){<br /> if(i==0)<br /> q.put(&quot;张三&quot;,&quot;男&quot;);<br /> else<br /> q.put(&quot;李四&quot;,&quot;女&quot;);<br /> i=(i+1)%2;<br /> }<br /> }<br /> }<br /> class Q {<br /> private String name=&quot;李四&quot;;<br /> private String sex=&quot;女&quot;;<br /> boolean flag=false;<br /> public synchronized void put(String name,String sex){<br /> if(flag)<br /> try{<br /> wait();}catch(Exception e){<br /> e.printStackTrace();<br /> }<br /> else{<br /> this.name = name;<br /> this.sex = sex;<br /> flag=true;<br /> notify();}<br /> }<br /> public synchronized void get(){<br /> if(!flag)<br /> try{<br /> wait();}catch(Exception e){<br /> e.printStackTrace();<br /> }<br /> System.out.println(name+&quot;------&gt;&quot;+sex);<br /> flag=false;<br /> notify();<br /> }<br /> public class ThreadCommunication {<br /> public static void main(String arg[]){<br /> Q q=new Q();<br /> Producer producer=new Producer(q);<br /> Consumer cunsumer=new Cunsumer(q);<br /> Thread pt=new Thread(producer);<br /> Thread ct=new Thread(cunsumer);<br /> pt.start();<br /> ct.start(); }<br /> }</p></div></body></html>