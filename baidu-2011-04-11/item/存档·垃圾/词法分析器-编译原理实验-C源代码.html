<html><head><title>词法分析器-编译原理实验-C源代码</title></head><body><div id='tit'>词法分析器-编译原理实验-C源代码</div><div id='cate'>存档&middot;垃圾</div><div id='date'>2008年03月02日 星期日 08:44 P.M.</div><div id='page'>165</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/8cbabf129eb36fcac3fd789a.html'>http://hi.baidu.com/hxzon/blog/item/8cbabf129eb36fcac3fd789a.html</a><div id='cnt'><h1>词法分析器-编译原理实验-C源代码</h1> 
<p>#include &quot;stdafx.h&quot;<br /> #include &lt;stdio.h&gt;<br /> #include &lt;stdlib.h&gt;<br /> #include &lt;string.h&gt;<br /> #include &lt;ctype.h&gt;<br /> #include &lt;malloc.h&gt;<br /> #include &lt;ctype.h&gt;<br /> #include &lt;conio.h&gt;<br /> #define NULL 0<br /> FILE *fp;<br /> char ch;<br /> char *keyword[8]={&quot;do&quot;,&quot;begin&quot;,&quot;else&quot;,&quot;end&quot;,&quot;if&quot;,&quot;then&quot;,&quot;var&quot;,&quot;while&quot;};<br /> char *operatornum[4]={&quot;+&quot;,&quot;-&quot;,&quot;*&quot;,&quot;/&quot;};<br /> char *comparison[6]={&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;,&quot;&lt;&gt;&quot;};<br /> char *interpunction[6]={&quot;,&quot;,&quot;;&quot;,&quot;:=&quot;,&quot;.&quot;,&quot;(&quot;,&quot;)&quot;};<br /> //////////////////////////////////////////////////////////////////////////////////////////<br /> bool search(char searchstr[],int wordtype)<br /> {<br /> int i;<br /> switch (wordtype)<br /> {<br /> case 1:for(i=0;i&lt;=7;i++)<br /> &nbsp;&nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(strcmp(keyword[i],searchstr)==0)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return(true);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> case 2:{<br /> &nbsp;&nbsp; for(i=0;i&lt;=3;i++)<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; if(strcmp(operatornum[i],searchstr)==0)<br /> &nbsp;&nbsp;&nbsp;&nbsp; return(true);<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; break;<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> case 3: for(i=0;i&lt;=5;i++)<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; if(strcmp(comparison[i],searchstr)==0)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return(true);<br /> &nbsp;&nbsp;&nbsp; }<br /> case 4: for(i=0;i&lt;=5;i++)<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; if(strcmp(interpunction[i],searchstr)==0)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return(true);<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;<br /> <br /> }<br /> return(false);<br /> }</p> 
<p><br /> ///////////////////////////////////////////////////////////////////////////////////////////</p> 
<p>char letterprocess (char ch)//字母处理函数<br /> {<br /> int i=-1;<br /> char letter[20];<br /> while (isalnum(ch)!=0)<br /> {<br /> &nbsp;&nbsp; letter[++i]=ch;<br /> &nbsp;&nbsp; ch=fgetc(fp);<br /> };<br /> letter[i+1]='\0';<br /> if (search(letter,1))<br /> {<br /> &nbsp;&nbsp; printf(&quot;&lt;%s,-&gt;\n&quot;,letter);<br /> &nbsp;&nbsp; //strcat(letter,&quot;\n&quot;);<br /> &nbsp;&nbsp; //fputs('&lt;' letter '&gt;\n',outp);<br /> }<br /> else<br /> {<br /> &nbsp;&nbsp; printf(&quot;&lt;indentifier,%s&gt;\n&quot;,letter);<br /> &nbsp;&nbsp; //strcat(letter,&quot;\n&quot;);<br /> &nbsp;&nbsp; //fputs(letter,outp);<br /> }<br /> return(ch);<br /> }<br /> ///////////////////////////////////////////////////////////////////////////////////////////</p> 
<p>char numberprocess(char ch)//数字处理程序<br /> {<br /> int i=-1;<br /> char num[20];<br /> while (isdigit(ch)!=0)<br /> {<br /> &nbsp;&nbsp; num[++i]=ch;<br /> &nbsp;&nbsp; ch=fgetc(fp);<br /> }<br /> if(isalpha(ch)!=0)<br /> {<br /> &nbsp;&nbsp; while(isspace(ch)==0)<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; num[++i]=ch;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ch=fgetc(fp);<br /> &nbsp;&nbsp; }<br /> &nbsp;&nbsp; num[i+1]='\0';<br /> &nbsp;&nbsp; printf(&quot;错误！非法标识符：%s\n&quot;,num);<br /> &nbsp;&nbsp; goto u;<br /> }<br /> num[i+1]='\0';<br /> &nbsp;&nbsp;&nbsp; printf(&quot;&lt;num,%s&gt;\n&quot;,num);<br /> &nbsp;&nbsp;&nbsp; //strcat(num,&quot;\n&quot;);<br /> &nbsp;&nbsp;&nbsp; //fputs(num,outp);<br /> u: return(ch);<br /> }</p> 
<p>//////////////////////////////////////////////////////////////////////////////////////////////</p> 
<p>char otherprocess(char ch)<br /> {<br /> int i=-1;<br /> char other[20];<br /> if (isspace(ch)!=0)<br /> {<br /> &nbsp;&nbsp; ch=fgetc(fp);<br /> &nbsp;&nbsp; goto u;<br /> }<br /> while ((isspace(ch)==0)&amp;&amp;(isalnum(ch)==0))<br /> {<br /> &nbsp;&nbsp; other[++i]=ch;<br /> &nbsp;&nbsp; ch=fgetc(fp);<br /> }<br /> other[i+1]='\0';<br /> if (search(other,2))<br /> &nbsp;&nbsp; printf(&quot;&lt;relop,%s&gt;\n&quot;,other);<br /> else<br /> &nbsp;&nbsp; if (search(other,3))<br /> &nbsp;&nbsp;&nbsp; printf(&quot;&lt;%s,-&gt;\n&quot;,other);<br /> &nbsp;&nbsp; else<br /> &nbsp;&nbsp;&nbsp; if (search(other,4))<br /> &nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;&lt;%s,-&gt;\n&quot;,other);<br /> &nbsp;&nbsp;&nbsp; else <br /> &nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;错误！非法字符：%s\n&quot;,other);<br /> u: return (ch);<br /> }</p> 
<p><br /> /////////////////////////////////////////////////////////////////////////////////////////////<br /> void main ()<br /> {<br /> char str,c;<br /> printf(&quot;**********************************词法分析器************************************\n&quot;);<br /> //outp=fopen(&quot;二元式表.txt&quot;,&quot;w&quot;);<br /> if ((fp=fopen(&quot;源程序.txt&quot;,&quot;r&quot;))==NULL)<br /> &nbsp;&nbsp; printf(&quot;源程序无法打开！\n&quot;);<br /> else<br /> {<br /> &nbsp;&nbsp; str =fgetc(fp);<br /> &nbsp;&nbsp; while (str!=EOF)<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; if (isalpha(str)!=0)<br /> &nbsp;&nbsp;&nbsp;&nbsp; str=letterprocess(str);<br /> &nbsp;&nbsp;&nbsp; else<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; if (isdigit(str)!=0)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str=numberprocess(str);<br /> &nbsp;&nbsp;&nbsp;&nbsp; else<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str=otherprocess(str);<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp; };<br /> &nbsp;&nbsp; printf(&quot;词法分析结束，谢谢使用！\n&quot;);<br /> &nbsp;&nbsp; printf(&quot;点任意键退出!\n&quot;);<br /> }<br /> &nbsp;&nbsp; c=getch();<br /> }</p></div></body></html>