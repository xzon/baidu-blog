<html><head><title>Top 10 Changes in Flex 4</title></head><body><div id='tit'>Top 10 Changes in Flex 4</div><div id='cate'>趋势&middot;演变</div><div id='date'>2010年04月01日 星期四 09:27 A.M.</div><div id='page'>17</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/66e1d713859eb30e5baf5341.html'>http://hi.baidu.com/hxzon/blog/item/66e1d713859eb30e5baf5341.html</a><div id='cnt'><p> </p> 
<h1>Top 10 Changes in Flex 4</h1> 
<p class="info">Posted by <strong><a href="http://www.infoq.com/author/Jon-Rose" class="editorlink">Jon Rose</a> </strong>on May 31, 2009</p> 
<p><a href="http://www.infoq.com/articles/top-10-flex4-changes">http://www.infoq.com/articles/top-10-flex4-changes</a></p> 
<p>This week, Adobe released their first official beta of Flex 4, codenamed Gumbo. The release includes a number of major changes. This list gives a high level overview of the items that have changed in the latest version of the popular RIA framework.</p> 
<h3>1. Integration with Adobe Catalyst</h3> 
<p>The primary focus of the Flex 4 development effort is providing support and integration with Adobe Catalyst - Adobe's new designer tool for creating rich Internet application assets without writing code. Catalyst promises to change the way that developers and designers are able to collaborate in their efforts, as it recognizes that application developers and designers work differently. Thus, it allows each to concentrate on what they are good at, as it enables each to work in the traditional ways they are accustomed to. The majority of the changes on this list have been made in order to facilitate integration between Flex and Catalyst.</p> 
<p>Learn more about <a href="http://labs.adobe.com/technologies/flashcatalyst/">Adobe Catalyst here</a>.</p> 
<h3>2. Spark Component Architecture</h3> 
<p>Each version of Flex includes a full component library with all of the common items needed to build an application, including data grids, buttons, layout containers, etc. In Flex 4, the underlying architecture of the components is known as Spark, where it was known as Halo in Flex 3. A major part of the effort to support Catalyst is in revamping the component model to adhere to a much higher level of separation of concerns.</p> 
<p>In the new Spark component model, core logic, skinning, and layout have been broken out so that they are handled independently of one another. The Spark component model is built on top of the Halo component model. Basically, that means that it extends from Halo's core base class UIComponent, allowing Flex4 to be adopted incrementally and Flex 3 components to be used in Flex 4 applications.</p> 
<p>In addition to the other changes, effects have been updated in Flex 4. Effects can now animate arbitrary objects and types, allowing for much greater flexibility in their use. Flex 4 effects have been implemented in the new &quot;spark.effects&quot; package. Just like the new component library, the Flex 4 effects have been re-implemented, leaving the Flex 3 effects in place for backwards compatibility. For more information on Gumbo Effects see Chet Haase's <a href="http://www.adobe.com/devnet/flex/articles/flex4_effects_pt1.html">article on Flex 4 Effects</a> or his <a href="http://graphics-geek.blogspot.com/2009/02/video-gumbo-effects.html">blog.</a></p> 
<p>Read the following <a href="http://opensource.adobe.com/wiki/display/flexsdk/Gumbo+Component+Architecture">white paper to learn more about the Spark architecture</a></p> 
<h3>3. MXML 2009</h3> 
<p>MXML is an XML-based abstraction, built on top of ActionScript 3 - the Flash Player programming language. MXML is used for laying out the view portions of the user interface and supporting tooling, such as the IDE, and now Catalyst. MXML 2009 includes a number of updates to support the decoupling of different behaviors (core, skinning, and layout) and the new component library. The Flex 4 components have been implemented in their own package (spark.components), leaving the Flex 3 components in place. MXML 2009 includes a new namespace to support this.</p> 
<p>The following example of an application declaration shows using the namespace and defining both the Spark and Halo component namespace:</p> 
<blockquote>
 &lt;s:Application 
 <br /> xmlns:fx=&quot;http://ns.adobe.com/mxml/2009&quot; 
 <br /> xmlns:s=&quot;library://ns.adobe.com/flex/spark&quot; 
 <br /> xmlns:mx=&quot;library://ns.adobe.com/flex/halo&quot;&gt; 
</blockquote> 
<p>Thus, one can use a Flex 4 Button by doing the following:</p> 
<blockquote>
 &lt;s:Button label=&quot;My Flex 4 Button&quot; /&gt; 
</blockquote> 
<p>And, the following for a Flex 3 Button:</p> 
<blockquote>
 &lt;mx:Button label=&quot;My Flex 3 Button&quot; /&gt; 
</blockquote> 
<p>Check out the <a href="http://opensource.adobe.com/wiki/display/flexsdk/MXML+2009">MXML 2009 specification</a> for additional detail on the changes.</p> 
<h3>4. Improvements to View States</h3> 
<p>Flex 2 introduced the notion of states to the Flex framework, where changes to a view component can be managed through a simple state change. In Flex 4, view states have been revamped to simplify the syntax and make them easier to use. An example of the simplified syntaxes are the new language attributes includeIn and excludeFrom, which can be set on a component to direct them how to behave on a state change (See below).</p> 
<blockquote>
 &lt;!-- Given the states A,B,C --&gt; 
 <br /> &lt;m:states&gt; 
 <br /> &lt;m:State name=&quot;A&quot;/&gt; 
 <br /> &lt;m:State name=&quot;B&quot;/&gt; 
 <br /> &lt;m:State name=&quot;C&quot;/&gt; 
 <br /> &lt;/m:states&gt; 
 <br /> 
 <br /> &lt;!-- This button will appear in only states A and B --&gt; 
 <br /> &lt;Button label=&quot;Click Me&quot; includeIn=&quot;A, B&quot;/&gt; 
 <br /> 
 <br /> &lt;!-- This button will appear in states A and B --&gt; 
 <br /> &lt;Button label=&quot;Button C&quot; excludeFrom=&quot;C&quot;/&gt; 
</blockquote> 
<p>Look here for <a href="http://opensource.adobe.com/wiki/display/flexsdk/Enhanced+States+Syntax">more information on the changes to View States</a>.</p> 
<h3>5. FXG Support</h3> 
<p>At its core, the Flash Player is a drawing engine. Adobe has leveraged this with the introduction of FXG in Flash Player version 10, and now its introduction to Flex. FXG is a declarative graphics format, which enables portability of assets between tools. That means that designers will be able to create assets in Catalyst or CS4 Illustrator, and the Flex application developer will be able to import them and use them without having to modify them.</p> 
<p>Check out the <a href="http://opensource.adobe.com/wiki/display/flexsdk/FXG+1.0+Specification">FXG Specification</a> for more details.</p> 
<h3>6. Skinning Enhancements</h3> 
<p>The biggest change in the Spark component model was overhauling skins so that they now control all visual aspects of the components and encapsulate their logic outside of the components core. Thus, this allows the visual parts of a component to be modified independently of the underlying core logic.</p> 
<p>Let's look at the PanelSkin.mxml skin file, the default skin for the Panel container, for an example:</p> 
<blockquote>
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
 <br /> &lt;s:SparkSkin xmlns:fx=&quot;http://ns.adobe.com/mxml/2009&quot; xmlns:s=&quot;library://ns.adobe.com/flex/spark&quot; alpha.disabled=&quot;0.5&quot;&gt; 
 <br /> 
 <br /> &lt;fx:Metadata&gt; 
 <br /> &lt;![CDATA[ 
 <br /> /** 
 <br /> * @copy spark.skins.default.ApplicationSkin#hostComponent 
 <br /> */ 
 <br /> [HostComponent(&quot;spark.components.Panel&quot;)] 
 <br /> ]]&gt; 
 <br /> &lt;/fx:Metadata&gt; 
 <br /> 
 <br /> &lt;fx:Script&gt; 
 <br /> /* Define the skin elements that should not be colorized. 
 <br /> For panel, border and title backround are skinned, but the content area and title text are not. */ 
 <br /> static private const exclusions:Array = [&quot;background&quot;, &quot;titleField&quot;, &quot;contentGroup&quot;]; 
 <br /> 
 <br /> /** 
 <br /> * @copy spark.skins.SparkSkin#colorizeExclusions 
 <br /> */ 
 <br /> override public function get colorizeExclusions():Array {return exclusions;} 
 <br /> 
 <br /> /* Define the content fill items that should be colored by the &quot;contentBackgroundColor&quot; style. */ 
 <br /> static private const contentFill:Array = [&quot;bgFill&quot;]; 
 <br /> 
 <br /> /** 
 <br /> * @inheritDoc 
 <br /> */ 
 <br /> override public function get contentItems():Array {return contentFill}; 
 <br /> &lt;/fx:Script&gt; 
 <br /> 
 <br /> &lt;s:states&gt; 
 <br /> &lt;s:State name=&quot;normal&quot; /&gt; 
 <br /> &lt;s:State name=&quot;disabled&quot; /&gt; 
 <br /> &lt;/s:states&gt; 
 <br /> 
 <br /> . . . . . 
 <br /> 
 <br /> &lt;s:Rect left=&quot;1&quot; right=&quot;1&quot; top=&quot;31&quot; height=&quot;1&quot;&gt; 
 <br /> &lt;s:fill&gt; 
 <br /> &lt;s:SolidColor color=&quot;0xC0C0C0&quot; /&gt; 
 <br /> &lt;/s:fill&gt; 
 <br /> &lt;/s:Rect&gt; 
 <br /> 
 <br /> &lt;!-- layer 5: text --&gt; 
 <br /> &lt;!-- Defines the appearance of the PanelSkin class's title bar. --&gt; 
 <br /> &lt;s:SimpleText id=&quot;titleField&quot; lineBreak=&quot;explicit&quot; 
 <br /> left=&quot;10&quot; right=&quot;4&quot; top=&quot;2&quot; height=&quot;30&quot; 
 <br /> verticalAlign=&quot;middle&quot; fontWeight=&quot;bold&quot;&gt; 
 <br /> &lt;/s:SimpleText&gt; 
 <br /> 
 <br /> &lt;s:Group id=&quot;contentGroup&quot; left=&quot;1&quot; right=&quot;1&quot; top=&quot;32&quot; bottom=&quot;1&quot;&gt; 
 <br /> &lt;/s:Group&gt; 
 <br /> 
 <br /> &lt;/s:SparkSkin&gt; 
</blockquote> 
<p>Since the only job of this skin file is to control the visual appearance of the Panel container, it makes it possible for a designer to modify how the component appears without ever editing the component source code or understanding the internal behavior of the component. More importantly, it allows designers to use Catalyst in a way that is natural to them.</p> 
<p>Look here for more information on <a href="http://opensource.adobe.com/wiki/display/flexsdk/Gumbo+Skinning">skinning Gumbo components</a>.</p> 
<h3>7. Updated Layout Model</h3> 
<p>Those familiar with Flex development will notice that the majority of the containers used in the Flex 3 developer are not a part of the Gumbo component library. This is because layout has been decoupled and is now handled through delegation. Since most of the Flex 3 containers existed simply to provide different forms of layout (e.g. HBox for horizontal layout, VBox for vertical layout), they are no longer needed.</p> 
<p>The following example shows one way that a Flex developer can now define layout. This example uses the Group class to manage the buttons, which is a new Spark class for management content items. The result is the two buttons displayed side-by-side, like it would have with an HBox in Flex 3.</p> 
<blockquote>
 &lt;s:Group width=&quot;400&quot; height=&quot;400&quot;&gt; 
 <br /> &lt;s:layout&gt; 
 <br /> &lt;s:HorizontalLayout paddingLeft=&quot;5&quot; paddingTop=&quot;5&quot; /&gt; 
 <br /> &lt;/s:layout&gt; 
 <br /> 
 <br /> &lt;s:Button label=&quot;Button 1&quot; /&gt; 
 <br /> &lt;s:Button label=&quot;Button 2&quot; /&gt; 
 <br /> &lt;/s:Group&gt; 
</blockquote> 
<p>Adobe's Ryan Stewart hosts the following tech talk reviewing the new layout mechanisms: <a href="http://blog.digitalbackcountry.com/2009/05/flex-4-layouts-on-tech-talk-with-ryan-stewart/">http://blog.digitalbackcountry.com/2009/05/flex-4-layouts-on-tech-talk-with-ryan-stewart/</a></p> 
<h3>8. Flash Builder 4</h3> 
<p>Flash Builder 4, formerly known as Flex Builder, is the latest version of the Eclipse based IDE for application developers. The new version comes with a handful of updates including: conditional debug break points, more refactoring tools, and FlexUnit 4 support. As always, it includes MXML, ActionScript 3, CSS editors, a visual designer, and the Flex performance and memory profiler (profiler only in the Professional version).</p> 
<p>In addition, the latest version includes advanced data management features to simplify the development of data-centric applications. This includes client side data management features that handle CRUD operations and scrolling through large collections on your services.</p> 
<p>Get <a href="http://www.adobe.com/devnet/flex/articles/flex4builder_whatsnew.html">more information on the IDE here</a>.</p> 
<h3>9. Compiler Performance</h3> 
<p>A major pain point most everyone developing Flex 3 applications has encountered is poor compiler performance. Thus, one of the published goals for Gumbo was to improve compiler performance in Flex 4. At this point, there are not any official benchmarks published from this work. However, Adobe's Peter Donovan did publish some notes on his early efforts, stating that he believed a 25% improvement would be reached without significant restructuring. He also said that to achieve a 3-4 times improvement, a redesign will be required. Certainly everyone developing enterprise Flex applications hopes that this is addressed by the time Flex 4 ships at the end of 2009.</p> 
<p>See <a href="http://opensource.adobe.com/wiki/display/flexsdk/Notes+on+Compiler+Performance+Improvements">Peter Donovan's notes</a> for more information.</p> 
<h3>10. New Text Capabilities</h3> 
<p>A major knock on Flash based applications (both Flex and non-Flex based) has been the ability to effectively deal with text. In Flash Player 10, Adobe introduced a new text engine to support the demands of rich Internet applications (multi-lingual, print, keyboard short-cuts, etc). Gumbo includes a handful of new text classes (RichText, SimpleText, etc) for more robust text support within the Flex framework. In addition, Adobe is working on their new Text Layout Framework to give all ActionScript 3 developers the ability to harness the power of the Flash Player's text engine. Learn more about the Text Layout Framework at: <a href="http://labs.adobe.com/technologies/textlayout/">http://labs.adobe.com/technologies/textlayout/</a></p> 
<p>As you can see with the wide range of changes, Flex 4 represents another step forward for the popular RIA platform. For additional information on the Flex 4 SDK changes, see Matt Chotin's article, <a href="http://www.adobe.com/devnet/flex/articles/flex4sdk_whatsnew.html">What's new in Flex 4 SDK beta.</a></p> 
<h3>Author's Bio</h3> 
<p>Jon Rose is an enterprise software consultant and Flex Practice Director at <a href="http://gorillalogic.com/">Gorilla Logic, Inc.</a> located in Boulder, Colorado. He is an editor and contributor to InfoQ.com, an enterprise software community. He is the co-host of <a href="http://drunkonsoftware.com/">DrunkOnSoftware.com</a>, a videocast for those who like booze and bits. He has worked with clients large and small in both the private sector and government. His love of solving problems drives him to build quality software. You can read his blog at: <a href="http://ectropic.com/">http://ectropic.com.</a></p> 
<p> </p> 
<p> </p> 
<p> </p></div></body></html>