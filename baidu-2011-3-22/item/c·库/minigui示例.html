<html><head><title><div class="tit">
  minigui示例
</div></title></head><body><div id='tit'>minigui示例</div><div id='cate'>c&middot;库</div><div id='date'>2010年03月08日 星期一 05:31 P.M.</div><div id='page'>17</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/012a6338bab47d2896ddd87e.html'>http://hi.baidu.com/hxzon/blog/item/012a6338bab47d2896ddd87e.html</a><div id='cnt'><div>
 minigui示例
</div> 
<div> 
</div> 
<div>
 <br /> #include &lt;stdio.h&gt; 
 <br /> 
 <br /> #include &lt;minigui/common.h&gt; 
 <br /> #include &lt;minigui/minigui.h&gt; 
 <br /> #include &lt;minigui/gdi.h&gt; 
 <br /> #include &lt;minigui/window.h&gt; 
 <br /> 
 <br /> static int HelloWinProc(HWND hWnd, int message, WPARAM wParam, LPARAM lParam) 
 <br /> { 
 <br /> &nbsp;&nbsp;&nbsp; HDC hdc; 
 <br /> &nbsp;&nbsp;&nbsp; switch (message) { 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case MSG_PAINT: 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hdc = BeginPaint (hWnd); 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextOut (hdc, 60, 60, &quot;Hello world!&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndPaint (hWnd, hdc); 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0; 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case MSG_CLOSE:
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DestroyMainWindow (hWnd); 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PostQuitMessage (hWnd); 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0; 
 <br /> &nbsp;&nbsp;&nbsp; } 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; return DefaultMainWinProc(hWnd, message, wParam, lParam); 
 <br /> } 
 <br /> 
 <br /> int MiniGUIMain (int argc, const char* argv[]) 
 <br /> { 
 <br /> &nbsp;&nbsp;&nbsp; MSG Msg; 
 <br /> &nbsp;&nbsp;&nbsp; HWND hMainWnd; 
 <br /> &nbsp;&nbsp;&nbsp; MAINWINCREATE CreateInfo; 
 <br /> 
 <br /> #ifdef _MGRM_PROCESSES 
 <br /> &nbsp;&nbsp;&nbsp; JoinLayer(NAME_DEF_LAYER , &quot;helloworld&quot; , 0 , 0); 
 <br /> #endif 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.dwStyle = WS_VISIBLE | WS_BORDER | WS_CAPTION; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.dwExStyle = WS_EX_NONE; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.spCaption = &quot;HelloWorld&quot;; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.hMenu = 0; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.hCursor = GetSystemCursor(0); 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.hIcon = 0; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.MainWindowProc = HelloWinProc; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.lx = 0; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.ty = 0; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.rx = 240; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.by = 180; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.iBkColor = COLOR_lightwhite; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.dwAddData = 0; 
 <br /> &nbsp;&nbsp;&nbsp; CreateInfo.hHosting = HWND_DESKTOP; 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; hMainWnd = CreateMainWindow (&amp;CreateInfo); 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; if (hMainWnd == HWND_INVALID) 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1; 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; ShowWindow(hMainWnd, SW_SHOWNORMAL); 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; while (GetMessage(&amp;Msg, hMainWnd)) { 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TranslateMessage(&amp;Msg); 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DispatchMessage(&amp;Msg); 
 <br /> &nbsp;&nbsp;&nbsp; } 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; MainWindowThreadCleanup (hMainWnd); 
 <br /> 
 <br /> &nbsp;&nbsp;&nbsp; return 0; 
 <br /> } 
 <br /> 
 <br /> #ifndef _MGRM_PROCESSES 
 <br /> #include &lt;minigui/dti.c&gt; 
 <br /> #endif
</div></div></body></html>