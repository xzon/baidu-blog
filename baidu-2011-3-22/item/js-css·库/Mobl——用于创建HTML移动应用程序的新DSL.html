<html><head><title><div class="tit">
  Mobl——用于创建HTML移动应用程序的新DSL
</div></title></head><body><div id='tit'>Mobl——用于创建HTML移动应用程序的新DSL</div><div id='cate'>js-css&middot;库</div><div id='date'>2011年02月13日 星期日 10:08 A.M.</div><div id='page'>1</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/8a9e910a1006ea0c94ca6b62.html'>http://hi.baidu.com/hxzon/blog/item/8a9e910a1006ea0c94ca6b62.html</a><div id='cnt'><p>Mobl——用于创建HTML移动应用程序的新DSL </p> 
<p>作者 <strong><a href="http://www.infoq.com/cn/author/Abel-Avram">Abel Avram</a></strong>译者 <strong><a href="http://www.infoq.com/cn/author/%E4%BE%AF%E4%BC%AF%E8%96%87">侯伯薇</a></strong>发布于 2011年2月12日 下午6时44分 </p> 
<p><a href="http://www.infoq.com/cn/news/2011/02/Mobl">http://www.infoq.com/cn/news/2011/02/Mobl</a></p> 
<p><a href="http://www.mobl-lang.org/">Mobl</a>是一种外部DSL，它的目的是要把代码编译到HTML5中，从而为移动设备创建跨浏览器的应用程序。<a href="http://zef.me/about">Zef Hemel</a>已经在<a href="http://webdsl.org/home">WebDSL项目</a>的启发下把它开发出来了，作为模型驱动工程和领域特定语言博士论文的一部分。InfoQ与Hemel进行了一次讨论，试图发现使用这种方法与编写移动应用更多相关的内容。</p> 
<p>Mobl使用一种与JavaScript非常类似的脚本语言实现了静态类型的推断语言。该语言拥有以下顶级结构： 实体（entities）、类型（types）、函数（functions）、控件（controls）、屏幕（screens）、样式（styles ）和设备（services）。<em>实体</em>是在本地存储中持久化的数据元素，而<em>类型</em>是一种供我们使用的不稳定的数据。<em>函数</em>与那些定义在JavaScript以及能够调用JavaScript代码的语言中的函数类似。UI是由<em>屏幕</em>组成的，屏幕中包含各种组件以及容器<em>控件</em>，并且在控件上会有附加的事件处理器。“Hello World”示例类似于下面这样：</p> 
<p>screen root() {<br />header(&quot;Hello world&quot;)<br />} </p> 
<p>这里是另一个使用自定义控件的示例：</p> 
<p>// Custom control:control sayHello(name : String) { label(name) // using the label control} screen root() { // Main module definition sayHello(&quot;Hello World&quot;) // using my custom control} </p> 
<p>我们会发现，UI并没有遵循MVC模式，控件可以包含本地的状态和逻辑。尽管我们可以这么做，但是Hemel还是建议“把所有复杂的逻辑放到函数中，并且不要把那些函数放在用户界面代码中。” The UI’s look and feel is created with <em>styles</em> similar to CSS.</p> 
<p>Mobl拥有创建面向Web<em>服务</em>接口的内建语法。以下是用于获取Twitter趋势主题的服务示例：</p> 
<p>service Twitter {<br />resource trends() : JSON {<br />uri = &quot;/_proxy/api.twitter.com/1/trends.json&quot;<br />}<br />} </p> 
<p>数据是以JSON格式在应用程序和服务之间传递的，JSON是“Mobl的动态类型的子类型，是一种特殊的类型，能够让你程序的各个部分使用动态类型定义，”这是<a href="http://hydra.nixos.org/build/882758/download/2/moblguide.pdf">文档（PDF）</a>中所说的。</p> 
<p>所有使用Mobl编写的代码在保存每个文件的时候会自动编译到HTML5的元素之中。应用程序能够在支持HTML5的浏览器上运行，浏览器需要支持以下HTML5特性：</p> 
<p><a href="http://www.w3.org/TR/html5/offline.html%29">本地缓存</a></p> 
<p><a href="http://dev.w3.org/geo/api/spec-source.html">地理位置</a>（mobl::location），这样你可以请求用户当前的GPS位置</p> 
<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html">画板</a>（mobl::canvas），用于基本的2D绘画</p> 
<p><a href="http://onepixelahead.com/2010/05/31/html5-notification-example/">通知</a>（mobl::notify）： 屏幕上的通知。（尽管没有太多浏览器支持）</p> 
<p>加速计（mobl::accelerometer）： 读取移动设备的加速计数据（当前只在iPhone和iPad上有效，其它平台暂时还不支持这个API）</p> 
<p><a href="http://dev.w3.org/html5/websockets/">WebSockets</a>（mobl::socket）： 使用socket.io与服务器进行数据流形式的通信。</p> 
<p>Hemel说，它当前专注于让Mobl能够在基于WebKit的浏览器工作，因为那些浏览器在移动设备上实现了最多的HTML5特性，但是对于让它在Firefox和Opera上工作也做了一些努力，并且，当windows Phone7支持HTML5的时候，也会扩展到那上面。Mobl应用程序可以直接部署或者通过<a href="http://www.phonegap.com/">PhoneGap</a>部署：</p> 
<p>我们可以使用PhoneGap部署Mobl应用程序。PhoneGap让你可以使用web技术为各种平台——包括iOS、Android、 Windows Mobile和BlackBerry等——构建本地应用程序。我正在做的一件工作就是要封装专门针对PhoneGap的API，从而以Mobl库的形式访问电话功能，像访问照相机以及电话的联系人列表等等。这项工作进展良好。</p> 
<p>Mobl还带有Eclipse插件，让我们可以在Windows、Linux以及Max OS上开发应用程序，并且已经基于MIT许可发布了。</p> 
<p><b>查看英文原文：</b><a href="http://www.infoq.com/news/2011/02/Mobl">Mobl – A New DSL for Creating HTML5 Mobile Applications</a></p> 
<p>&nbsp;</p> 
<p>&nbsp;</p> 
<p>&nbsp;</p></div></body></html>