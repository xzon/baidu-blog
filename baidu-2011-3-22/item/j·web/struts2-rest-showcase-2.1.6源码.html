<html><head><title><div class="tit">
  struts2-rest-showcase-2.1.6源码
</div></title></head><body><div id='tit'>struts2-rest-showcase-2.1.6源码</div><div id='cate'>j&middot;web</div><div id='date'>2009年03月31日 星期二 01:24 A.M.</div><div id='page'>59</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/1299ce950b1be743d0135e6f.html'>http://hi.baidu.com/hxzon/blog/item/1299ce950b1be743d0135e6f.html</a><div id='cnt'><div>
 struts2-rest-showcase-2.1.6源码
</div> 
<div> 
</div> 
<div>
 1, web.xml
 <br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</div> 
<div> 
</div> 
<div>
 &lt;web-app id=&quot;starter&quot; version=&quot;2.4&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &lt;display-name&gt;Struts 2 Rest Example&lt;/display-name&gt;
</div> 
<div> 
</div> 
<div>
 <br /> &lt;!-- Filters --&gt;
 <br /> &lt;!-- START SNIPPET: filter --&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;filter&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;action2&lt;/filter-name&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/filter&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;!-- END SNIPPET: filter --&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;filter-mapping&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;action2&lt;/filter-name&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/filter-mapping&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;!-- Welcome file lists --&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;welcome-file-list&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/welcome-file-list&gt;
</div> 
<div> 
</div> 
<div>
 &lt;/web-app&gt;
 <br /> -------------
 <br /> 2, struts.xml
 <br /> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
 <br /> &lt;!--
 <br /> /*
 <br /> * $Id: struts-plugin.xml 722219 2008-12-01 20:41:26Z musachy $
 <br /> *
 <br /> * Licensed to the Apache Software Foundation (ASF) under one
 <br /> * or more contributor license agreements. See the NOTICE file
 <br /> * distributed with this work for additional information
 <br /> * regarding copyright ownership. The ASF licenses this file
 <br /> * to you under the Apache License, Version 2.0 (the
 <br /> * &quot;License&quot;); you may not use this file except in compliance
 <br /> * with the License. You may obtain a copy of the License at
 <br /> *
 <br /> * http://www.apache.org/licenses/LICENSE-2.0
 <br /> *
 <br /> * Unless required by applicable law or agreed to in writing,
 <br /> * software distributed under the License is distributed on an
 <br /> * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 <br /> * KIND, either express or implied. See the License for the
 <br /> * specific language governing permissions and limitations
 <br /> * under the License.
 <br /> */
 <br /> --&gt;
</div> 
<div> 
</div> 
<div>
 &lt;!DOCTYPE struts PUBLIC
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &lt;struts&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;!-- Overwrite Convention --&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.convention.action.suffix&quot; value=&quot;Controller&quot;/&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.convention.action.mapAllMatches&quot; value=&quot;true&quot;/&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.convention.default.parent.package&quot; value=&quot;rest-default&quot;/&gt;
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; &lt;constant name=&quot;struts.convention.package.locators&quot; value=&quot;example&quot;/&gt;
 <br /> &lt;/struts&gt;
 <br /> ---------------
 <br /> 3, order.java
 <br /> package org.apache.struts2.rest.example;
</div> 
<div> 
</div> 
<div>
 public class Order {
 <br /> &nbsp;&nbsp;&nbsp; String id;
 <br /> &nbsp;&nbsp;&nbsp; String clientName;
 <br /> &nbsp;&nbsp;&nbsp; int amount;
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; public Order() {}
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; public Order(String id, String clientName, int amount) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.id = id;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.clientName = clientName;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.amount = amount;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public int getAmount() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return amount;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void setAmount(int amount) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.amount = amount;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public String getClientName() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return clientName;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void setClientName(String clientName) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.clientName = clientName;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public String getId() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return id;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void setId(String id) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.id = id;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; @Override
 <br /> &nbsp;&nbsp;&nbsp; public int hashCode() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final int prime = 31;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int result = 1;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = prime * result + amount;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = prime * result
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + ((clientName == null) ? 0 : clientName.hashCode());
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = prime * result + ((id == null) ? 0 : id.hashCode());
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; @Override
 <br /> &nbsp;&nbsp;&nbsp; public boolean equals(Object obj) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this == obj)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (obj == null)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (getClass() != obj.getClass())
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final Order other = (Order) obj;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (amount != other.amount)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (clientName == null) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (other.clientName != null)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else if (!clientName.equals(other.clientName))
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (id == null) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (other.id != null)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else if (!id.equals(other.id))
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> }
 <br /> -----------------
 <br /> 4, OrdersController.java
 <br /> package org.apache.struts2.rest.example;
</div> 
<div> 
</div> 
<div>
 import java.util.Collection;
</div> 
<div> 
</div> 
<div>
 import org.apache.struts2.dispatcher.ServletActionRedirectResult;
 <br /> import org.apache.struts2.rest.DefaultHttpHeaders;
 <br /> import org.apache.struts2.rest.HttpHeaders;
 <br /> import org.apache.struts2.convention.annotation.Results;
 <br /> import org.apache.struts2.convention.annotation.Result;
 <br /> import org.apache.struts2.convention.annotation.ParentPackage;
 <br /> import org.apache.struts2.convention.annotation.Namespaces;
 <br /> import org.apache.struts2.convention.annotation.Namespace;
 <br /> import org.apache.struts2.convention.annotation.InterceptorRef;
</div> 
<div> 
</div> 
<div>
 import com.opensymphony.xwork2.ModelDriven;
 <br /> import com.opensymphony.xwork2.Validateable;
 <br /> import com.opensymphony.xwork2.ValidationAwareSupport;
</div> 
<div> 
</div> 
<div>
 @Results({
 <br /> &nbsp;&nbsp;&nbsp; @Result(name=&quot;success&quot;, type=&quot;redirectAction&quot;, params = {&quot;actionName&quot; , &quot;orders&quot;})
 <br /> })
 <br /> public class OrdersController extends ValidationAwareSupport implements ModelDriven&lt;Object&gt;, Validateable{
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; private Order model = new Order();
 <br /> &nbsp;&nbsp;&nbsp; private String id;
 <br /> &nbsp;&nbsp;&nbsp; private Collection&lt;Order&gt; list;
 <br /> &nbsp;&nbsp;&nbsp; private OrdersService ordersService = new OrdersService();
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // GET /orders/1
 <br /> &nbsp;&nbsp;&nbsp; public HttpHeaders show() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new DefaultHttpHeaders(&quot;show&quot;);
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // GET /orders
 <br /> &nbsp;&nbsp;&nbsp; public HttpHeaders index() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list = ordersService.getAll();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new DefaultHttpHeaders(&quot;index&quot;)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .disableCaching();
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; // GET /orders/1/edit
 <br /> &nbsp;&nbsp;&nbsp; public String edit() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;edit&quot;;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // GET /orders/new
 <br /> &nbsp;&nbsp;&nbsp; public String editNew() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; model = new Order();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;editNew&quot;;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // GET /orders/1/deleteConfirm
 <br /> &nbsp;&nbsp;&nbsp; public String deleteConfirm() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;deleteConfirm&quot;;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // DELETE /orders/1
 <br /> &nbsp;&nbsp;&nbsp; public String destroy() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ordersService.remove(id);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addActionMessage(&quot;Order removed successfully&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;success&quot;;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // POST /orders
 <br /> &nbsp;&nbsp;&nbsp; public HttpHeaders create() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ordersService.save(model);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addActionMessage(&quot;New order created successfully&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new DefaultHttpHeaders(&quot;success&quot;)
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .setLocationId(model.getId());
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; // PUT /orders/1
 <br /> &nbsp;&nbsp;&nbsp; public String update() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ordersService.save(model);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addActionMessage(&quot;Order updated successfully&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;success&quot;;
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public void validate() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (model.getClientName() == null || model.getClientName().length() ==0) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addFieldError(&quot;clientName&quot;, &quot;The client name is empty&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public void setId(String id) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (id != null) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.model = ordersService.get(id);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.id = id;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; public Object getModel() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return (list != null ? list : model);
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 }
 <br /> -----------------------
 <br /> 5, OrdersService.java
 <br /> package org.apache.struts2.rest.example;
</div> 
<div> 
</div> 
<div>
 import java.util.*;
</div> 
<div> 
</div> 
<div>
 public class OrdersService {
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; private static Map&lt;String,Order&gt; orders = new HashMap&lt;String,Order&gt;();
 <br /> &nbsp;&nbsp;&nbsp; private static int nextId = 6;
 <br /> &nbsp;&nbsp;&nbsp; static {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; orders.put(&quot;3&quot;, new Order(&quot;3&quot;, &quot;Bob&quot;, 33));
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; orders.put(&quot;4&quot;, new Order(&quot;4&quot;, &quot;Sarah&quot;, 44));
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; orders.put(&quot;5&quot;, new Order(&quot;5&quot;, &quot;Jim&quot;, 66));
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public Order get(String id) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return orders.get(id);
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public List&lt;Order&gt; getAll() {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new ArrayList&lt;Order&gt;(orders.values());
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public void save(Order order) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (order.getId() == null) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; order.setId(String.valueOf(nextId++));
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; orders.put(order.getId(), order);
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public void remove(String id) {
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; orders.remove(id);
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 }
 <br /> -------------------------
 <br /> 6, 除了index.jsp页面，其他页面都在WEB-INF\content下。
</div> 
<div> 
</div> 
<div>
 &lt;% response.sendRedirect(&quot;orders&quot;); %&gt;
 <br /> -----------------------
 <br /> 7, orders-index.jsp
 <br /> &lt;!DOCTYPE html PUBLIC 
 <br /> &quot;-//W3C//DTD XHTML 1.1 Transitional//EN&quot;
 <br /> &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
</div> 
<div> 
</div> 
<div>
 &lt;%@taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt;
</div> 
<div> 
</div> 
<div>
 &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
 <br /> &lt;head&gt;
 <br /> &lt;title&gt;Orders&lt;/title&gt;
 <br /> &lt;/head&gt;
 <br /> &lt;body&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;s:actionmessage /&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;table&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;ID&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;Client&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;Amount&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;Actions&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:iterator value=&quot;model&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${id}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${clientName}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${amount}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;&lt;a href=&quot;orders/${id}&quot;&gt;View&lt;/a&gt; |
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href=&quot;orders/${id}/edit&quot;&gt;Edit&lt;/a&gt; |
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href=&quot;orders/${id}/deleteConfirm&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/s:iterator&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/table&gt;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;a href=&quot;orders/new&quot;&gt;Create a new order&lt;/a&gt;
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> -----------------------
 <br /> 8, orders-show.jsp
 <br /> &lt;!DOCTYPE html PUBLIC 
 <br /> &quot;-//W3C//DTD XHTML 1.1 Transitional//EN&quot;
 <br /> &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
 <br /> 
 <br /> &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
 <br /> &lt;head&gt;
 <br /> &lt;title&gt;Order ${id}&lt;/title&gt;
 <br /> &lt;/head&gt;
 <br /> &lt;body&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;table&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;ID&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${id}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;Client&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${clientName}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;th&gt;Amount&lt;/th&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;${amount}&lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/table&gt;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;a href=&quot;../orders&quot;&gt;Back to Orders&lt;/a&gt;
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> ----------------
 <br /> 9, orders-editNew.jsp
 <br /> &lt;!DOCTYPE html PUBLIC 
 <br /> &quot;-//W3C//DTD XHTML 1.1 Transitional//EN&quot;
 <br /> &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
 <br /> 
 <br /> &lt;%@taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt;
</div> 
<div> 
</div> 
<div>
 &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
 <br /> &lt;head&gt;
 <br /> &lt;title&gt;New Order&lt;/title&gt;
 <br /> &lt;/head&gt;
 <br /> &lt;body&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;s:form method=&quot;post&quot; action=&quot;%{#request.contextPath}/orders&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;table&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:textfield name=&quot;clientName&quot; label=&quot;Client&quot;/&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:textfield name=&quot;amount&quot; label=&quot;Amount&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td colspan=&quot;2&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:submit /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/table&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/s:form&gt;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;a href=&quot;&lt;%=request.getContextPath() %&gt;/orders&quot;&gt;Back to Orders&lt;/a&gt;
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> ---------------
 <br /> 10, orders-edit.jsp
 <br /> &lt;!DOCTYPE html PUBLIC 
 <br /> &quot;-//W3C//DTD XHTML 1.1 Transitional//EN&quot;
 <br /> &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
 <br /> 
 <br /> &lt;%@taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt;
</div> 
<div> 
</div> 
<div>
 &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
 <br /> &lt;head&gt;
 <br /> &lt;title&gt;Order &lt;s:property value=&quot;id&quot; /&gt;&lt;/title&gt;
 <br /> &lt;/head&gt;
 <br /> &lt;body&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;s:form method=&quot;post&quot; action=&quot;%{#request.contextPath}/orders/%{id}&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;s:hidden name=&quot;_method&quot; value=&quot;put&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;table&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:textfield name=&quot;id&quot; label=&quot;ID&quot; disabled=&quot;true&quot;/&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:textfield name=&quot;clientName&quot; label=&quot;Client&quot;/&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:textfield name=&quot;amount&quot; label=&quot;Amount&quot; /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td colspan=&quot;2&quot;&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;s:submit /&gt;
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/td&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/table&gt;
 <br /> &nbsp;&nbsp;&nbsp; &lt;/s:form&gt;&nbsp;&nbsp;&nbsp; 
 <br /> &nbsp;&nbsp;&nbsp; &lt;a href=&quot;&lt;%=request.getContextPath() %&gt;/orders&quot;&gt;Back to Orders&lt;/a&gt;
 <br /> &lt;/body&gt;
 <br /> &lt;/html&gt;
 <br /> ------------------
 <br /> 11, orders-deleteConfirm.jsp
 <br /> &lt;!DOCTYPE html PUBLIC 
 <br /> &quot;-//W3C//DTD XHTML 1.1 Transitional//EN&quot;
 <br /> &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
</div> 
<div> 
</div> 
<div> 
 <p>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;<br /> &lt;head&gt;<br /> &lt;title&gt;Order ${id}&lt;/title&gt;<br /> &lt;/head&gt;<br /> &lt;body&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;form action=&quot;../${id}?_method=DELETE&quot; method=&quot;post&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;p&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Are you sure you want to delete order ${id}?<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/p&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;submit&quot; value=&quot;Delete&quot; /&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;button&quot; value=&quot;Cancel&quot; onclick=&quot;window.location.href = '../../orders'&quot; /&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/div&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;/form&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;br /&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;a href=&quot;../../orders&quot;&gt;Back to Orders&lt;/a&gt;<br /> &lt;/body&gt;<br /> &lt;/html&gt;<br /> ----------------------<br /> <a href="http://hxzon.javaeye.com/blog/358048">http://hxzon.javaeye.com/blog/358048</a></p> 
 <p>hxzon:尝试输入orders/7.xml或者orders/7.json，会有意想不到的东西~~~</p> 
</div></div></body></html>