<html><head><title><div class="tit">
  Vector 还是ArrayList――哪一个更好，为什么？
</div></title></head><body><div id='tit'>Vector 还是ArrayList――哪一个更好，为什么？</div><div id='cate'>j&middot;入门</div><div id='date'>2008年03月03日 星期一 09:24 P.M.</div><div id='page'>169</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/9a7087cb5cae18f953664f40.html'>http://hi.baidu.com/hxzon/blog/item/9a7087cb5cae18f953664f40.html</a><div id='cnt'><p style="margin: 0cm 0cm 0pt" class="MsoNormal"><font size="2"><code><strong><span style="font-size: 11.5pt">Vector </span></strong></code><strong><span>还是</span></strong><code><strong><span style="font-size: 11.5pt">ArrayList――哪一个更好，为什么？</span></strong></code><span> </span></font></p> 
<p> </p> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>要回答这个问题不能一概而论，有时候使用</span><span>Vector</span><span>比较好；有时是</span><span>ArrayList</span><span>，有时候这两个都不是最好的选择。你别指望能够获得一个简单肯定答案，因为这要看你用它们干什么。下面有</span><span>4</span><span>个要考虑的因素：</span></font></p> 
<p style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-list: l0 level1 lfo16" class="MsoNormal"><font size="2"><span>l<span style="font: 7pt Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>API</span></font></p> 
<p style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-list: l0 level1 lfo16" class="MsoNormal"><font size="2"><span>l<span style="font: 7pt Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>同步处理</span></font></p> 
<p style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-list: l0 level1 lfo16" class="MsoNormal"><font size="2"><span>l<span style="font: 7pt Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>数据增长性</span></font></p> 
<p style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-list: l0 level1 lfo16" class="MsoNormal"><font size="2"><span>l<span style="font: 7pt Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>使用模式</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><font size="2"><span>下面针对这</span><span>4</span><span>个方面进行一一探讨</span></font></p> 
<h1 style="margin: 0cm 0cm 0pt"><span><font size="2">API </font></span></h1> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>在由</span><span>Ken Arnold</span><span>等编著的《</span><em><span>Java Programming Language</span></em><span>》</span><span>(Addison-Wesley, June 2000)</span><span>一书中有这样的描述，</span><span>Vector</span><span>类似于</span><span>ArrayList.</span><span>。所有从</span><span>API</span><span>的角度来看这两个类非常相似。但他们之间也还是有一些主要的区别的。</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><strong><font size="2"><span>同步性</span><span> </span></font></strong></p> 
<p> </p> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>Vector</span><span>是同步的。这个类中的一些方法保证了</span><span>Vector</span><span>中的对象是<strong>线程安全</strong>的。而</span><span>ArrayList</span><span>则是异步的，因此</span><span>ArrayList</span><span>中的对象并不是<strong>线程安全</strong>的。因为同步的要求会影响执行的效率，所以如果你不需要线程安全的集合那么使用</span><span>ArrayList</span><span>是一个很好的选择，这样可以避免由于同步带来的不必要的性能开销。</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><strong><font size="2"><span>数据增长</span><span> </span></font></strong></p> 
<p> </p> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>从内部实现机制来讲</span><span>ArrayList</span><span>和</span><span>Vector</span><span>都是使用数组</span><span>(Array)</span><span>来控制集合中的对象。当你向这两种类型中增加元素的时候，如果元素的数目超出了内部数组目前的长度它们都需要扩展内部数组的长度，</span><span>Vector</span><span>缺省情况下自动增长原来一倍的数组长度，</span><span>ArrayList</span><span>是原来的</span><span>50%,</span><span>所以最后你获得的这个集合所占的空间总是比你实际需要的要大。所以如果你要在集合中保存大量的数据那么使用</span><span>Vector</span><span>有一些优势，因为你可以通过设置集合的初始化大小来避免不必要的资源开销。</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><strong><font size="2"><span>使用模式</span><span> </span></font></strong></p> 
<p> </p> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>在</span><span>ArrayList</span><span>和</span><span>Vector</span><span>中，从一个指定的位置（通过索引）查找数据或是在集合的末尾增加、移除一个元素所花费的时间是一样的，这个时间我们用</span><span>O(1)</span><span>表示。但是，如果在集合的其他位置增加或移除元素那么花费的时间会呈线形增长：</span><span>O(n-i)</span><span>，其中</span><span>n</span><span>代表集合中元素的个数，</span><span>i</span><span>代表元素增加或移除元素的索引位置。为什么会这样呢？以为在进行上述操作的时候集合中第</span><span>i</span><span>和第</span><span>i</span><span>个元素之后的所有元素都要执行位移的操作。这一切意味着什么呢？</span></font></p> 
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt; mso-char-indent-count: 2.0; mso-char-indent-size: 10.5pt" class="MsoNormal"><font size="2"><span>这意味着，你只是查找特定位置的元素或只在集合的末端增加、移除元素，那么使用</span><span>Vector</span><span>或</span><span>ArrayList</span><span>都可以。如果是其他操作，你最好选择其他的集合操作类。比如，</span><span>LinkList</span><span>集合类在增加或移除集合中任何位置的元素所花费的时间都是一样的</span><span>—O(1)</span><span>，但它在索引一个元素的使用缺比较慢－</span><span>O(i),</span><span>其中</span><span>i</span><span>是索引的位置</span><span>.</span><span>使用</span><span>ArrayList</span><span>也很容易，因为你可以简单的使用索引来代替创建</span><span>iterator</span><span>对象的操作。</span><span>LinkList</span><span>也会为每个插入的元素创建对象，所有你要明白它也会带来额外的开销。</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><font size="2"><span>最后，在《</span><em><span>Practical Java</span></em><span>》一书中</span><span>Peter Haggar</span><span>建议使用一个简单的数组（</span><span>Array</span><span>）来代替</span><span>Vector</span><span>或</span><span>ArrayList</span><span>。尤其是对于执行效率要求高的程序更应如此。因为使用数组</span><span>(Array)</span><span>避免了同步、额外的方法调用和不必要的重新分配空间的操作。</span></font></p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p> 
<p> </p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><strong><font size="2"><span>关于作者：</span><span> </span></font></strong></p> 
<p> </p> 
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><a target="_blank" href="http://www.javaworld.com/javaworld/feedback/jw-feedback-form.html"><span><font color="#990033" size="2"><u>Tony Sintes</u></font></span></a></span><font size="2"><span>是</span><span><a href="http://www.broadvision.com/"><span><font color="#990033"><u>BroadVision</u></font></span></a></span><span>的首席顾问。它是</span><span>SUN</span><span>的认证程序员，并且从</span><span>1997</span><span>年就开始使用</span><span>Java</span><span>开发程序了。</span></font></p></div></body></html>