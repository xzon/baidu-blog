<html><head><title><div class="tit">
  /*EchoClient.java，具有“回显”功能的客户端程序-Javacode -gcode
</div></title></head><body><div id='tit'>/*EchoClient.java，具有“回显”功能的客户端程序-Javacode -gcode</div><div id='cate'>j&middot;基础</div><div id='date'>2007年12月11日 星期二 07:14 P.M.</div><div id='page'>195</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/498cc9fc51726181b801a070.html'>http://hi.baidu.com/hxzon/blog/item/498cc9fc51726181b801a070.html</a><div id='cnt'><div> 
 <p><font size="3">/*EchoClient.java，具有“回显”功能的客户端程序-Javacode -gcode</font></p> 
 <p><font size="3">服务器端的程序将等待客户端的输入，然后将客户端的输入回显给客户端，<br /> 同时在服务器端的控制台输出。而客户端从控制台接收输入后，<br /> 向服务器端发送输入，并接收服务器端的回显数据，然后显示在控制台。<br /> 服务器端程序运行结果如下：<br /> Started: ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=9999]<br /> Connection accepted: Socket[addr=/127.0.0.1,port=1623,localport=9999]<br /> Hello! Enter BYE to exit.<br /> Echo: abc<br /> Echo: cde<br /> Echo: efg<br /> The client entered BYE!<br /> Connection will be closed!<br /> =========================================<br /> 客户端程序运行结果如下：<br /> socket = Socket[addr=localhost/127.0.0.1,port=9999,localport=1623]<br /> Enter a string, Enter BYE to exit!<br /> Abc<br /> Echo: abc<br /> Cde<br /> Echo: cde<br /> Efg<br /> Echo: efg<br /> BYE<br /> =============================================*/<br /> import java.io.*;<br /> import java.net.*;</font></p> 
</div> 
<div> 
</div> 
<div>
 <font size="3">public class EchoClient{<br /> &nbsp;&nbsp;&nbsp; //服务器端的服务端口。<br /> &nbsp;&nbsp;&nbsp; public static final int SERVERPORT = 9999;<br /> &nbsp;&nbsp;&nbsp; public static void main(String[] args){<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{//建立连接套接字。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Socket s = new Socket(&quot;localhost&quot;, SERVERPORT);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;socket = &quot; + s);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //新建网络连接的输入流。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BufferedReader in = new BufferedReader<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( new InputStreamReader(s.getInputStream()) );<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //新建网络连接的自动刷新的输出流。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PrintWriter out = new PrintWriter<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( new BufferedWriter(new OutputStreamWriter(<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s.getOutputStream())), true);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //先使用System.in构造InputStreamReader，再构造BufferedReader。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BufferedReader stdin =<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new BufferedReader(new InputStreamReader(System.in));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Enter a string, Enter BYE to exit! &quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true){<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //读取从控制台输入的字符串，并向网络连接输出，即向服务器端发送数据。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.println(stdin.readLine());<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //从网络连接读取一行，即接收服务器端的数据。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String str = in.readLine();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //如果接收到的数据为空（如果直接按Enter，不是空数据），则退出循环，关闭连接。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (str == null) break;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(str);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s.close();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (IOException e){<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println(&quot;IOException&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; }//end of main<br /> }//end of class<br /> </font>
</div></div></body></html>