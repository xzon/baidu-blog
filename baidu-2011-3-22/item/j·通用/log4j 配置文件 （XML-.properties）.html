<html><head><title><div class="tit">
  log4j 配置文件 （XML/.properties）
</div></title></head><body><div id='tit'>log4j 配置文件 （XML/.properties）</div><div id='cate'>j&middot;通用</div><div id='date'>2008年10月15日 星期三 05:16 P.M.</div><div id='page'>91</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/fd79d3390509dbf53a87cedf.html'>http://hi.baidu.com/hxzon/blog/item/fd79d3390509dbf53a87cedf.html</a><div id='cnt'><p>log4j 配置文件 （XML/.properties）</p> 
<p>XML</p> 
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;<br /> &lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;<br /> &lt;log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;</p> 
<p>&lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;<br /> &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;<br /> &lt;param name=&quot;ConversionPattern&quot; value=&quot;%c %d{ISO8601}<br /> -- %p -- %m%n&quot;/&gt;<br /> &lt;/layout&gt;<br /> &lt;/appender&gt;</p> 
<p>&lt;appender name=&quot;DEBUG&quot; class=&quot;org.apache.log4j.RollingFileAppender&quot;&gt;<br /> &lt;param name=&quot;File&quot; value=&quot;logs\\app-debug.log&quot;/&gt;<br /> &lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;<br /> &lt;param name=&quot;MaxFileSize&quot; value=&quot;500KB&quot;/&gt;<br /> &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;2&quot;/&gt;<br /> &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;<br /> &lt;param name=&quot;ConversionPattern&quot; value=&quot;%c %d{ISO8601}<br /> -- %p -- %m%n&quot;/&gt;<br /> &lt;/layout&gt;<br /> &lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;<br /> &lt;param name=&quot;LevelMin&quot; value=&quot;DEBUG&quot; /&gt;<br /> &lt;param name=&quot;LevelMax&quot; value=&quot;DEBUG&quot; /&gt;<br /> &lt;/filter&gt;<br /> &lt;/appender&gt;</p> 
<p>&lt;appender name=&quot;INFO&quot; class=&quot;org.apache.log4j.RollingFileAppender&quot;&gt;<br /> &lt;param name=&quot;File&quot; value=&quot;logs\\app-info.log&quot;/&gt;<br /> &lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;<br /> &lt;param name=&quot;MaxFileSize&quot; value=&quot;500KB&quot;/&gt;<br /> &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;2&quot;/&gt;<br /> &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;<br /> &lt;param name=&quot;ConversionPattern&quot; value=&quot;%c %d{ISO8601}<br /> -- %p -- %m%n&quot;/&gt;<br /> &lt;/layout&gt;<br /> &lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;<br /> &lt;param name=&quot;LevelMin&quot; value=&quot;INFO&quot; /&gt;<br /> &lt;param name=&quot;LevelMax&quot; value=&quot;INFO&quot; /&gt;<br /> &lt;/filter&gt;<br /> &lt;/appender&gt;</p> 
<p>&lt;appender name=&quot;WARN&quot; class=&quot;org.apache.log4j.RollingFileAppender&quot;&gt;<br /> &lt;param name=&quot;File&quot; value=&quot;logs\\app-warn.log&quot;/&gt;<br /> &lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;<br /> &lt;param name=&quot;MaxFileSize&quot; value=&quot;500KB&quot;/&gt;<br /> &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;2&quot;/&gt;<br /> &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;<br /> &lt;param name=&quot;ConversionPattern&quot; value=&quot;%c %d{ISO8601}<br /> -- %p -- %m%n&quot;/&gt;<br /> &lt;/layout&gt;<br /> &lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;<br /> &lt;param name=&quot;LevelMin&quot; value=&quot;WARN&quot; /&gt;<br /> &lt;param name=&quot;LevelMax&quot; value=&quot;WARN&quot; /&gt;<br /> &lt;/filter&gt;<br /> &lt;/appender&gt;</p> 
<p>&lt;appender name=&quot;ERROR&quot; class=&quot;org.apache.log4j.RollingFileAppender&quot;&gt;<br /> &lt;param name=&quot;File&quot; value=&quot;logs\\app-error.log&quot;/&gt;<br /> &lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;<br /> &lt;param name=&quot;MaxFileSize&quot; value=&quot;500KB&quot;/&gt;<br /> &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;2&quot;/&gt;<br /> &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;<br /> &lt;param name=&quot;ConversionPattern&quot; value=&quot;%c %d{ISO8601}<br /> -- %p -- %m%n&quot;/&gt;<br /> &lt;/layout&gt;<br /> &lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;<br /> &lt;param name=&quot;LevelMin&quot; value=&quot;ERROR&quot; /&gt;<br /> &lt;param name=&quot;LevelMax&quot; value=&quot;ERROR&quot; /&gt;<br /> &lt;/filter&gt;<br /> &lt;/appender&gt;</p> 
<p>&lt;root&gt;<br /> &lt;priority value=&quot;debug&quot;/&gt;<br /> &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;<br /> &lt;appender-ref ref=&quot;DEBUG&quot;/&gt;<br /> &lt;appender-ref ref=&quot;INFO&quot;/&gt;<br /> &lt;appender-ref ref=&quot;WARN&quot;/&gt;<br /> &lt;appender-ref ref=&quot;ERROR&quot;/&gt;<br /> &lt;/root&gt;</p> 
<p>&lt;/log4j:configuration&gt;</p> 
<p>--------------------------------------------</p> 
<p>.properties</p> 
<p>log4j.rootLogger=INFE,stdout,file<br /> log4j.appender.stdout=org.apache.log4j.ConsoleAppender<br /> log4j.appender.stdout.layout=org.apache.log4j.PatternLayout<br /> log4j.appender.stdout.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n<br /> #log4j.appender.stdout.layout.ConversionPattern=[start]%d{yyyy/MM/dd/ HH:mm:ss}[DATE]%n%p[PRIORITY]%n%x[NDC]%n%t[THREAD] n%c[CATEGORY]%n%m[MESSAGE]%n%n</p> 
<p><br /> log4j.appender.file=org.apache.log4j.FileAppender&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> log4j.appender.file.File=log/system.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> //log4j.appender.file.layout=org.apache.log4j.PatternLayout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> log4j.appender.file.layout.ConversionPattern=%d [%t] %-5p %c - %m%n<br /> #log4j.appender.file.layout.ConversionPattern=[start]%d{yyyy/MM/dd/ HH:mm:ss}[DATE]%n%p[PRIORITY]%n%x[NDC]%n%t[THREAD] n%c[CATEGORY]%n%m[MESSAGE]%n%n</p> 
<p>log4j.logger.org.apache.commons=ERROR<br /> log4j.logger.com.opensymphony.oscache.base=INFO</p> 
<p>#for hibernate<br /> log4j.logger.org.hibernate=info<br /> log4j.logger.org.hibernate.type=debug<br /> log4j.logger.org.hibernate.hql.ast.AST=debug <br /> #log4j.logger.org.hibernate=debug<br /> ### log HQL query parser activity<br /> #log4j.logger.org.hibernate.hql.ast.AST=debug<br /> ### log just the SQL <br /> log4j.logger.org.hibernate.SQL=debug<br /> ### log JDBC bind parameters<br /> ### log4j.logger.org.hibernate.type=info<br /> #log4j.logger.org.hibernate.type=debug<br /> ### log schema export/update<br /> ### log4j.logger.org.hibernate.tool.hbm2ddl=debug<br /> ### log HQL parse trees<br /> #log4j.logger.org.hibernate.hql=debug<br /> ### log cache activity<br /> ### #log4j.logger.org.hibernate.cache=debug<br /> ### log transaction activity<br /> #log4j.logger.org.hibernate.transaction=debug<br /> ### log JDBC resource acquisition<br /> #log4j.logger.org.hibernate.jdbc=debug<br /> ### enable the following line if you want to track down connection ###<br /> ### leakages when using DriverManagerConnectionProvider<br /> ###<br /> log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=trace</p> 
<p>#for spring<br /> #log4j.rootLogger=DEBUG,Spring</p> 
<p>log4j.appender.Spring=org.apache.log4j.ConsoleAppender<br /> #log4j.appender.Spring.Target=System.out<br /> log4j.appender.Spring.layout=org.apache.log4j.PatternLayout<br /> log4j.appender.Spring.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n</p> 
<p> </p> 
<p>测试代码-----------------------------------</p> 
<p>package com.tl.test;</p> 
<p>import java.io.IOException;</p> 
<p> </p> 
<p>import org.apache.log4j.Logger;<br /> import org.apache.log4j.xml.DOMConfigurator;</p> 
<p>public class testlog4j {<br /> public static void main(String[] args) throws IOException, ClassNotFoundException {<br /> &nbsp;&nbsp;&nbsp; DOMConfigurator.configure(&quot;src/log4j2.xml&quot;);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Logger log=Logger.getLogger(&quot;com.tl.tiany&quot;); <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log.info(&quot;5555555555555555&quot;); <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp; } <br /> }</p> 
<p> </p></div></body></html>