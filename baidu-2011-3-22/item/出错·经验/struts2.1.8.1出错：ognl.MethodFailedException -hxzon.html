<html><head><title><div class="tit">
  struts2.1.8.1出错：ognl.MethodFailedException -hxzon
</div></title></head><body><div id='tit'>struts2.1.8.1出错：ognl.MethodFailedException -hxzon</div><div id='cate'>出错&middot;经验</div><div id='date'>2010年01月13日 星期三 02:49 P.M.</div><div id='page'>19</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/7a9f35fa1246ff15a9d311e7.html'>http://hi.baidu.com/hxzon/blog/item/7a9f35fa1246ff15a9d311e7.html</a><div id='cnt'><div>
 struts2.1.8.1出错：ognl.MethodFailedException -hxzon
</div> 
<div> 
</div> 
<div>
 -------------------
 <br /> hxzon：
 <br /> struts2.0.14升级到struts2.1.8.1，出现一个问题，
 <br /> 找不到setPageSize(String)方法，
 <br /> 我定义的是setPageSize(int)方法，
 <br /> 但原来版本并没有这个问题。
 <br /> 并不是ognl更新的问题，以为是xwork-core-2.1.6.jar 的问题。
 <br /> 但真正问题其实是网页传递过来的值是“3 ”，末尾多了个空格，
 <br /> 导致无法转换为int，于是寻找String方法，结果就提示找不到。
</div> 
<div> 
</div> 
<div>
 --------------------------
</div> 
<div> 
</div> 
<div>
 <br /> ognl.MethodFailedException: Method &quot;setPageSize&quot; failed for object com.hxzon.project.Page@149f171 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1265) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.OgnlRuntime.setMethodValue(OgnlRuntime.java:1454) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.ObjectPropertyAccessor.setPossibleProperty(ObjectPropertyAccessor.java:85) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:162) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.ognl.accessor.ObjectAccessor.setProperty(ObjectAccessor.java:28) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.OgnlRuntime.setProperty(OgnlRuntime.java:2225) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.ASTProperty.setValueBody(ASTProperty.java:127) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:220) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.SimpleNode.setValue(SimpleNode.java:301) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.ASTChain.setValueBody(ASTChain.java:227) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:220) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.SimpleNode.setValue(SimpleNode.java:301) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.Ognl.setValue(Ognl.java:737) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:198) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:161) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:149) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ParametersInterceptor.setParameters(ParametersInterceptor.java:276) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:187) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter.doFilter(StrutsExecuteFilter.java:88) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129) 
 <br /> &nbsp;&nbsp;&nbsp; at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter.doFilter(StrutsPrepareFilter.java:82) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 
 <br /> &nbsp;&nbsp;&nbsp; at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454) 
 <br /> &nbsp;&nbsp;&nbsp; at java.lang.Thread.run(Thread.java:619) 
 <br /> Caused by: java.lang.NoSuchMethodException: com.hxzon.project.Page.setPageSize([Ljava.lang.String;) 
 <br /> &nbsp;&nbsp;&nbsp; at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1206) 
 <br /> &nbsp;&nbsp;&nbsp;&nbsp; ... 72 common frames omitted
</div></div></body></html>