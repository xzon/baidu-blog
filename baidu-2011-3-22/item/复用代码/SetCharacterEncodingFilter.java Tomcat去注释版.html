<html><head><title><div class="tit">
  SetCharacterEncodingFilter.java Tomcat去注释版
</div></title></head><body><div id='tit'>SetCharacterEncodingFilter.java Tomcat去注释版</div><div id='cate'>复用代码</div><div id='date'>2008年07月20日 星期日 02:19 A.M.</div><div id='page'>117</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/47fe92ee33e6312f2cf534ce.html'>http://hi.baidu.com/hxzon/blog/item/47fe92ee33e6312f2cf534ce.html</a><div id='cnt'><p> </p> 
<p>SetCharacterEncodingFilter.java Tomcat去注释版</p> 
<p>import java.io.IOException;<br /> import javax.servlet.Filter;<br /> import javax.servlet.FilterChain;<br /> import javax.servlet.FilterConfig;<br /> import javax.servlet.ServletException;<br /> import javax.servlet.ServletRequest;<br /> import javax.servlet.ServletResponse;<br /> /**<br /> * 表单提交时，解决中文乱码<br /> * <br /> */<br /> public class <font color="#ff00ff">SetCharacterEncodingFilter</font> implements Filter <br /> {<br /> protected String encoding = null;<br /> protected FilterConfig filterConfig = null;<br /> protected boolean ignore = true;<br /> <br /> public void <font color="#ff0000">init</font>(FilterConfig filterConfig) throws ServletException<br /> {<br /> this.filterConfig=filterConfig;<br /> this.encoding=filterConfig.getInitParameter(&quot;encoding&quot;);<br /> String value=filterConfig.getInitParameter(&quot;ignore&quot;);<br /> if(value==null)<br /> this.ignore=true;<br /> else if(value.equalsIgnoreCase(&quot;true&quot;))<br /> this.ignore=true;<br /> else<br /> this.ignore=false;<br /> }<br /> <br /> public void <font color="#ff0000">doFilter</font>(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException <br /> {<br /> // TODO 自动生成方法存根<br /> if (ignore || (request.getCharacterEncoding() == null))<br /> {<br /> String encoding = selectEncoding(request);<br /> if (encoding != null)<br /> request.setCharacterEncoding(encoding);<br /> }<br /> chain.doFilter(request, response);<br /> }<br /> <br /> public void <font color="#ff0000">destroy</font>() <br /> {<br /> // TODO 自动生成方法存根<br /> this.encoding = null;<br /> this.filterConfig = null;<br /> }<br /> <br /> protected String <font color="#ff0000">selectEncoding</font>(ServletRequest request)<br /> {<br /> return (this.encoding);<br /> }<br /> }</p></div></body></html>