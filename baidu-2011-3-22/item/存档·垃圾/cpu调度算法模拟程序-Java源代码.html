<html><head><title><div class="tit">
  cpu调度算法模拟程序-Java源代码
</div></title></head><body><div id='tit'>cpu调度算法模拟程序-Java源代码</div><div id='cate'>存档&middot;垃圾</div><div id='date'>2008年01月18日 星期五 10:53 P.M.</div><div id='page'>178</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/db925543afdffa159313c6b8.html'>http://hi.baidu.com/hxzon/blog/item/db925543afdffa159313c6b8.html</a><div id='cnt'><h1>cpu调度算法模拟程序-Java源代码</h1> 
<p>import java.awt.*;<br /> import java.awt.event.*;<br /> <br /> class Pcb{//PCB管理类;<br /> private String name;<br /> private int time;<br /> private int priority;<br /> private String state;<br /> private int mem_begin;<br /> private int mem_size;<br /> public Pcb next;<br /> public Pcb(){<br /> <br /> }<br /> public Pcb(String name,int time,int priority,String state,int mem_size){<br /> this.name = name;<br /> this.time = time;<br /> this.priority = priority;<br /> this.state = state;<br /> this.mem_size = mem_size;<br /> }<br /> //过去式，今后会被替换;<br /> public Pcb(String name,int time,int priority,String state){<br /> this.name = name;<br /> this.time = time;<br /> this.priority = priority;<br /> this.state = state; <br /> }<br /> <br /> public Pcb(String name,int time,int priority,int mem_size){<br /> this.name = name;<br /> this.time = time;<br /> this.priority = priority;<br /> this.mem_size = mem_size;<br /> }<br /> //will be replace in future;<br /> public Pcb(String name,int time,int priority){<br /> this.name = name;<br /> this.time = time;<br /> this.priority = priority; <br /> }<br /> public void SetName(String name){<br /> this.name = name;<br /> }<br /> public void SetTime(int time){<br /> this.time = time;<br /> }<br /> public void SetPriority(int priority){<br /> this.priority = priority;<br /> }<br /> public void SetState(String state){<br /> this.state = state;<br /> }<br /> public void Setmem_beg(int begin){<br /> this.mem_begin = begin; <br /> }<br /> public void Setmem_size(int size){<br /> this.mem_size = size;<br /> }<br /> public String GetName(){<br /> return name;<br /> }<br /> public int GetTime(){<br /> return time;<br /> }<br /> public int GetPriority(){<br /> return priority;<br /> }<br /> public String GetState(){<br /> return state;<br /> }<br /> public int Getmem_beg(){<br /> return mem_begin;<br /> }<br /> public int Getmem_size(){<br /> return mem_size;<br /> }<br /> public void SubTime(){<br /> time--;<br /> }<br /> public void SubPriority(){<br /> priority--;<br /> }<br /> <br /> }<br /> <br /> class memory{//内存类;<br /> private int mem_begin;<br /> private int mem_size;<br /> private String pcd_name;<br /> private int state;<br /> public memory next;<br /> // public memory pre;<br /> public memory(){<br /> }<br /> public memory(String name,int size){<br /> this.pcd_name = name;<br /> this.mem_size = size;<br /> this.state = 0;<br /> //this.pre = null;<br /> this.next = null;<br /> }<br /> public void Setmem_beg(int begin){<br /> this.mem_begin = begin; <br /> }<br /> public void Setmem_size(int size){<br /> this.mem_size = size;<br /> }<br /> public void SetPcd_name(String name){<br /> this.pcd_name = name;<br /> }<br /> public void Setmem_state(int state){<br /> this.state = state; <br /> }<br /> public int Getmem_beg(){<br /> return mem_begin;<br /> }<br /> public int Getmem_size(){<br /> return mem_size;<br /> }<br /> public String GetPcd_name(){<br /> return pcd_name;<br /> }<br /> public int Getmem_state(){<br /> return state;<br /> }<br /> <br /> }<br /> class Windows extends WindowAdapter {<br /> //声明窗口容器；<br /> Frame Cpuwin;<br /> List Lready , Lwaiting , Lsuspend ,L_cpus_info,L_memory_table,L_memory_gra;<br /> Button BCpuscheduler,Bgetp_r , BgetP_s ,Bgetp_s_r;<br /> TextField tp_name,tp_time,tp_priority,tp_memory_size,tcpuinfo;<br /> Label p_name , p_time , p_priority ,p_memory_size, <br /> r_queue , w_queue , s_queue, memory_gra , memory_table,<br /> cpus_info;<br /> Panel p1,p2,p3,p4;<br /> //初试化窗口函数；<br /> public void display(){ <br /> Cpuwin = new Frame(&quot;Cpuscheduler by liuxin&quot;);//面板样式；<br /> Cpuwin.setSize(700,400);<br /> Cpuwin.setLocation(300, 140);<br /> Cpuwin.setLayout(new GridLayout(4,1,0,10));<br /> Cpuwin.addWindowListener(this);<br /> Cpuwin.setBackground(Color.gray); <br /> p_name = new Label(&quot;进程名&quot;);//第一行,输入进程信息面板；<br /> tp_name = new TextField(&quot;NAME&quot;, 10);<br /> p_time = new Label(&quot;运行时间&quot;);<br /> tp_time = new TextField(&quot;TIME&quot;,2);<br /> p_priority = new Label(&quot;优先权&quot;);<br /> tp_priority = new TextField(&quot;PRT&quot;, 3);<br /> p_memory_size = new Label(&quot;所需主存大小&quot;);<br /> tp_memory_size = new TextField(&quot;以Ｋ为单位&quot;,15);<br /> Bgetp_r = new Button(&quot;置入就绪队列&quot;);<br /> Bgetp_r.addActionListener(new CpuScheduler());<br /> p1 = new Panel(new FlowLayout(FlowLayout.LEFT));<br /> p1.add(p_name); p1.add(tp_name);<br /> p1.add(p_time); p1.add(tp_time);<br /> p1.add(p_priority); p1.add(tp_priority);<br /> p1.add(p_memory_size); p1.add(tp_memory_size);<br /> p1.add(Bgetp_r);<br /> <br /> r_queue = new Label(&quot;就绪队列&quot;);//第二行，队列名面板;<br /> w_queue = new Label(&quot;后备队列&quot;);<br /> s_queue = new Label(&quot;挂起队列&quot;);<br /> memory_gra = new Label(&quot;内存状态图&quot;);<br /> memory_table = new Label(&quot;未分分区表&quot;);<br /> p2 = new Panel(new FlowLayout(FlowLayout.LEFT, 50, 0));<br /> p2.add(r_queue);<br /> p2.add(w_queue);<br /> p2.add(s_queue);<br /> p2.add(memory_gra);<br /> p2.add(memory_table);<br /> <br /> Lready = new List(6);<br /> Lready.addActionListener(new CpuScheduler());//第三行，队列状态面板;<br /> // Lready.setSize(200, 40);<br /> Lwaiting = new List(6);<br /> // Lwaiting.setSize(200, 40);<br /> Lwaiting.addActionListener(new CpuScheduler());<br /> Lsuspend = new List(6);<br /> Lsuspend.addActionListener(new CpuScheduler());<br /> // Lsuspend.setSize(200, 40);<br /> L_memory_gra = new List(6);<br /> L_memory_gra.addActionListener(new CpuScheduler());<br /> L_memory_table = new List(6);<br /> L_memory_table.addActionListener(new CpuScheduler());<br /> <br /> p3 = new Panel(new FlowLayout(FlowLayout.LEFT, 0, 0));<br /> p3.add(Lready);p3.add(Lwaiting);p3.add(Lsuspend);<br /> p3.add(L_memory_gra);p3.add(L_memory_table);<br /> <br /> BCpuscheduler = new Button(&quot;进行调度&quot;);//第四行，调度面板;<br /> BCpuscheduler.addActionListener(new CpuScheduler());<br /> BgetP_s = new Button(&quot;挂起&quot;);<br /> BgetP_s.addActionListener(new CpuScheduler());<br /> Bgetp_s_r = new Button(&quot;解挂&quot;);<br /> Bgetp_s_r.addActionListener(new CpuScheduler());<br /> tcpuinfo = new TextField(&quot;info&quot;, 30);<br /> p4 = new Panel(new FlowLayout(FlowLayout.LEFT, 30, 0));<br /> p4.add(BCpuscheduler);p4.add(BgetP_s);p4.add(Bgetp_s_r);<br /> p4.add(tcpuinfo); <br /> <br /> Cpuwin.add(p1);//窗口面板;<br /> Cpuwin.add(p2);<br /> Cpuwin.add(p3);<br /> Cpuwin.add(p4);<br /> Cpuwin.setVisible(true);<br /> <br /> }<br /> public void windowClosing(WindowEvent e)<br /> {System.exit(0);}<br /> <br /> } <br /> <br /> <br /> <br /> public class CpuScheduler implements ActionListener{<br /> static Windows c=new Windows();<br /> static public Pcb ReadyHead;<br /> static public Pcb WaitHead;<br /> static public Pcb SuspendHead;<br /> static public Pcb SuspendEnd;<br /> static public memory MemTable;<br /> static boolean beg = false;<br /> static int ReadyNum = 0;<br /> static int WaitNum = 0;<br /> static int n = 0;<br /> static int m = 0;<br /> static int k = 0;<br /> static int mem = 0; <br /> static int nowsize = 0;<br /> <br /> //建立ＲＥＡＤＹ队列;<br /> public void BuildReadyQueue(String name,int time,int priority, String state, int size){<br /> c.tcpuinfo.setText(&quot;已经将&quot;+name+&quot;放入就绪队列&quot;); <br /> Pcb Temp = new Pcb(name, time, priority, state, size);<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Compare_f = ReadyHead;<br /> Compare_b = ReadyHead;<br /> if(ReadyHead == null){<br /> ReadyHead = Temp;<br /> // InitMemory(Temp);<br /> }<br /> else<br /> if(Temp.GetPriority() &gt; ReadyHead.GetPriority())<br /> {<br /> Temp.next = ReadyHead;<br /> ReadyHead = Temp;<br /> // InitMemory(Temp); <br /> }<br /> else{<br /> while(Compare_b != null &amp;&amp; Temp.GetPriority() &lt;= Compare_b.GetPriority()){<br /> Compare_f = Compare_b;<br /> Compare_b = Compare_b.next; <br /> } <br /> Compare_f.next = Temp;<br /> Temp.next = Compare_b;<br /> // InitMemory(Temp); <br /> }<br /> n++; <br /> }<br /> //建立waiting队列<br /> public void BuildWaitingQueue(String name,int time,int priority){ <br /> Pcb Temp = new Pcb(name, time, priority);<br /> Pcb Min,R_Temp; <br /> Pcb W_Compare_f;<br /> Pcb W_Compare_b;<br /> W_Compare_f = WaitHead;<br /> W_Compare_b = WaitHead;<br /> Min = ReadyHead;<br /> R_Temp = ReadyHead;<br /> while(R_Temp != null){<br /> if(Min.GetPriority() &gt; R_Temp.GetPriority())<br /> Min=R_Temp; <br /> R_Temp=R_Temp.next;<br /> }<br /> if(Min.GetPriority() &gt;= priority){<br /> Temp.SetState(&quot;后备&quot;);<br /> if(WaitHead == null){<br /> WaitHead=new Pcb(name,time,priority);<br /> WaitHead.SetState(&quot;后备&quot;);<br /> }<br /> else{<br /> if(Temp.GetPriority() &gt; WaitHead.GetPriority()){<br /> Temp.next = WaitHead;<br /> WaitHead=Temp;<br /> }<br /> else{<br /> while(W_Compare_b != null &amp;&amp; W_Compare_b.GetPriority()&gt;=Temp.GetPriority()){<br /> W_Compare_f=W_Compare_b;<br /> W_Compare_b=W_Compare_b.next;<br /> }<br /> W_Compare_f.next=Temp;<br /> Temp.next=W_Compare_b;<br /> }<br /> }<br /> c.tcpuinfo.setText(&quot;就绪队列已满,名字为&quot;+name+&quot;的新进程进入后备队列！&quot;);<br /> m++;<br /> }<br /> else{<br /> Temp.SetState(&quot;就绪&quot;);<br /> Insert(Temp);<br /> c.tcpuinfo.setText(&quot;就绪队列已满，但由于名为&quot;+name+&quot;的进程优先权高，放入就绪队列&quot;);<br /> }<br /> }<br /> <br /> <br /> public void BuilidSuspendQueue(String name){<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Pcb Temp;<br /> Compare_b=ReadyHead;<br /> Compare_f=ReadyHead;<br /> if(ReadyHead.GetName().equals(name)){<br /> ReleaseMem(ReadyHead);// release the memory;<br /> ReadyHead.SetState(&quot;后备&quot;);<br /> if(k==0){<br /> SuspendHead = new Pcb(name,ReadyHead.GetTime(),ReadyHead.GetPriority());<br /> SuspendEnd = SuspendHead;<br /> k++;<br /> }<br /> else{<br /> Temp = new Pcb(name,ReadyHead.GetTime(),ReadyHead.GetPriority());<br /> SuspendEnd.next = Temp;<br /> SuspendEnd = SuspendEnd.next;<br /> k++;<br /> }<br /> c.tcpuinfo.setText(&quot;已经将名称为&quot;+name+&quot;的进程放入挂起队列中！&quot;);<br /> ReadyHead = ReadyHead.next;<br /> n--;<br /> if(WaitHead!=null){<br /> Insert();<br /> n++;<br /> }<br /> }<br /> else{<br /> while(Compare_b != null &amp;&amp; (!Compare_b.GetName().equals(name))){<br /> Compare_f = Compare_b;<br /> Compare_b = Compare_b.next;<br /> }<br /> if(Compare_b == null){<br /> c.tcpuinfo.setText(&quot;就绪队列中没有找到你想要挂起的名字为&quot;+name+&quot;的进程！&quot;);<br /> }<br /> else{<br /> c.tcpuinfo.setText(&quot;已经将名称为&quot;+name+&quot;的进程放入挂起队列中！&quot;);<br /> ReleaseMem(Compare_b);<br /> ReadyHead.SetState(&quot;后备&quot;);<br /> if(k==0){<br /> SuspendHead = new Pcb(name,Compare_b.GetTime(),Compare_b.GetPriority());<br /> SuspendEnd =SuspendHead;<br /> k++;<br /> }<br /> else{<br /> Temp = new Pcb(name,Compare_b.GetTime(),Compare_b.GetPriority());<br /> SuspendEnd.next = Temp;<br /> SuspendEnd = SuspendEnd.next;<br /> k++;<br /> }<br /> Compare_f.next = Compare_b.next;<br /> n--;<br /> if(WaitHead!=null){<br /> Insert();<br /> n++;<br /> }<br /> }<br /> <br /> } <br /> }<br /> public void GetSuspendToReady(String name){<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Pcb Temp;<br /> Compare_b = SuspendHead;<br /> Compare_f = SuspendHead;<br /> if(SuspendHead.GetName().equals(name)){<br /> Temp = new Pcb(name,SuspendHead.GetTime(),SuspendHead.GetPriority());<br /> Temp.SetState(&quot;就绪&quot;);<br /> InitMemory(Temp);// init the momery;<br /> Insert(Temp);<br /> c.tcpuinfo.setText(&quot;名称为&quot;+name+&quot;的进程解挂并放入就绪队列中！&quot;);<br /> SuspendHead = SuspendHead.next;<br /> k--;<br /> }<br /> else{<br /> while(Compare_b != null &amp;&amp; (!Compare_b.GetName().equals(name))){<br /> Compare_f = Compare_b;<br /> Compare_b = Compare_b.next;<br /> }<br /> if(Compare_b == null){<br /> c.tcpuinfo.setText(&quot;挂起队列中没有找到你想要解挂的名字为&quot;+name+&quot;的进程！&quot;);<br /> }<br /> else{<br /> Temp = new Pcb(name,Compare_b.GetTime(),Compare_b.GetPriority());<br /> Temp.SetState(&quot;就绪&quot;);<br /> Insert(Temp);<br /> InitMemory(Temp);// init the momery;<br /> c.tcpuinfo.setText(&quot;已经将名称为&quot;+name+&quot;的进程解挂并放入就绪队列中！&quot;);<br /> Compare_f.next = Compare_b.next;<br /> k--;<br /> } <br /> }<br /> }<br /> public static void InitMem(){<br /> MemTable = new memory(); <br /> MemTable.Setmem_beg(0);<br /> MemTable.Setmem_size(100);<br /> MemTable.Setmem_state(0);<br /> } <br /> public boolean InitMemory(Pcb temp){<br /> memory mem_temp,last,now;<br /> last = MemTable; <br /> mem_temp = new memory(temp.GetName(),temp.Getmem_size()); <br /> boolean flag = true; <br /> if(mem_temp.Getmem_size() &gt; 100 ){<br /> c.tcpuinfo.setText(mem_temp.GetPcd_name()+&quot;is too big&quot;);<br /> flag = false;<br /> }<br /> if(MemTable == null){ <br /> return flag;<br /> }<br /> <br /> if(mem_temp.Getmem_size() + nowsize &gt; 100){<br /> c.tcpuinfo.setText(&quot;memory has been full please wait&quot;);<br /> flag = false;<br /> } <br /> <br /> if(MemTable.Getmem_state() == 0){// if the first is empty;<br /> if(MemTable.Getmem_size() &gt; mem_temp.Getmem_size()){<br /> mem_temp.next = MemTable;<br /> mem_temp.Setmem_beg( last.Getmem_beg() );<br /> mem_temp.Setmem_state(1);<br /> MemTable.Setmem_beg(mem_temp.Getmem_beg() + mem_temp.Getmem_size());<br /> MemTable.Setmem_size( MemTable.Getmem_size()-mem_temp.Getmem_size() ); <br /> MemTable = mem_temp;<br /> nowsize += mem_temp.Getmem_size();<br /> return flag;<br /> }<br /> if (MemTable.Getmem_size() == mem_temp.Getmem_size()){<br /> // MemTable.SetPcd_name(mem_temp.GetPcd_name());<br /> mem_temp = MemTable;<br /> mem_temp.Setmem_state(1);<br /> mem_temp.next = MemTable; <br /> nowsize += mem_temp.Getmem_size();<br /> return flag;<br /> }<br /> }<br /> // begin obtain the other;<br /> if(last != null){<br /> now = last.next; <br /> while(now != null){// search the teble for sutible memory;<br /> if(now.Getmem_state() == 0){// if the first is empty;<br /> if(now.Getmem_size() &gt; mem_temp.Getmem_size()){<br /> mem_temp.next = now;<br /> mem_temp.Setmem_beg( now.Getmem_beg() );<br /> mem_temp.Setmem_state(1);<br /> now.Setmem_beg(mem_temp.Getmem_beg() + mem_temp.Getmem_size());<br /> now.Setmem_size( now.Getmem_size()-mem_temp.Getmem_size() );<br /> last.next = mem_temp;<br /> nowsize += mem_temp.Getmem_size(); <br /> return flag;<br /> }<br /> else if (now.Getmem_size() == mem_temp.Getmem_size()){<br /> now.SetPcd_name(mem_temp.GetPcd_name());<br /> mem_temp = now;<br /> mem_temp.Setmem_state(1);<br /> last.next = mem_temp;<br /> nowsize += mem_temp.Getmem_size(); <br /> return flag;<br /> }<br /> }<br /> last = now;<br /> // if(last != null){<br /> now = now.next; <br /> // }<br /> }<br /> }<br /> return flag;<br /> }<br /> <br /> <br /> public void ReleaseMem(Pcb Temp){ <br /> memory mem_temp,last,now;<br /> mem_temp = new memory(Temp.GetName(),Temp.Getmem_size());<br /> if(MemTable == null){<br /> c.tcpuinfo.setText(&quot;无内存可释放&quot;);<br /> // return false;<br /> }<br /> last = MemTable;<br /> now = last.next;<br /> if (MemTable.GetPcd_name() == mem_temp.GetPcd_name()){//如果第一个就是要释放的分区;<br /> MemTable.Setmem_state(0);<br /> MemTable.SetPcd_name(null);<br /> if(now != null &amp;&amp; now.Getmem_state() == 0 ){//如果后邻接分区也是空闲的;<br /> MemTable.Setmem_size(MemTable.Getmem_size() + now.Getmem_size());<br /> MemTable.SetPcd_name(null);<br /> nowsize -= mem_temp.Getmem_size();<br /> MemTable.next = null;<br /> // return true;<br /> } <br /> }<br /> while (now != null){//在链表中寻找要释放的分区;<br /> if(now.GetPcd_name() == mem_temp.GetPcd_name()){//找到;<br /> nowsize -= mem_temp.Getmem_size();<br /> now.Setmem_state(0);<br /> if(now.next != null &amp;&amp; now.next.Getmem_state() == 0){//查看后面相邻结点是否有空闲;<br /> last.next = now.next;<br /> now.next.Setmem_beg(now.Getmem_beg());<br /> now.next.Setmem_size(now.Getmem_size() + now.next.Getmem_size());<br /> now = last.next;<br /> now.SetPcd_name(null);<br /> } <br /> if(last.Getmem_state() == 0){//查看前面相邻结点是否有空闲;<br /> last.next = now.next;<br /> last.Setmem_size(last.Getmem_size() + now.Getmem_size());<br /> last.SetPcd_name(null);<br /> now = last.next;<br /> // now.SetPcd_name(null);<br /> } <br /> }<br /> last = now;<br /> now = now.next; <br /> } <br /> }<br /> <br /> <br /> public void Schedule(){<br /> c.tcpuinfo.setText(&quot;对进程进行一轮调度！&quot;);<br /> Pcb Temp;<br /> Temp = ReadyHead;<br /> while(Temp != null){<br /> Temp.SubTime();<br /> if(Temp.GetTime() == 0){<br /> c.tcpuinfo.setText(&quot;就绪队列中名为&quot;+Temp.GetName()+&quot;的进程已经运行完！&quot;);<br /> Delete(Temp);<br /> n--;<br /> if(WaitHead != null){<br /> c.tcpuinfo.setText(&quot;从后备队列中添加新进程到就绪队列中！&quot;);<br /> Insert();<br /> n++;<br /> }<br /> }<br /> if(Temp.GetPriority() != 0){<br /> Temp.SubPriority();<br /> }<br /> Temp = Temp.next;<br /> }<br /> }<br /> //输出ＲＥＡＤＹ队列信息;<br /> public void PrintCpuinfo_ready(){ <br /> Pcb Temp;<br /> int row = 0;<br /> Temp = ReadyHead; <br /> c.Lready.removeAll();<br /> while(Temp != null &amp;&amp; row &lt; 6){<br /> String str = &quot; &quot; + &quot;name:&quot; + Temp.GetName() + &quot;time&quot; + Temp.GetTime() + &quot;priority&quot; + Temp.GetPriority();<br /> <br /> c.Lready.add(str);<br /> Temp = Temp.next;<br /> row++;<br /> }<br /> }<br /> //output the wait;<br /> public void PrintCpuinfo_wait(){<br /> Pcb Temp;<br /> int row = 0;<br /> Temp = WaitHead; <br /> c.Lwaiting.removeAll();<br /> PrintCpuinfo_ready();<br /> while(Temp != null &amp;&amp; row &lt; 6){<br /> String str = &quot; &quot; + &quot;name:&quot; + Temp.GetName() + &quot;time&quot; + Temp.GetTime() + &quot;priority&quot; + Temp.GetPriority();<br /> //System.out.println(str);<br /> c.Lwaiting.add(str);<br /> Temp = Temp.next;<br /> row++; <br /> }<br /> }<br /> //out put the memory;<br /> public void PrintMemoryinfo(){<br /> memory Temp,Temp1; <br /> Temp = MemTable;<br /> Temp1 = MemTable;<br /> c.L_memory_gra.removeAll();<br /> c.L_memory_table.removeAll();<br /> while(Temp != null /*&amp;&amp; Temp.Getmem_state() == 1*/){<br /> String str = &quot; &quot; + &quot;name:&quot; + Temp.GetPcd_name() + &quot;begin&quot; + Temp.Getmem_beg() + &quot;size&quot; + Temp.Getmem_size(); <br /> //if(Temp.Getmem_state() == 1){<br /> c.L_memory_gra.add(str);<br /> //}<br /> Temp = Temp.next; <br /> } <br /> while(Temp1 != null/* &amp;&amp; Temp1.Getmem_state() == 0*/){<br /> String str1 = &quot;begin&quot; + Temp1.Getmem_beg() + &quot;size&quot; + Temp1.Getmem_size() + &quot;状态&quot; +Temp1.Getmem_state(); <br /> if(Temp1.Getmem_state() == 0){<br /> c.L_memory_table.add(str1);<br /> }<br /> Temp1 = Temp1.next; <br /> }<br /> }<br /> public void PrintCpuinfo_all(){<br /> Pcb Temp;<br /> int row = 0;<br /> Temp = SuspendHead;<br /> c.Lready.removeAll();<br /> c.Lwaiting.removeAll();<br /> PrintCpuinfo_ready();<br /> PrintCpuinfo_wait();<br /> while(Temp != null &amp;&amp; row &lt; 6){<br /> String str = &quot; &quot; + &quot;name:&quot; + Temp.GetName() + &quot;time&quot; + Temp.GetTime() + &quot;priority&quot; + Temp.GetPriority();<br /> //System.out.println(str);<br /> c.Lsuspend.add(str);<br /> Temp = Temp.next;<br /> row++; <br /> }<br /> }<br /> //删除ＲＥＡＤＹ中被替换的结点;<br /> public void Delete(Pcb Temp){<br /> ReleaseMem(Temp);<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Compare_b = ReadyHead;<br /> Compare_f = ReadyHead;<br /> if(ReadyHead == Temp){<br /> ReadyHead = ReadyHead.next;<br /> }<br /> else{<br /> while(Compare_b != null &amp;&amp; Compare_b != Temp){<br /> Compare_f = Compare_b;<br /> Compare_b = Compare_b.next;<br /> }<br /> Compare_f.next = Compare_b.next;<br /> }<br /> //System.out.println(Temp.GetName());<br /> }<br /> //插入新结点;<br /> public void Insert(){<br /> Pcb Temp;<br /> Temp = WaitHead;<br /> Temp.SetState(&quot;就绪&quot;);<br /> WaitHead = WaitHead.next;<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Compare_b = ReadyHead;<br /> Compare_f = ReadyHead;<br /> if(Temp.GetPriority() &gt; ReadyHead.GetPriority() ){<br /> Temp.next = ReadyHead;<br /> ReadyHead = Temp;<br /> }<br /> else{<br /> while(Compare_b != null &amp;&amp; Compare_b.GetPriority() &gt;= Temp.GetPriority() ){<br /> Compare_f = Compare_b;<br /> Compare_b =Compare_b.next;<br /> }<br /> Compare_f.next = Temp;<br /> Temp.next = Compare_b;<br /> }<br /> String str = &quot; &quot; + &quot;name:&quot; + Temp.GetName() + &quot;time&quot; + Temp.GetTime() + &quot;priority&quot; + Temp.GetPriority();<br /> System.out.println(str);<br /> m--;<br /> }<br /> //插入新结点；<br /> public void Insert(Pcb Temp){<br /> Pcb R_Temp;<br /> Pcb Min;<br /> Pcb Compare_f;<br /> Pcb Compare_b;<br /> Pcb comp;<br /> Compare_b=ReadyHead;<br /> Compare_f=ReadyHead;<br /> R_Temp=ReadyHead;<br /> Min=ReadyHead; <br /> if(n&gt;=5){<br /> while(R_Temp != null){<br /> if(Min.GetPriority() &gt; R_Temp.GetPriority())<br /> Min=R_Temp;<br /> R_Temp=R_Temp.next;<br /> }<br /> comp=new Pcb(Min.GetName(),Min.GetTime(),Min.GetPriority());<br /> n--;<br /> // String str = &quot;comp&quot; + &quot;name:&quot; + comp.GetName() + &quot;time&quot; + comp.GetTime() + &quot;priority&quot; + comp.GetPriority();<br /> BuildWaitingQueue(comp.GetName(),comp.GetTime(),comp.GetPriority());<br /> m++;<br /> Delete(Min);<br /> } <br /> <br /> if(Temp.GetPriority() &gt; ReadyHead.GetPriority()){<br /> Temp.next = ReadyHead;<br /> ReadyHead = Temp;<br /> n++;<br /> }<br /> <br /> else{<br /> while(Compare_b != null &amp;&amp; Compare_b.GetPriority() &gt;= Temp.GetPriority()){<br /> Compare_f=Compare_b;<br /> Compare_b=Compare_b.next;<br /> }<br /> Compare_f.next=Temp;<br /> Temp.next = Compare_b;<br /> n++;<br /> }<br /> }<br /> String GetSuspendName(){<br /> int index = c.Lready.getSelectedIndex();<br /> String a = c.Lready.getItem(index);<br /> c.Lready.remove(index);<br /> System.out.println(a);<br /> String b = a.substring(6, 8);<br /> System.out.println(b);<br /> return b;<br /> }<br /> String GetReleaseSuspendName(){<br /> int index = c.Lsuspend.getSelectedIndex();<br /> String a = c.Lsuspend.getItem(index);<br /> c.Lsuspend.remove(index);<br /> System.out.println(a);<br /> String b = a.substring(6, 8);<br /> System.out.println(b);<br /> return b;<br /> }<br /> <br /> public void actionPerformed(ActionEvent e){<br /> if(e.getSource() == c.Bgetp_r){<br /> String name;<br /> int time;<br /> int priority;<br /> int size;<br /> name = c.tp_name.getText().trim();<br /> String t = c.tp_time.getText().trim();<br /> String p = c.tp_priority.getText().trim();<br /> String s = c.tp_memory_size.getText().trim();<br /> c.tp_name.setText(&quot;&quot;);<br /> c.tp_time.setText(&quot;&quot;);<br /> c.tp_priority.setText(&quot;&quot;);<br /> c.tp_memory_size.setText(&quot;&quot;);<br /> time = Integer.parseInt(t);<br /> priority = Integer.parseInt(p);<br /> size = Integer.parseInt(s);<br /> if(ReadyNum &lt; 6){<br /> Pcb Temp = new Pcb(name, time, priority, &quot;就绪&quot;, size);<br /> boolean flag = InitMemory(Temp);<br /> if(flag == true){<br /> BuildReadyQueue(name,time,priority,&quot;就绪&quot;,size);<br /> PrintCpuinfo_ready();<br /> PrintMemoryinfo();<br /> ReadyNum++;<br /> }<br /> else<br /> c.tcpuinfo.setText(&quot;内存满&quot;);<br /> }<br /> else{<br /> if(WaitNum &lt; 6){<br /> BuildWaitingQueue(name,time,priority);<br /> PrintCpuinfo_wait();<br /> WaitNum++;<br /> }<br /> } <br /> }<br /> if(e.getSource() == c.BCpuscheduler){<br /> Schedule();<br /> PrintCpuinfo_wait();<br /> PrintMemoryinfo();<br /> }<br /> if(e.getSource() == c.BgetP_s){ <br /> String name = GetSuspendName();<br /> BuilidSuspendQueue(name);<br /> PrintCpuinfo_all();<br /> PrintMemoryinfo();<br /> }<br /> if(e.getSource() == c.Bgetp_s_r){<br /> String name = GetReleaseSuspendName();<br /> GetSuspendToReady(name);<br /> PrintCpuinfo_all();<br /> PrintMemoryinfo();<br /> }<br /> }<br /> <br /> public static void main(String arg[]){<br /> InitMem();<br /> c.display();<br /> }<br /> }</p></div></body></html>