<html><head><title><div class="tit">
  中文词法分析的简单程序-编译原理实验-C++源代码
</div></title></head><body><div id='tit'>中文词法分析的简单程序-编译原理实验-C++源代码</div><div id='cate'>存档&middot;垃圾</div><div id='date'>2008年03月02日 星期日 08:29 P.M.</div><div id='page'>170</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/9aa5dff90b6ecc5d252df290.html'>http://hi.baidu.com/hxzon/blog/item/9aa5dff90b6ecc5d252df290.html</a><div id='cnt'><h1>中文词法分析的简单程序-编译原理实验-C++源代码</h1> 
<div class="NewsContent"> 
 <p>VC 6.0 下编译通过 disc 为辞典&nbsp;&nbsp; expression 为输入的短语</p> 
 <p>// Code.cpp : Defines the entry point for the console application.<br /> //</p> 
 <p>#include &quot;stdafx.h&quot;<br /> #include &quot;iostream.h&quot;<br /> #include &quot;string.h&quot;<br /> #include &quot;windows.h&quot;</p> 
 <p>int CountWord(char* words); //计算有多少个字符</p> 
 <p>struct dict<br /> {<br /> char syn[8],word[6];<br /> int scode,wcode;<br /> } dic[19];</p> 
 <p>int main(int argc, char* argv[])<br /> {<br /> strcpy(dic[0].syn,&quot;祈使动词&quot;);<br /> &nbsp;&nbsp;&nbsp; dic[0].scode=0;<br /> strcpy(dic[0].word,&quot;请&quot;);<br /> &nbsp;&nbsp;&nbsp; dic[0].wcode=0;<br /> &nbsp;&nbsp;&nbsp; strcpy(dic[1].syn,&quot;祈使动词&quot;);<br /> &nbsp;&nbsp;&nbsp; dic[1].scode=0;<br /> strcpy(dic[1].word,&quot;把&quot;);<br /> &nbsp;&nbsp;&nbsp; dic[1].wcode=1;<br /> &nbsp;&nbsp;&nbsp; strcpy(dic[2].syn,&quot;代词&quot;);<br /> dic[2].scode=1;<br /> strcpy(dic[2].word,&quot;你&quot;);<br /> dic[2].wcode=0;<br /> strcpy(dic[3].syn,&quot;动词&quot;);<br /> dic[3].scode=2;<br /> strcpy(dic[3].word,&quot;走&quot;);<br /> dic[3].wcode=0;<br /> strcpy(dic[4].syn,&quot;动词&quot;);<br /> dic[4].scode=2;<br /> strcpy(dic[4].word,&quot;跑&quot;);<br /> dic[4].wcode=1;<br /> strcpy(dic[5].syn,&quot;动词&quot;);<br /> dic[5].scode=2;<br /> strcpy(dic[5].word,&quot;跳&quot;);<br /> dic[5].wcode=2;<br /> strcpy(dic[6].syn,&quot;动词&quot;);<br /> dic[6].scode=2;<br /> strcpy(dic[6].word,&quot;转&quot;);<br /> dic[6].wcode=3;<br /> strcpy(dic[7].syn,&quot;动词&quot;);<br /> dic[7].scode=2;<br /> strcpy(dic[7].word,&quot;抬&quot;);<br /> dic[7].wcode=4;<br /> strcpy(dic[8].syn,&quot;方向词&quot;);<br /> dic[8].scode=3;<br /> strcpy(dic[8].word,&quot;向左&quot;);<br /> dic[8].wcode=0;<br /> strcpy(dic[9].syn,&quot;方向词&quot;);<br /> dic[9].scode=3;<br /> strcpy(dic[9].word,&quot;向右&quot;);<br /> dic[9].wcode=1;<br /> strcpy(dic[10].syn,&quot;方位词&quot;);<br /> dic[10].scode=4;<br /> strcpy(dic[10].word,&quot;向前&quot;);<br /> dic[10].wcode=0;<br /> strcpy(dic[11].syn,&quot;方位词&quot;);<br /> dic[11].scode=4;<br /> strcpy(dic[11].word,&quot;侧&quot;);<br /> dic[11].wcode=1;<br /> strcpy(dic[12].syn,&quot;名词&quot;);<br /> dic[12].scode=5;<br /> strcpy(dic[12].word,&quot;左手&quot;);<br /> dic[12].wcode=0;<br /> strcpy(dic[13].syn,&quot;名词&quot;);<br /> dic[13].scode=5;<br /> strcpy(dic[13].word,&quot;右手&quot;);<br /> dic[13].wcode=1;<br /> strcpy(dic[14].syn,&quot;名词&quot;);<br /> dic[14].scode=5;<br /> strcpy(dic[14].word,&quot;左腿&quot;);<br /> dic[14].wcode=2;<br /> strcpy(dic[15].syn,&quot;名词&quot;);<br /> dic[15].scode=5;<br /> strcpy(dic[15].word,&quot;右腿&quot;);<br /> dic[15].wcode=3;<br /> strcpy(dic[16].syn,&quot;副词&quot;);<br /> dic[16].scode=6;<br /> strcpy(dic[16].word,&quot;快&quot;);<br /> dic[16].wcode=0;<br /> strcpy(dic[17].syn,&quot;副词&quot;);<br /> dic[17].scode=6;<br /> strcpy(dic[17].word,&quot;慢&quot;);<br /> dic[17].wcode=1;<br /> strcpy(dic[18].syn,&quot;其他词&quot;);<br /> dic[18].scode=7;<br /> strcpy(dic[18].word,&quot;起来&quot;);<br /> dic[18].wcode=0;<br /> //////////////////////--Init Data End<br /> ///////////////////////////////////////////</p> 
 <p>char expression[30],phrase[40];&nbsp;&nbsp; //输入句子的分词程序<br /> char *p1,*p2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //*<br /> PWORD pw_exp1,pw_exp2,pw_old;&nbsp;&nbsp;&nbsp; //temp pw_old Can RollBack <br /> int&nbsp;&nbsp; n_WordNub = 0,n_InputNub = 0;&nbsp;&nbsp; //*<br /> <br /> strcpy(expression,&quot;请你向前走快抬左手侧左腿&quot;); <br /> <br /> for(int i=0; i&lt;40; i++)<br /> &nbsp;&nbsp; phrase[i] = ' ' ;<br /> phrase[39] = '';</p> 
 <p>p2 = expression;<br /> p1 = phrase;<br /> &nbsp;&nbsp; pw_old = pw_exp1 = (PWORD)p2; //Init</p> 
 <p>//计算输入的字数以确定查询的次数<br /> n_InputNub = CountWord(p2); <br /> <br /> &nbsp;&nbsp;&nbsp; printf(&quot;分析结果: &quot;);</p> 
 <p>&nbsp;&nbsp;&nbsp; for(int nub=0; nub&lt;n_InputNub; nub++) //按照输入的字数来找<br /> {<br /> &nbsp;&nbsp; for(int i=0; i&lt;19; i++) // 查询词表<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; pw_exp2 = (PWORD)dic[i].word;<br /> &nbsp;&nbsp;&nbsp; for(int j=0; j&lt;CountWord(dic[i].word); j++) //比较单词<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; if (*pw_exp1 == *pw_exp2)<br /> &nbsp;&nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pw_exp1++;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pw_exp2++;<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp; else<br /> &nbsp;&nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pw_exp1 = pw_old; //RollBack<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; }</p> 
 <p>&nbsp;&nbsp;&nbsp; if ((char*)pw_exp1 != p2) //词表找到单词<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; for(int x=0; x&lt;((char*)pw_exp1 - p2); x++) //存储识别单词<br /> &nbsp;&nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *p1 = *(p2+x); <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p1++;<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;&nbsp; *p1 = '/'; //填入分隔符<br /> &nbsp;&nbsp;&nbsp;&nbsp; p1++;<br /> &nbsp;&nbsp;&nbsp;&nbsp; p2 =(char*) pw_exp1;&nbsp;&nbsp; //查询下一个<br /> &nbsp;&nbsp;&nbsp;&nbsp; pw_old = pw_exp1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Can RollBack<br /> &nbsp;&nbsp;&nbsp; }</p> 
 <p>&nbsp;&nbsp;&nbsp; if (*p2 == '') //查完了!<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; break;<br /> &nbsp;&nbsp;&nbsp; }</p> 
 <p>&nbsp;&nbsp; }<br /> }</p> 
 <p>//查询完辞典!<br /> if( ((char*)pw_exp1 == p2) &amp;&amp; (*p2 != '') ) //词表里没有找到<br /> {<br /> &nbsp;&nbsp; cout&lt;&lt;&quot;不可识别的短语!&quot;;<br /> }<br /> else{<br /> &nbsp;&nbsp; cout&lt;&lt;&quot;识别完毕! :&quot; ;<br /> &nbsp;&nbsp; cout&lt;&lt;phrase;}<br /> <br /> return 0;<br /> }</p> 
 <p>int CountWord(char* words)<br /> {<br /> int n = 0;<br /> while(*words != '')<br /> {<br /> &nbsp;&nbsp; words++;<br /> &nbsp;&nbsp; n++;<br /> }<br /> return int(n/2);<br /> }</p> 
</div></div></body></html>