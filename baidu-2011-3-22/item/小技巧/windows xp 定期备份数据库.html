<html><head><title><div class="tit">
  windows xp 定期备份数据库
</div></title></head><body><div id='tit'>windows xp 定期备份数据库</div><div id='cate'>小技巧</div><div id='date'>2010年06月30日 星期三 01:39 P.M.</div><div id='page'>12</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/4ba01fd835bfec3832fa1c5d.html'>http://hi.baidu.com/hxzon/blog/item/4ba01fd835bfec3832fa1c5d.html</a><div id='cnt'><p>windows xp 定期备份数据库</p> 
<p>控制面板-》任务计划-》添加任务计划</p> 
<p>选择批处理文件，批处理文件内容如下：</p> 
<p>&nbsp;&nbsp;&nbsp; @echo off<br /> &nbsp;&nbsp;&nbsp; set cyear=%date:~0,4%<br /> &nbsp;&nbsp;&nbsp; set cmonth=%date:~5,2%<br /> &nbsp;&nbsp;&nbsp; set cday=%date:~8,2%<br /> &nbsp;&nbsp;&nbsp; set chour=%time:~0,2%<br /> &nbsp;&nbsp;&nbsp; if &quot;%chour:~0,1%&quot;==&quot; &quot; set &quot;chour=%chour:~1,1%&quot;<br /> &nbsp;&nbsp;&nbsp; set cmin=%time:~3,2%<br /> &nbsp;&nbsp;&nbsp; set cdate=%cyear%-%cmonth%-%cday%<br /> &nbsp;&nbsp;&nbsp; set ctime=%chour%-%cmin%<br /> &nbsp;&nbsp;&nbsp; set fdir=%cyear%-%cmonth%</p> 
<p>&nbsp;&nbsp;&nbsp; md %CD%\backup\%fdir%<br /> &nbsp;&nbsp;&nbsp; mysqldump -hlocalhost -uroot -proot -R pand&gt;%CD%\%fdir%\pand-%cdate%-%ctime%.sql<br /> rem&nbsp;&nbsp;&nbsp; pause</p> 
<p>------------------------<br /> hxzon:<br /> 当上午时，time取得的小时会含有空格，if语句用来去除空格。注意脚本本身的空格，例如set变量语句后的空格。<br />%CD%表示当前bat文件所在目录。</p></div></body></html>