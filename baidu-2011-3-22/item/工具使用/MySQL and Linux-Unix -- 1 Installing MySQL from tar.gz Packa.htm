<html><head><title><div class="tit">
  MySQL and Linux/Unix :: 1 Installing MySQL from tar.gz Packages on Other Unix-Like Systems
</div></title></head><body><div id='tit'>MySQL and Linux/Unix :: 1 Installing MySQL from tar.gz Packages on Other Unix-Like Systems</div><div id='cate'>工具使用</div><div id='date'>2008年10月06日 星期一 09:29 P.M.</div><div id='page'>94</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/41b96527f5ab3905908f9d49.html'>http://hi.baidu.com/hxzon/blog/item/41b96527f5ab3905908f9d49.html</a><div id='cnt'><p> </p> 
<p><a href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/index.html">MySQL and Linux/Unix</a> :: 1 Installing MySQL from tar.gz Packages on Other Unix-Like Systems</p> 
<div class="chapter"> 
 <div class="titlepage"> 
  <div> 
   <div> 
    <h2 class="title"><a name="installing-binary"></a>Chapter 1. Installing MySQL from <code class="filename"><font face="新宋体">tar.gz</font></code> Packages on Other Unix-Like Systems</h2> 
   </div> 
  </div> 
 </div> 
 <a class="indexterm" name="id1634560"></a>
 <a class="indexterm" name="id1634572"></a> 
 <p>This section covers the installation of MySQL binary distributions that are provided for various platforms in the form of compressed <span><strong class="command">tar</strong></span> files (files with a <code class="filename"><font face="新宋体">.tar.gz</font></code> extension). See <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/mysql-binaries.html">MySQL Binaries Compiled by MySQL AB</a>, for a detailed list.</p> 
 <p>To obtain MySQL, see <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/getting-mysql.html">How to Get MySQL</a>.</p> 
 <p>MySQL <span><strong class="command">tar</strong></span> file binary distributions have names of the form <code class="filename"><font face="新宋体">mysql-<em class="replaceable"><code>VERSION</code></em>-<em class="replaceable"><code>OS</code></em>.tar.gz</font></code>, where <code class="literal"><em class="replaceable"><code><font face="新宋体">VERSION</font></code></em></code> is a number (for example, <code class="literal"><font face="新宋体">5.0.72</font></code>), and <em class="replaceable"><code><font face="新宋体">OS</font></code></em> indicates the type of operating system for which the distribution is intended (for example, <code class="literal"><font face="新宋体">pc-linux-i686</font></code>).</p> 
 <p>In addition to these generic packages, we also offer binaries in platform-specific package formats for selected platforms. See <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/quick-standard-installation.html">Standard MySQL Installation Using a Binary Distribution</a>, for more information on how to install these.</p> 
 <p>You need the following tools to install a MySQL <span><strong class="command">tar</strong></span> file binary distribution:</p> 
 <div class="itemizedlist"> 
  <ul> 
   <li> <p>GNU <code class="literal"><font face="新宋体">gunzip</font></code> to uncompress the distribution.</p> </li> 
   <li> <p>A reasonable <span><strong class="command">tar</strong></span> to unpack the distribution. GNU <span><strong class="command">tar</strong></span> is known to work. Some operating systems come with a preinstalled version of <span><strong class="command">tar</strong></span> that is known to have problems. For example, Mac OS X <span><strong class="command">tar</strong></span> and Sun <span><strong class="command">tar</strong></span> are known to have problems with long filenames. On Mac OS X, you can use the preinstalled <span><strong class="command">gnutar</strong></span> program. On other systems with a deficient <span><strong class="command">tar</strong></span>, you should install GNU <span><strong class="command">tar</strong></span> first.</p> </li> 
  </ul> 
 </div> 
 <p>If you run into problems and need to file a bug report, please use the instructions in <a target="_top" href="http://dev.mysql.com/doc/refman/5.1/en/bug-reports.html">How to Report Bugs or Problems</a>.</p> 
 <a class="indexterm" name="id1634750"></a> 
 <p>The basic commands that you must execute to install and use a MySQL binary distribution are:</p> 
 <pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong><br />shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong><br />shell&gt; <strong class="userinput"><code>cd /usr/local</code></strong><br />shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz | tar xvf -</code></strong><br />shell&gt; <strong class="userinput"><code>ln -s <em class="replaceable"><code>full-path-to-mysql-VERSION-OS</code></em> mysql</code></strong><br />shell&gt; <strong class="userinput"><code>cd mysql</code></strong><br />shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong><br />shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong><br />shell&gt; <strong class="userinput"><code>scripts/mysql_install_db --user=mysql</code></strong><br />shell&gt; <strong class="userinput"><code>chown -R root .</code></strong><br />shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong><br />shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong></pre> 
 <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
  <h3 class="title">Note</h3> 
  <p>This procedure does not set up any passwords for MySQL accounts. After following the procedure, proceed to <a target="_top" href="http://dev.mysql.com/doc/topic-guides/en/post-installation.html">Post-Installation Setup and Testing</a>.</p> 
 </div> 
 <p>A more detailed version of the preceding description for installing a binary distribution follows:</p> 
 <div class="orderedlist"> 
  <ol type="1"> 
   <li> <p>Add a login user and group for <span><strong class="command">mysqld</strong></span> to run as:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong><br />shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong></pre> <p>These commands add the <code class="literal"><font face="新宋体">mysql</font></code> group and the <code class="literal"><font face="新宋体">mysql</font></code> user. The syntax for <span><strong class="command">useradd</strong></span> and <span><strong class="command">groupadd</strong></span> may differ slightly on different versions of Unix, or they may have different names such as <span><strong class="command">adduser</strong></span> and <span><strong class="command">addgroup</strong></span>.</p> <p>You might want to call the user and group something else instead of <code class="literal"><font face="新宋体">mysql</font></code>. If so, substitute the appropriate name in the following steps.</p> </li> 
   <li> <p>Pick the directory under which you want to unpack the distribution and change location into it. In the following example, we unpack the distribution under <code class="filename"><font face="新宋体">/usr/local</font></code>. (The instructions, therefore, assume that you have permission to create files and directories in <code class="filename"><font face="新宋体">/usr/local</font></code>. If that directory is protected, you must perform the installation as <code class="literal"><font face="新宋体">root</font></code>.)</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local</code></strong></pre> </li> 
   <li> <p>Obtain a distribution file using the instructions in <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/getting-mysql.html">How to Get MySQL</a>. For a given release, binary distributions for all platforms are built from the same MySQL source distribution.</p> </li> 
   <li> <p>Unpack the distribution, which creates the installation directory. Then create a symbolic link to that directory:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz | tar xvf -</code></strong><br />shell&gt; <strong class="userinput"><code>ln -s <em class="replaceable"><code>full-path-to-mysql-VERSION-OS</code></em> mysql</code></strong></pre> <p>The <span><strong class="command">tar</strong></span> command creates a directory named <code class="filename"><font face="新宋体">mysql-<em class="replaceable"><code>VERSION</code></em>-<em class="replaceable"><code>OS</code></em></font></code>. The <code class="literal"><font face="新宋体">ln</font></code> command makes a symbolic link to that directory. This lets you refer more easily to the installation directory as <code class="filename"><font face="新宋体">/usr/local/mysql</font></code>.</p> <p>With GNU <span><strong class="command">tar</strong></span>, no separate invocation of <code class="literal"><font face="新宋体">gunzip</font></code> is necessary. You can replace the first line with the following alternative command to uncompress and extract the distribution:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>tar zxvf <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz</code></strong></pre> </li> 
   <li> <p>Change location into the installation directory:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql</code></strong></pre> <p>You will find several files and subdirectories in the <code class="literal"><font face="新宋体">mysql</font></code> directory. The most important for installation purposes are the <code class="filename"><font face="新宋体">bin</font></code> and <code class="filename"><font face="新宋体">scripts</font></code> subdirectories:</p> 
    <div class="itemizedlist">
     <a class="indexterm" name="id1635115"></a>
     <a class="indexterm" name="id1635124"></a> 
     <ul> 
      <li> <p>The <code class="filename"><font face="新宋体">bin</font></code> directory contains client programs and the server. You should add the full pathname of this directory to your <code class="literal"><font face="新宋体">PATH</font></code> environment variable so that your shell finds the MySQL programs properly. See <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/environment-variables.html">Environment Variables</a>.</p> </li> 
      <li> <p>The <code class="filename"><font face="新宋体">scripts</font></code> directory contains the <span><strong class="command">mysql_install_db</strong></span> script used to initialize the <code class="literal"><font face="新宋体">mysql</font></code> database containing the grant tables that store the server access permissions.</p> </li> 
     </ul> 
    </div> </li> 
   <li> <p>Ensure that the distribution contents are accessible to <code class="literal"><font face="新宋体">mysql</font></code>. If you unpacked the distribution as <code class="literal"><font face="新宋体">mysql</font></code>, no further action is required. If you unpacked the distribution as <code class="literal"><font face="新宋体">root</font></code>, its contents will be owned by <code class="literal"><font face="新宋体">root</font></code>. Change its ownership to <code class="literal"><font face="新宋体">mysql</font></code> by executing the following commands as <code class="literal"><font face="新宋体">root</font></code> in the installation directory:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong><br />shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong></pre> <p>The first command changes the owner attribute of the files to the <code class="literal"><font face="新宋体">mysql</font></code> user. The second changes the group attribute to the <code class="literal"><font face="新宋体">mysql</font></code> group.</p> </li> 
   <li> <p>If you have not installed MySQL before, you must create the MySQL data directory and initialize the grant tables:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>scripts/mysql_install_db --user=mysql</code></strong></pre> <p>If you run the command as <code class="literal"><font face="新宋体">root</font></code>, include the <code class="option"><font face="新宋体">--user</font></code> option as shown. If you run the command while logged in as that user, you can omit the <code class="option"><font face="新宋体">--user</font></code> option.</p> <p>The command should create the data directory and its contents with <code class="literal"><font face="新宋体">mysql</font></code> as the owner.</p> <p>After creating or updating the grant tables, you need to restart the server manually.</p> </li> 
   <li> <p>Most of the MySQL installation can be owned by <code class="literal"><font face="新宋体">root</font></code> if you like. The exception is that the data directory must be owned by <code class="literal"><font face="新宋体">mysql</font></code>. To accomplish this, run the following commands as <code class="literal"><font face="新宋体">root</font></code> in the installation directory:</p> <pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R root .</code></strong><br />shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong></pre> </li> 
   <li> <p>If you want MySQL to start automatically when you boot your machine, you can copy <code class="literal"><font face="新宋体">support-files/mysql.server</font></code> to the location where your system has its startup files. More information can be found in the <code class="literal"><font face="新宋体">support-files/mysql.server</font></code> script itself and in <a title="8.2.&nbsp;Starting and Stopping MySQL Automatically" href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/automatic-start.html">Section 8.2, “Starting and Stopping MySQL Automatically”</a>.</p> </li> 
   <li> <p><a class="indexterm" name="id1635371"></a><a class="indexterm" name="id1635382"></a><a class="indexterm" name="id1635394"></a>You can set up new accounts using the <span><strong class="command">bin/mysql_setpermission</strong></span> script if you install the <code class="literal"><font face="新宋体">DBI</font></code> and <code class="literal"><font face="新宋体">DBD::mysql</font></code> Perl modules. See <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/mysql-fix-extensions.html#mysql-setpermission"><span><strong class="command">mysql_setpermission</strong></span></a>. For Perl module installation instructions, see <a target="_top" href="http://dev.mysql.com/doc/refman/5.0/en/perl-support.html">Perl Installation Notes</a>.</p> </li> 
   <li> <p>If you would like to use <span><strong class="command">mysqlaccess</strong></span> and have the MySQL distribution in some non-standard location, you must change the location where <span><strong class="command">mysqlaccess</strong></span> expects to find the <span><strong class="command">mysql</strong></span> client. Edit the <code class="filename"><font face="新宋体">bin/mysqlaccess</font></code> script at approximately line 18. Search for a line that looks like this:</p> <pre class="programlisting">$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable</pre> <p>Change the path to reflect the location where <span><strong class="command">mysql</strong></span> actually is stored on your system. If you do not do this, a <code class="literal"><font face="新宋体">Broken pipe</font></code> error will occur when you run <span><strong class="command">mysqlaccess</strong></span>.</p> </li> 
  </ol> 
 </div> 
 <p>After everything has been unpacked and installed, you should test your distribution. To start the MySQL server, use the following command:</p> 
 <pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong></pre> 
 <p>If you run the command as <code class="literal"><font face="新宋体">root</font></code>, you must use the <code class="option"><font face="新宋体">--user</font></code> option as shown. The value of the option is the name of the login account that you created in the first step to use for running the server. If you run the command while logged in as <code class="literal"><font face="新宋体">mysql</font></code>, you can omit the <code class="option"><font face="新宋体">--user</font></code> option.</p> 
 <p>If the command fails immediately and prints <code class="literal"><font face="新宋体">mysqld ended</font></code>, you can find some information in the <code class="filename"><font face="新宋体"><em class="replaceable"><code>host_name</code></em>.err</font></code> file in the data directory.</p> 
 <p>More information about <span><strong class="command">mysqld_safe</strong></span> is given in <a target="_top" href="http://dev.mysql.com/doc/topic-guides/en/mysqld-safe.html"><span><strong class="command">mysqld_safe</strong></span></a>.</p> 
 <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
  <h3 class="title">Note</h3> 
  <p>The accounts that are listed in the MySQL grant tables initially have no passwords. After starting the server, you should set up passwords for them using the instructions in <a target="_top" href="http://dev.mysql.com/doc/topic-guides/en/post-installation.html">Post-Installation Setup and Testing</a>.</p> 
 </div> 
</div> 
<div>
 <a href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/installing-binary.html#">Top</a> / 
 <a title="MySQL and Linux/Unix" rel="prev" href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/index.html">Previous</a> / 
 <a title="2 Installing MySQL from RPM Packages on Linux" rel="next" href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/linux-rpm.html">Next</a> / 
 <a title="MySQL and Linux/Unix" rel="up" href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/index.html">Up</a> / 
 <a rel="contents" href="http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.0/en/index.html">Table of Contents</a>
</div></div></body></html>