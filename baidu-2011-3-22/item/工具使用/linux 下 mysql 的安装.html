<html><head><title><div class="tit">
  linux 下 mysql 的安装
</div></title></head><body><div id='tit'>linux 下 mysql 的安装</div><div id='cate'>工具使用</div><div id='date'>2008年10月06日 星期一 09:26 P.M.</div><div id='page'>94</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/78b1b6518e60481e377abe4f.html'>http://hi.baidu.com/hxzon/blog/item/78b1b6518e60481e377abe4f.html</a><div id='cnt'><p>linux 下 mysql 的安装</p> 
<p>按以下完装可以解决 MYSQL 中文乱码问题 安装字体为GBK编码,我在linux 9 和linux as 3,linux as 4 下成功安装多次。<br /> #groupadd mysql<br /> #useradd -g mysql mysql<br /> #tar -zxvf mysql-5.0.27.tar.gz<br /> #cd mysql-5.0.27<br /> #./configure -prefix=/opt/mysql -with-charset=gbk -with-extra-charsets=all<br /> #make<br /> #make install<br /> #cp support-files/my-medium.cnf /etc/my.cnf或者cp /opt/mysql/share/mysql/my-medium.cnf /etc/my.cnf<br /> #./scripts/mysql_install_db --user=mysql //初试化表并且规定用mysql用户来访问。初始化表以后就开始给mysql和root用户设定访问权限</p> 
<p><br /> 设置用户权限(安装完后的路径，即执行./configure 时的 -prefix=/opt/mysql 路径下)<br /> #chown -R root .<br /> #chown -R mysql var<br /> #chown -R mysql var/.<br /> #chgrp -R mysql .</p> 
<p> </p> 
<p># cp support-files/mysql.server /etc/rc.d/init.d/mysqld <br /> # chmod 700 /etc/init.d/mysqld<br /> # chkconfig --add mysqld <br /> # chkconfig --level 345 mysqld on <br /> # service mysqld start <br /> # netstat -atln&nbsp;&nbsp; 查看mysql端口3306是否打开，如果打开说明安装成功</p> 
<p><br /> 更改root用户密码<br /> #./bin/mysqladmin -u root password 'new passwd'</p> 
<p><br /> use 库名； 切换库名<br /> create table 表名 (字段设定列表)； 创建表<br /> create database 库名; 创建数据库</p> 
<p><br /> #grant select,insert,update,delete,index,alter,create,drop,grant,references,reload,shutdown,process,file,reload,shutdown,precess on *.* to <a href="mailto:user_1@&quot;%">user_1@&quot;%</a>&quot; Identified by '123';</p> 
<p>#grant select,insert,update,delete,index,alter,create,drop on 库名.表名 to <a href="mailto:user_1@&quot;%">user_1@&quot;%</a>&quot; Identified by &quot;123&quot;;</p> 
<p>grant select,insert,update,delete,index,alter,create,drop on nic205374.* to <a href="mailto:nic205374@&quot;%">nic205374@&quot;%</a>&quot; Identified by &quot;123456&quot;;</p> 
<p>grant select,insert,update,delete,index,alter,create,drop on globus.* to <a href="mailto:grid@&quot;%">grid@&quot;%</a>&quot; Identified by &quot;grid&quot;;</p> 
<p>访问USER表<br /> use mysql<br /> select * from user;</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>关于 ./mysql: Character set 'gbk' is not a compiled character set and is not specified in the =/opt/mysql/share/mysql/charsets/Index.xml' file 问题</p> 
<p>一般情况下不会出现以上问，如果真的出现以上问题可以这样去解决：</p> 
<p>configure生成Makefile时指定默认的编码和collation，即用如下选项配置mysql<br /> ./configure --prefix=/opt/mysql --with-charset=gbk --with-collation=gbk_chinese_ci --with-extra-charsets=all</p> 
<p>其中多了一项 --with-collation=gbk_chinese_ci，其它步骤正常。<br /> -------------------------------------------------------------------------------------------<br /> 安装MySQL <br /> 下载地址:http://dev.mysql.com/downloads/mysql/5.0.html <br /> 下载好了后，我们可以开始正式的安装了。假设你把所有必须的源码或者包都放在了/tmp下。如果你下载的是RPM包的话，那比较简单；如果你下载的是二进制包（&shy;你没有rpm程序或者你想自定义的话），那么会稍微麻烦一点。 <br /> RPM包安装 <br /> 你必须成为root用户才能使用rpm安装程序，以下是安装过程： <br /> $ cd /tmp <br /> $ su <br /> # rpm -Uvh MySQL*(安装和MySQL相关的所有包） <br /> 这将安装你下载的所有3个MySQL包。如果你的系统是RedHat <br /> Linux的话，建议使用RPM安装方式，因为所有的工作都由rpm程序帮你搞好了。 <br /> 源码安装 <br /> 相对于用RPM安装来讲，用二进制源码安装是稍微麻烦了点。但是我们可以在安装脚本中可以自定义安装的相关参数，而不用象rpm方式只能安装默认的来安装。 <br /> 安装二进制源代码 <br /> 如果你下载的是二进制源代码，它的名字类似于： <br /> mysql-3.22.21-pc-linux-gnu-i686.tar.gz。你必须成为root用户，然后解压到 <br /> /usr/local目录，操作步骤如下： <br /> $ cd /usr/local <br /> $ su <br /> # tar -zxvf /tmp/mysql-3.22.21-pc-linux-gnu-i686.tar.gz <br /> 在所有文件解压完后，一个名字叫mysql-3.22.21-pc-linux-gnu-i686的目录将被创建出来。我们为这个目录做个符号链接，并给它一个&shy;更友好的名字mysql <br /> （免得叫mysql-3.22.21-pc-linux-gnu-i686这么长）： <br /> # ln -s mysql-3.22.21-pc-linux-gnu-i686 mysql <br /> 如果以后有新版本的MySQL的话，你可以仅仅将源码解压到新的路径，然后只需要做个符号链接就可以了。这样非常方便，数据也更加安全。 <br /> 建立一个MySQL 用户 <br /> 好，现在我们将建立一个能运行MySQL守护程序的用户帐号，并且所有MySQL文件都归此帐户拥有。使用 <br /> Linuxconf或者useradd命令去添加一个叫 mysql <br /> 的帐号，在添加之前，确保没有人注册了这个帐户，还要暂时禁止login功能（不过一般都是在没有其他人登陆的情况下调试机器，因此这个步骤可免） <br /> 为MySQL做准备 <br /> 首先让我们将MySQL目录和文件的拥有权改成 mysql <br /> 用户和root组： <br /> # cd /usr/local <br /> # chown -R mysql:root mysql-3.22.21-pc-linux-gnu-i686 mysql <br /> 然后运行一个小脚本程序，以建立初始化的MySQL数据库。请以一个mysql <br /> 用户的身份完成这个任务，这也是我们能够直接使用这个帐户的唯一机会。 <br /> # su mysql <br /> $ cd mysql <br /> $ scripts/mysql_install_db <br /> $ exit <br /> 如果没有任何出错信息显示的话，那就可以了。 <br /> 自动运行MySQL <br /> 在MySQL二进制包里面，有一个叫myslq.server的启动脚本程序。把它复制到/etc/rc.d/init.d目录里面： <br /> # cd /etc/rc.d/init.d <br /> # cp /usr/local/mysql/support-files/mysql.server mysql <br /> 接着把它的属性改为&quot;x&quot;（executable，可执行） <br /> # chmod +x mysql <br /> 最后，运行chkconfig把MySQL添加到你系统的启动服务组里面去。 <br /> # /sbin/chkconfig --del mysql <br /> # /sbin/chkconfig --add mysql <br /> 测试MySQL <br /> MySQL里面有一个简单的数据库例子test <br /> ，而且它的内部数据库一直保持对权限和帐户的监视，因而先运行mysql看看是否可以工作。 <br /> 首先启动MySQL： <br /> # /etc/rc.d/init.d/mysql start <br /> 如果一切正常，你将看到以下的信息出现： <br /> Starting mysqld daemon with databases from /var/lib/mysql <br /> 如果你安装的是RPM包，那么程序大都安装在/usr/local/mysql/bin。在此目录下运行客户端程序： <br /> # mysql <br /> 然后你可以看到屏幕显示出以下信息： <br /> Welcome to the MySQL monitor. Commands end with ; or \g. <br /> Your MySQL connection id is 2 to server version: 3.22.21 <br /> Type 'help' for help. <br /> mysql&gt; <br /> 接着，用show databases命令可以将安装的数据库列出来： <br /> mysql&gt; show databases; <br /> 你就可以看到： <br /> +----------+ <br /> | Database | <br /> +----------+ <br /> | mysql | <br /> | test | <br /> +----------+ <br /> 2 rows in set (0.00 sec) <br /> 如果一切正常的话，那说明MySQL可以完全工作了!恭喜你！如果要退出程序，输入：exit <br /> mysql&gt; exit; <br /> Bye <br /> 更改管理员密码 <br /> 在一切正常后，要做的第一件事情是更改管理员的密码。你可以运行mysqladmin <br /> （请注意，此命令不一定在你的path中，所以最好是转到此命令的目录中直接执行）： <br /> # mysqladmin -u root password newpassword <br /> 此命令把root用户的口令变成newpassword。当然你可以把口令换成其它，因为这个很容易破解。<br /> ----------------------------------------------------------------------------------------</p> 
<p>1.Add a login user and group for `mysqld' to run as:为‘mysqld’增添一个登陆用户和组<br /> shell&gt; groupadd mysql<br /> shell&gt; useradd -g mysql mysql</p> 
<div class="ad0"> 
 <div>
  &lt;iframe name=&quot;google_ads_frame&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; src=&quot;http://pagead2.googlesyndication.com/pagead/ads?client=ca-pub-1572879403720716&amp;dt=1223298763296&amp;hl=zh-CN&amp;lmt=1206196523&amp;alternate_ad_url=http%3A%2F%2Fwww.pcdog.com%2Fjs%2F336.htm&amp;prev_fmts=468x15_0ads_al_s&amp;format=336x280_as&amp;output=html&amp;correlator=1223298763203&amp;channel=2957605308&amp;url=http%3A%2F%2Fwww.pcdog.com%2Fedu%2Fmysql%2F18%2F10%2Fz231831.html&amp;color_bg=F5FAFA&amp;color_text=000000&amp;color_link=1F3A87&amp;color_url=0000FF&amp;color_border=F5FAFA&amp;ad_type=text_image&amp;ea=off&amp;ref=http%3A%2F%2Fwww.baidu.com%2Fs%3Flm%3D0%26si%3D%26rn%3D10%26tn%3Davant_1_dg%26ie%3Dgb2312%26ct%3D0%26wd%3Dlinux%25B0%25B2%25D7%25B0MySQL%26pn%3D10%26ver%3D0%26cl%3D3&amp;frm=0&amp;cc=100&amp;ga_vid=1819881757.1223298763&amp;ga_sid=1223298763&amp;ga_hid=1359676526&amp;flash=9.0.124.0&amp;u_h=768&amp;u_w=1024&amp;u_ah=738&amp;u_aw=1024&amp;u_cd=32&amp;u_tz=480&amp;u_java=true&quot; frameborder=&quot;0&quot; width=&quot;336&quot; scrolling=&quot;no&quot; height=&quot;280&quot; allowtransparency=&quot;allowtransparency&quot;&gt;
 </div> 
</div> 
<p>2.解压<br /> shell&gt; gunzip &lt; mysql-5.0.15.tar.gz | tar -xvf -<br /> shell&gt; cd mysql-5.0.15</p> 
<p>3.Configure the release and compile everything:配置和编译给configure分配可执行文件<br /> shell&gt; chmod +x configure<br /> 改变字符集为 GBK [默认字符集为ISO-8859-1(Latin1)]<br /> shell&gt; ./configure --prefix=/usr/local/mysql --with-charset=gbk<br /> shell&gt; make<br /> (字符集还有big5、cp1251、cp1257、czech、danish、dec8、<a target="_blank" href="http://www.pcdog.com/special/1038/index.html">dos</a>、euc_kr、gb2312 gbk、german1、hebrew、 hp8、hungarian、koi8_ru、koi8_ukr、latin1、latin2、sjis、swe7、tis620、ujis、usa7、win1251或win1251ukr)</p> 
<p>4.安装所有东西<br /> shell&gt; make install</p> 
<p>5.如果你想安装选项文件，使用当前存在的‘support-files’ 文件夹下的作为模板，例如：<br /> shell&gt; cp support-files/my-medium.cnf /etc/my.cnf</p> 
<p>6.如果想mysqld每次开机自动启动的话。cp -r support-files/mysql.server /etc/init.d/就行了<br /> shell&gt; cp -r support-files/mysql.server /etc/init.d/mysql<br /> shell&gt; cd /etc/rc.d/init.d<br /> shell&gt; chmod +x mysql<br /> shell&gt; /sbin/chkconfig --del mysql<br /> shell&gt; /sbin/chkconfig --add mysql</p> 
<p>7.进入安装目录<br /> shell&gt; cd /usr/local/mysql</p> 
<p>8.如果你以前没有安装过MySQL，你必须创建一个MySQL准许的表<br /> shell&gt; bin/mysql_install_db --user=mysql</p> 
<p>9.将程序的所有权限给‘root’ ，并且把数据目录的所有权给可以运行‘mysqld’的用户。假设MySQL的安装目录是（‘/usr/local/mysql’），命令如下所示：<br /> 把文件拥有权给‘root’<br /> shell&gt; chown -R root .<br /> 把数据目录拥护权给‘mysql’用户<br /> shell&gt; chown -R mysql var<br /> 把组的权限给'mysql'组<br /> shell&gt; chgrp -R mysql .</p> 
<p>10.万事具备后，你就可以按照下面的命令测试并运行你的MySQL了：<br /> shell&gt; /usr/local/mysql/bin/mysqld_safe --user=mysql &amp;<br /> shell&gt; service mysql start</p> 
<p>11.在一切正常后，要做的第一件事情是更改管理员的密码。你可以运行mysqladmin （请注意，此命令不一定在你的path中，所以最好是转到此命令的目录中直接执行）：<br /> shell&gt; cd bin<br /> shell&gt; ./mysqladmin -u root password *********</p> 
<p>12.运行其他用户访问本机：<br /> shell&gt; ./mysql -u root -p mysql<br /> --------------------这里输入你刚才修改的管理员密码<br /> mysql&gt; update user set host='' where host='localhost' and user='root';<br /> mysql&gt; exit<br /> Bye</p> 
<p>13.修改mysql数据库端口号<br /> shell&gt; vi /etc/my.cnf<br /> --------------------修改里面的 port=**** 为你需要的端口号</p> 
<p>14.重启应用<br /> shell&gt; service mysql restart</p></div></body></html>