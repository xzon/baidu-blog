<html><head><title><div class="tit">
  自己平时积累的一些PHP及相关建站函数
</div></title></head><body><div id='tit'>自己平时积累的一些PHP及相关建站函数</div><div id='cate'>异域</div><div id='date'>2008年03月09日 星期日 10:27 P.M.</div><div id='page'>165</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/7794b7351fbf3e8fa61e1290.html'>http://hi.baidu.com/hxzon/blog/item/7794b7351fbf3e8fa61e1290.html</a><div id='cnt'><p>自己平时积累的一些PHP及相关建站函数</p> 
<p><font color="#0000ff" size="3">古语有云:学而不思则罔,思而不学则怠,还有一句叫温故而知新,学的东西太多,不一定都能完完整整的记住,所以我把平时积累的PHP建站相关资料写到自己博客上来,有空多看看复习下,同时也把自己的经验分享出来,供于大家!</font></p> 
<p><font color="#0000ff" size="3">1.获取时间:$addtime=date(&quot;y-m-d h:i:s&quot;);</font></p> 
<p><font color="#0000ff" size="3">2.点击出现删除代码确认对话框:&lt;a href=&quot;del.php&quot; onClick=&quot;return confirm('确定要删除分类么?');&quot;&gt;&lt;img src=&quot;../img/del.gif&quot; border=&quot;0&quot; alt=&quot;删除&quot;&gt;&lt;/a&gt;</font></p> 
<p><font color="#0000ff" size="3">3.获取客户端IP地址:$ip=$_SERVER['REMOTE_ADDR'];</font></p> 
<p><font color="#0000ff" size="3">4.验证错误后页面跳转返回上一页:echo&quot;&lt;script language=javascript&gt;alert('原始密码输入错误,请重新填写!');window.location.href='javascript:history.back(1)'&lt;/script&gt;&quot;;//返回到上一页</font></p> 
<p><font color="#0000ff" size="3">返回上一页代码:&lt;input TYPE=&quot;button&quot; VALUE=&quot;返回上一步&quot; ONCLICK=&quot;history.back(-1)&quot;&gt;</font></p> 
<p><font color="#0000ff" size="3">5.获取action的值(不论是POST还是GET方式都可以)$action = ($HTTP_POST_VARS['action']) ? $HTTP_POST_VARS['action'] : $HTTP_GET_VARS['action'];</font></p> 
<p><font color="#0000ff" size="3">6.段落文字附值于变量$content=&lt;&lt;&lt;EOT</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.这是一段文字的&quot;第一行&quot;,</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.这是一段文字的&quot;第二行&quot;;</font></p> 
<p><font color="#0000ff" size="3">EOT;</font></p> 
<p><font color="#0000ff" size="3">$content=nl2br($content);//$content显示如上两行文字,且段落格式与之一致</font></p> 
<p><font color="#0000ff" size="3">7.HTML语言附值于变量$content=&lt;&lt;&lt;ODC</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;html&gt;&lt;head&gt;</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;HTML语言附值于变量示例&lt;/title&gt;</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/head&gt;</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;body&gt;....&lt;/body&gt;..</font></p> 
<p><font color="#0000ff" size="3">ODS;</font></p> 
<p><font color="#0000ff" size="3">return $content;//$content显示如上完整的HTML代码</font></p> 
<p><font color="#0000ff" size="3">8.配置数据库信息并写进config.php</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp; $dbhost = $HTTP_POST_VARS['dbhost'];<br /> &nbsp;&nbsp;&nbsp;&nbsp; $dbuser = $HTTP_POST_VARS['dbuser'];<br /> &nbsp;&nbsp;&nbsp;&nbsp; $dbpassword = $HTTP_POST_VARS['dbpassword'];<br /> &nbsp;&nbsp;&nbsp;&nbsp; $dbname = $HTTP_POST_VARS['dbname'];</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp; $fp = fopen('config.php', 'r');<br /> &nbsp;&nbsp;&nbsp;&nbsp; $configfile = fread($fp, filesize('config.php'));<br /> &nbsp;&nbsp;&nbsp;&nbsp; fclose($fp);</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp; $configfile = preg_replace(&quot;/[$]dbhost\s*\=\s*[\&quot;'].*?[\&quot;']/is&quot;, &quot;\$dbhost = '$dbhost'&quot;, $configfile);<br /> &nbsp;&nbsp;&nbsp;&nbsp; $configfile = preg_replace(&quot;/[$]dbuser\s*\=\s*[\&quot;'].*?[\&quot;']/is&quot;, &quot;\$dbuser = '$dbuser'&quot;, $configfile);<br /> &nbsp;&nbsp;&nbsp;&nbsp; $configfile = preg_replace(&quot;/[$]dbpassword\s*\=\s*[\&quot;'].*?[\&quot;']/is&quot;, &quot;\$dbpassword = '$dbpassword'&quot;, $configfile);<br /> &nbsp;&nbsp;&nbsp;&nbsp; $configfile = preg_replace(&quot;/[$]dbname\s*\=\s*[\&quot;'].*?[\&quot;']/is&quot;, &quot;\$dbname = '$dbname'&quot;, $configfile);</font></p> 
<p><font color="#0000ff" size="3">&nbsp;&nbsp;&nbsp;&nbsp; $fp = fopen('config.php', 'w');<br /> &nbsp;&nbsp;&nbsp;&nbsp; fwrite($fp, trim($configfile));<br /> &nbsp;&nbsp;&nbsp;&nbsp; fclose($fp);</font></p> 
<p><font color="#0000ff" size="3"><a href="http://hi.baidu.com/cpuyz/blog">http://hi.baidu.com/cpuyz/blog</a></font></p></div></body></html>