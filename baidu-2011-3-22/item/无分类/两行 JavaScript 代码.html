<html><head><title><div class="tit">
  两行 JavaScript 代码
</div></title></head><body><div id='tit'>两行 JavaScript 代码</div><div id='cate'>无分类</div><div id='date'>2010年08月09日 星期一 01:49 P.M.</div><div id='page'>10</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/75a36d6356f38b6d0d33faf4.html'>http://hi.baidu.com/hxzon/blog/item/75a36d6356f38b6d0d33faf4.html</a><div id='cnt'><title></title> 
<p>两行 JavaScript 代码</p> 
<p>最近看到了两行 <span href="tag.php?name=Java" onxxxxx="tagshow(event)" class="t_tag">Java</span>Script <span href="tag.php?name=%B4%FA%C2%EB" onxxxxx="tagshow(event)" class="t_tag">代码</span>，很受启发。<br /> 1. 封装 DOM 属性<br /> 在 <span href="tag.php?name= " onxxxxx="tagshow(event)" class="t_tag">JavaScript</span> 中，我们可以获取<span href="tag.php?name=HTML" onxxxxx="tagshow(event)" class="t_tag">HTML</span>元素的属性值，例如 element.id 。但是，因为 for 和 class 是 JavaScript 中的关键字，所以在 JavaScript 中这两个属性名称分别用 htmlFor 和 className 代替，于是在封装的时候需要先对这两个属性进行特殊判断。通常，我们会这么写：</p> 
<pre>&nbsp;function getAttr(el, attrName){<br />var attr;<br />if ('for' == attrName) {<br />attr = 'htmlFor';<br />} else if ('class' == attrName) {<br />attr = 'className';<br />} else {<br />attr = attrName;<br />}<br />}</pre> 
<p>但是我在精通 JavaScript 发现了一种很妙的写法， John Resig 是这么写的：</p> 
<pre>&nbsp;function getAttr(el, attrName){<br />var attr = {'for':'htmlFor', 'class':'className'}[attrName] || attrName;<br />}</pre> 
<p>构建了一个<span href="tag.php?name=%B6%D4%CF%F3" onxxxxx="tagshow(event)" class="t_tag">对象</span>来做判断，实在是巧妙！这样一来节省了很多代码，也就减少了BUG出现的可能性，而且也没有丧失其可读性，是很值得<span href="tag.php?name=%D1%A7%CF%B0" onxxxxx="tagshow(event)" class="t_tag">学习</span>的。</p> 
<p>2. 交换两个变量的值<br /> 这个问题相信学过一点编程的人都知道，一般来说我们会这么写：</p> 
<pre>var foo = 1;<br />var bar = 2; var temp = foo;<br />foo = bar;<br />bar = temp;</pre> 
<p>通过一个临时变量来做<span href="tag.php?name=%CA%FD%BE%DD" onxxxxx="tagshow(event)" class="t_tag">数据</span>的缓冲，很直观。但是否可以不使用临时变量呢？看一下下面的这行代码：</p> 
<pre>foo = [bar, bar=foo][0];</pre> 
<p>没有使用到临时变量，而是利用了数组。实在是妙！<br /> <br /> 上面这两行代码看上去很简单，不像一些诸如高级算法之类的代码那么显眼，但是，如果不是对<span href="tag.php?name=%D3%EF%D1%D4" onxxxxx="tagshow(event)" class="t_tag">语言</span>本身非常了解，如果没有多年的编程经验和思考，如果对数据结构不熟悉，绝对不可能写出这样的代码。或许这种对每一行代码的深思熟虑，正是大师和平庸<span href="tag.php?name=%B3%CC%D0%F2%D4%B1" onxxxxx="tagshow(event)" class="t_tag">程序员</span>之间的区别所在。<br /> <br /> 另外，这也从侧面说明了：编程的时候不要忘记思考，否则你就只是一个完成工作的机器。所以，如果你现在的工作只是让你疯狂做业务而不给你思考和学习的时间，别犹豫，换一个。</p></div></body></html>