<html><head><title><div class="tit">
  广播风暴（Broadcast Storm）
</div></title></head><body><div id='tit'>广播风暴（Broadcast Storm）</div><div id='cate'>硬件&middot;网络</div><div id='date'>2009年07月29日 星期三 02:28 P.M.</div><div id='page'>40</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/1b080af4182949e67709d75c.html'>http://hi.baidu.com/hxzon/blog/item/1b080af4182949e67709d75c.html</a><div id='cnt'><div>
 广播风暴（Broadcast Storm）
 <br /> ★当主机系统响应一个在网上不断循环的报文分组或者试图响应一个没有应答的系统时就会发生广播风暴。一般为了改变这种状态，请求或者响应分组源源不断地产生出来，常使情况变得更糕。随着网络上分组数目的增加，拥塞会随之出现，从而降低网络的性能以至于使之陷入瘫痪。
 <br /> ★一个数据帧或包被传输到本地网段 (由广播域定义)上的每个节点就是广播；由于网络拓扑的设计和连接问题，或其他原因导致广播在网段内大量复制，传播数据帧，导致网络性能下降，甚至网络瘫痪，这就是广播风暴。 
 <br /> ★其实广播风暴多是出现在以hub连接而且是环形连接的局域网中，如果用路由器和交换机的话，由于路由器和交换机是树形连接设计的，可以有效的防止广播风暴的产生。 
 <br /> ★但是在主干网上，路由器的主要作用是路由选择。主干网上的路由器，必须知道到达所有下层网络的路径。这需要维护庞大的路由表，并对连接状态的变化作出尽可能迅速的反应。路由器的故障将会导致严重的信息传输问题。在园区网内部，路由器的主要作用是分隔子网。随着网络规模的不断扩大，局域网演变成以高速主干和路由器连接的多个子网所组成的园区网。在其中各个子网在逻辑上独立，而路由器就是唯一能够分隔它们的设备，它负责子网间的报文转发和广播隔离，在边界上的路由器则负责与上层网络的连接。 
 <br /> 解决办法
 <br /> 1、有效分割过大网络，使广播包只在有限的范围内传播。
 <br /> 2、使用网关，对数据包进行分拣。
 <br /> 3、使用路由器，隔离不同的子网。
 <br /> ========================
 <br /> 网吧行业竞争的加剧，出现了一些规模比较大的网吧。目前在网吧行业内，百台以上的网吧已经随处可见了。由于网吧在进行网络建设时，缺乏专业的网络技术支持，使得网吧的网络故障频繁出现。在网吧的网络故障中，由于网络广播风暴引起的网络故障，占网吧网络故障的九成以上。网络广播风暴到底是如何形成的呢？
</div> 
<div> 
</div> 
<div>
 要想正确理解广播风暴的具体含义，我们必须了解一下工作在网络中的网络设备的工作原理。目前，工作在网吧网络中的网络设备，基本上都是交换机了。对于交换机，大家并没有真正的了解其工作原理。
</div> 
<div> 
</div> 
<div>
 一、交换机基础知识
</div> 
<div> 
</div> 
<div>
 1、交换机的定义：交换机是一种基于MAC（网卡的硬件地址）识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。
</div> 
<div> 
</div> 
<div>
 现在，交换机已经替代了我们原来比较熟悉的网络设备集线器，又称Hub。但是这并不意味着，我们不需要了解Hub的基本知识。
</div> 
<div> 
</div> 
<div>
 2、集线器的定义：集线器（HUB）属于数据通信系统中的基础设备，它和双绞线等传输介质一样，是一种不需任何软件支持或只需很少管理软件管理的硬件设备。它被广泛应用到各种场合。集线器工作在局域网(LAN)环境，像网卡一样，应用于OSI参考模型第一层，因此又被称为物理层设备。集线器内部采用了电器互联，当维护LAN的环境是逻辑总线或环型结构时，完全可以用集线器建立一个物理上的星型或树型网络结构。在这方面，集线器所起的作用相当于多端口的中继器。其实，集线器实际上就是中继器的一种，其区别仅在于集线器能够提供更多的端口服务，所以集线器又叫多口中继器。
</div> 
<div> 
</div> 
<div>
 二、交换机与集线器的区别
</div> 
<div> 
</div> 
<div>
 现在，我们经常会存在这样一个技术误区，我们用的是交换机，数据全部是点对点转发的，为什么还会产生广播风暴呢？我们在充分了解了交换机与集线器的功能区别后，就会明白，使用交换机作为网络设备的网络，为什么会出现广播风暴。
</div> 
<div> 
</div> 
<div>
 1、交换机与集线器的本质区别：用集线器组成的网络称为共享式网络，而用交换机组成的网络称为交换式网络。 共享式以太网存在的主要问题是所有用户共享带宽，每个用户的实际可用带宽随网络用户数的增加而递减。这是因为当信息繁忙时，多个用户可能同时“争用”一个信道，而一个信道在某一时刻只允许一个用户占用，所以大量的用户经常处于监测等待状态，致使信号传输时产生抖动、停滞或失真，严重影响了网络的性能。
</div> 
<div> 
</div> 
<div>
 2、在交换式以太网中，交换机提供给每个用户专用的信息通道，除非两个源端口企图同时将信息发往同一个目的端口，否则多个源端口与目的端口之间可同时进行通信而不会发生冲突。通过实验测得，在多服务器组成的LAN 中，处于半双工模式下的交换式以太网的实际最大传输速度是共享式网络的1.7倍，而工作在全双工状态下的交换式以太网的实际最大传输速度可达到共享式网络的3.8倍。 交换机只是在工作方式上与集线器不同，其他的如连接方式、速度选择等与集线器基本相同，目前的交换机同样从速度上分为10M、100M和1000M几种，所提供的端口数多为8口、16口和24口几种。交换机在局域网中主要用于连接工作站、Hub、服务器或用于分散式主干网。
</div> 
<div> 
</div> 
<div>
 三、产生广播风暴的原因 
 <br /> 通过对以上网络设备的了解，我们就可以简单分析出来，网络产生广播风暴的原因了。一般情况下，产生网络广播风暴的原因，主要有以下几种： 
 <br /> 1、网络设备原因：我们经常会有这样一个误区，交换机是点对点转发，不会产生广播风暴。在我们购买网络设置时，购买的交换机，通常是智能型的Hub，却被奸商当做交换机来卖。这样，在网络稍微繁忙的时候，肯定会产生广播风暴了。 
 <br /> 2、网卡损坏：如果网络机器的网卡损坏，也同样会产生广播风暴。损坏的网卡，不停向交换机发送大量的数据包，产生了大量无用的数据包，产生了广播风暴。由于网卡物理损坏引起的广播风暴，故障比较难排除，由于损坏的网卡一般还能上网，我们一般借用Sniffer局域网管理软件，查看网络数据流量，来判断故障点的位置。 
 <br /> 3、网络环路：曾经在一次的网络故障排除中，发现一个很可笑的错误，一条双绞线，两端插在同一个交换机的不同端口上，导致了网络性能急骤下降，打开网页都非常困难。这种故障，就是典型的网络环路。网络环路的产生，一般是由于一条物理网络线路的两端，同时接在了一台网络设备中。 
 <br /> 4、网络病毒：目前，一些比较流行的网络病毒，Funlove、震荡波、RPC等病毒，一旦有机器中毒后，会立即通过网络进行传播。网络病毒的传播，就会损耗大量的网络带宽，引起网络堵塞，引起广播风暴。 
 <br /> 5、黑客软件的使用：目前，一些上网者，经常利用网络执法官、网络剪刀手等黑客软件，对网吧的内部网络进行攻击，由于这些软件的使用，网络也可能会引起广播风暴。 
 <br /> 要想做到对故障的快速判断，良好扎实的基础知识，是不可缺少的。因此大家在日后的学习中，不要忽略了对基础知识的学习！ 
 <br /> ==========================
 <br /> 在实际工作中，造成网络故障的原因很多，但是80%的网络故障是由网络广播风暴引起的，本文结合实际工作针对局域网广播风暴的产生原因以及相关防范措施进行一些探讨。 
 <br /> 一、广播风暴及其危害 
 <br /> 作为发现未知设备的主要手段，广播在网络中起着非常重要的作用。一个数据帧或包被传输到本地网段(由广播域定义)上的每个节点就是广播。在广播帧中，帧头中的目的MAC地址是“FF.FF.FF.FF.FF.FF”,代表网络上所有主机网卡的MAC地址。 
 <br /> 随着网络中计算机数量的增多,广播包的数量会急剧增加，网络长时间被大量的广播数据包所占用，当广播数据包的数量达到30%时,网络的传输速率将会明显下降,使正常的点对点通信无法正常进行,导致网络性能下降,甚至网络瘫痪，这就是广播风暴。 
 <br /> 广播风暴的危害:广播风暴现象是最常见的数据洪泛(flood）之一，是一种典型的雪球效应。当广播风暴产生时，以太介质几乎充满广播数据包，网络设备接口上统计的报文速率达到106数量级，设备处理器高负荷运转。不仅网络设备会受到影响，而且所有的主机都要接收链路层的广播数据包，因而受到危害。每秒数万级的数据包通常都会使网卡工作异常繁忙，操作系统反映迟缓，网络通讯严重受阻，严重地危害了网络的正常运行。 
 <br /> 二、广播风暴产生的原因 
 <br /> 形成广播风暴的原因有很多，这里主要介绍以下几种: 
 <br /> 1.网络设备 
 <br /> 中、小型办公网络、网吧、校园网络大量采用了集线器（Hub）和智能型的Hub。用集线器组成的网络称为共享式网络，由于使用载波侦听多路访问/冲突检测（CSMA/CD)机制，随着网络主机数目不断增加，不足之处就表现得很突出了，当广播报文较多的情况下，广播风暴会造成网络崩溃。 
 <br /> 2.网卡或网络设备损坏 
 <br /> 如果网络主机的网卡或网络设备的端口损坏，也同样会产生广播风暴。当某块网卡或网络设备的某个端口损坏后，可能向网络发送大量广播帧和非法帧，产生了大量无用的数据包，占用大量带宽，使网络运行速度明显变慢，严重时产生广播风暴。 
 <br /> 3.网络环路 
 <br /> 在网络管理过程中，如果对网络拓扑结构不清楚，在安装配置设备过程中的疏漏，可能会出现一条物理网络线路的两端，同时接在了一台网络设备中，或虽是经过了不同的设备但是还是形成了环路。广播数据包在网络中反复大量传送，这样就会导致广播风暴，造成网络阻塞甚至瘫痪。 
 <br /> 4.网络病毒 
 <br /> 目前，网络中病毒较为猖獗，许多病毒和木马程序比如Funlove、震荡波、RPC等病毒也可以引起广播风暴。网络中一旦有一台机器中毒，会立即通过网络进行传播。网络病毒的传播，就会损耗大量的网络带宽，引起网络堵塞，产生广播风暴。 
 <br /> 5.黑客软件的使用 
 <br /> 一些上网者,经常利用网络执法官、网络剪刀手等黑客软件,对网络进行攻击,由于这些软件的使用,网络也可能会引起广播风暴。 
 <br /> 三、解决方案和防范措施 
 <br /> 解决广播风暴要从源头入手，采用监控和管理两个方向进行解决。 
 <br /> 1.使用较好的网络设备及保证线缆的质量 
 <br /> 在资金允许的条件下使用高档次的网络设备，保证网络通信质量。从交换机到网卡到线路都要采用高质量的，这样才能从硬件上减少故障发生的机率。 
 <br /> 2.掌握网络的拓扑结构，设备的连接关系避免出现环路 
 <br /> 在一些比较复杂的网络中，经常会有多余的备用线路，如无意间连上时会构成回路。比如网线从网络中心接到计算机一室，再从计算机一室接到计算机二室。同时从网络中心又有一条备用线路直接连到计算机二室，若这几条线同时接通，则构成回路，数据包会不断发送和校验数据，从而影响整体网速。这种情况查找比较困难。为避免这种情况发生，最好在铺设网线时养成良好的习惯:网线打上明显的标签，有备用线路的地方要做好记载。当怀疑有此类故障发生时,一般采用分区分段逐步排除的方法。 
 <br /> 3.在网络中快速定位网络故障点 
 <br /> 产生网络广播风暴故障点的查找比较困难，如网卡或网络设备物理损坏引起的广播风暴，这类故障比较难排除。网卡或网络设备出现了软故障时，一般来说还能工作，时好时坏。 
 <br /> 从源头入手采用监控和管理两方向进行解决,网络管理人员可以使用Windows自带的网络监视器宏观地监控网络,了解网络运行的大致情况。使用网络流量分析软件和协议分析软件如sniffer，ethereel等软件观察网内计算机的通信状况,可以观察到广播帧的数量,所占比例,并且可以进行迅速的定位,找到广播风暴的源头所在,也可以利用Mrtg等流量监控工具动态监测各网络设备的流量。 
 <br /> 4.安装网络版杀毒软件并及时升级 
 <br /> 要安装网络版杀毒软件并及时升级，计算机也要及时升级、安装系统补丁程序，同时卸载不必要的服务、关闭不必要的端口，以提高系统的安全性和可靠性。 
 <br /> 5.采用VLAN技术 
 <br /> VLAN是一种将局域网交换机从逻辑上划分成一个个网段，从而实现虚拟工作组的新兴数据交换技术。VLAN的目的是为了解决以太网的广播问题和安全性而提出的一种协议，它在以太网数据帧的基础上增加了一个字段VLAN ID，通过VLAN ID 把物理的交换机划分成若干个不同的VLAN。 
 <br /> VLAN在交换机上的实现方法，大致可以分为基于交换机端口、基于计算机MAC地址和基于IP地址三类。 
 <br /> （1)基于交换机端口划分VLAN 
 <br /> 这是最常应用的一种VLAN划分方法，应用也最为广泛、最为有效。基于这种划分方法，将交换机上的物理端口分成若干个组，每个组构成一个虚拟网，每个虚拟网都相当于一个独立的交换机。这种划分方法并不局限于一台交换机，还可以将那些通过堆叠或级联方式连接在一起的不同交换机上的节点划分在一个子网中。这种划分方法的优点是简单、容易实现，从一个端口发出的广播，直接发送到VLAN内的其他端口，也便于直接监控。它的缺点是自动化程度低、灵活性差。比如，不能再给定的端口上支持一个以上的VLAN；在一个网络站点迁移时，若旧端口不属于同一个VLAN，则用户必须对该站点重新进行网络地址配置。 
 <br /> （2)基于机器的MAC地址划分VLAN 
 <br /> 这种划分VLAN方法是根据每个联网主机的MAC地址来配置给主机属于那个虚拟网。 
 <br /> 这种VLAN划分方法的最大优点就是当用户物理位置移动时，即从一个交换机换到其他交换机时，VLAN不用重新配置，因为它是基于用户，而不是基于交换机端口的。这种方法的缺点是初始化时，必须将所有用户的MAC地址进行登记和配置，如果有几百个甚至上千个用户，配置是非常麻烦的，另外，若用户更换了机器的网卡，网络管理员必须重新配置VLAN，所以这种划分方法通常使用于小型局域网。而且这种划分方法也导致了交换机执行效率的降低，因为在每一个交换机的端口都可能存在多个VLAN组的成员，保存了许多用户的MAC地址，查询起来相当不容易。 
 <br /> （3)基于IP地址划分VLAN 
 <br /> 这种方法是采用在路由器中常用的方法：IP子网和IPX网络号等。通过检查所有的广播和多点广播帧，交换机能自动生成VLAN。这种方式构成的VLAN，同一物理端口上的站点也可以分属于不同的VLAN，从而保证了用户完全自由地进行增加、移动和修改等操作。这种根据网络上应用的网络协议和网络地址划分VLAN的方式，对于那些想针对具体应用和服务来组织用户的网络管理人员来说是十分有效的。 
 <br /> 通过将局域网划分为多个VLAN，可以强化网络管理和网络安全,控制不必要的数据广播。一般局域网都是基于端口划分VLAN,所以尽量在一座楼内设置一个VLAN;如楼内有大的机房，应让每个机房使用单独的VLAN，使广播局部化，减少整个局域网的广播流量和广播风暴发生的可能性，保证网络的安全性和高可用性。 
 <br /> VLAN可以提供建立防火墙的机制，防止交换网络的过量广播风暴。使用VLAN可以将某个交换端口或用户赋予某一个特定的VLAN组，该VLAN组可以在一个交换网中或跨接多个交换机，在一个VLAN中的广播风暴不会送到VLAN之外。同样，相邻的端口不会收到其他VLAN产生的广播风暴。这样可以减少广播流量，释放带宽给用户应用，减少广播风暴的产生。 
 <br /> 四、结束语 
 <br /> 局域网环境中产生广播风暴是一种很严重的网络故障，以预防为主的防治措施应是主要对策。养成良好的设备管理习惯，加强故障监控是主要的防范措施，追查程序可以作为辅助手段加以利用，降低了网络管理人员的工作强度，保证网络高效运行。 
 <br /> 
 <br /> 参考文献: 
 <br /> [1]陈鸣译:（美）James F.KuroseKeith W.Ross，计算机网络自顶向下方法与Internet特色[M].北京:机械工业出版社，2006.468～469 
 <br /> [2]沈立强:计算机网络技术与应用[M].北京:中国铁道出版社，2007.54～56 
 <br /> ============================
 <br /> 网络设备的基础知识
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 不论干什么，知其然，还要知其所以然。 我们必须了解一下网络设备的工作原理，才能有效理解网络的广播风暴的发生原因，才能有针对性的去解决广播风暴。目前，局域网中的网络设备，基本上都是交换机。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 交换机是一种基于MAC（网卡的硬件地址）识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 集线器（HUB）属于数据通信系统中的基础设备，它和双绞线等传输介质一样，是一种不需任何软件支持的硬件设备。它曾被广泛应用到各种场合。集线器在局域网环境同网卡一样，应用于OSI参考模型第一层，因此又被称为物理层设备。集线器内部采用了电器互联，当维护局域网的环境是逻辑总线或环型结构时，完全可以用集线器建立一个物理上的星型或树型网络结构。在这方面，集线器所起的作用相当于多端口的中继器。其实，集线器实际上就是中继器的一种，其区别仅在于集线器能够提供更多的端口服务，所以集线器又叫多口中继器。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 但现在，集线器在很多场合中，已经被交换机取代。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 交换机和集线器看起来很相似，但它们还是有本质的区别。唯有了解这些区别，我们才能不难理解为什么在交换机环境中也会发生网络广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 用集线器组成的网络称为共享式网络，而用交换机组成的网络称为交换式网络。共享式以太网存在的主要问题是所有用户共享带宽，每个用户的实际可用带宽随网络 用户数的增加而递减。这是因为当信息繁忙时，多个用户可能同时“争用”一个信道，而一个信道在某一时刻只允许一个用户占用，所以大量的用户经常处于监测等待状态，致使信号传输时产生抖动、停滞或失真，严重影响了网络的性能。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 在交换式以太网中，交换机提供给每个用户专用的信息通道，除非两个源端口企图同时将信息发往同一个目的端口，否则多个源端口与目的端口之间可同时进行通信而不会发生冲突。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 通过实验测得，在多服务器组成的局域网中，处于半双工模式下的交换式以太网的实际最大传输速度是共享式网络的1.7倍，而工作在全双工状态下的交换式以太网的实际最大传输速度可达到共享式网络的3.8倍。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 交换机只是在工作方式上与集线器不同，其他的如连接方式、速度选择等与集线器基本相同，目前的交换机同样从速度上分为十兆、百兆和千兆等几种，所提供的端口数多为8口、16口和24口几种。交换机在局域网中主要用于连接工作站、集线器、服务器或用于分散式主干网。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 引发广播风暴的原因及对策
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 经过对网络设备的简单了解，我们可以知晓引发广播风暴的原因，唯有知道原因我们才能对症下药处理网络的广报风暴问题。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 广播风暴的产生有多种原因，如蠕虫病毒、交换机端口故障、网卡故障、链路冗余没有启用生成树协议、网线线序错误或受到干扰等。从目前来看，蠕虫病毒和ARP攻击是造成网络广播风暴最主要的原因。虽说如今网络广播风暴已经很少见了，但在一些使用集线器的网络中仍然非常常见。解决网络广播风暴最快捷的方法是给集线器断电然后上电启动即可，但这只是治标不治本的方法，要彻底解决，最好使用交换机设备，并划分VLAN、通过端口控制网络广播风暴。否则，如果广 播风暴是由于网卡损坏所致，要从上百台计算机找出故障计算机简直就是大海捞针，那将是网管员的一场噩梦。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 下面就几个引发广播风暴的原因及其对策进行阐述。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 误将智能型集线器作为交换机引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 采购人员或者奸商将智能型集线器当作交换机使用，这样，当网络稍微繁忙时，由于集线器的天生缺陷，故引发了广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：检查所使用的网络设备是否交换机，如果不是则更换正确的交换机，切记不要使用集线器。
</div> 
<div> 
</div> 
<div>
 网线短路导致广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 压制网线时没有做好，或者网线表面有磨损导致短路，会引起交换机的端口阻塞，因为现在交换机大多都使用存储转发技术，它的工作原理是对某一段数据包进行分 析判断寻址，并进行转发，在发出前均存储在交换机的缓冲区内，当网线发生短路时，该交换机将接收到大量的不符合分装原则的包，造成交换机处理器工作繁忙， 数据包来不及转发，从而导致缓冲区溢出产生丢包现象，导致广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：使用MRGT等流量查看软件可以查看出现短路的端口，如果交换机是可网管的，也可以通过逐个封闭端口来进行处理查找，进而找到有问题的网线。找到短路的网线后，更换一根网线。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 接入层拓扑环引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 当网络中存在环路，就会造成每一帧都在网络中重复广播，引起广播风暴。要消除这种网络循环连接带来的网络广播风暴可以使用STP协议（生成树协议），以网络中一台交换机为节点生成一棵转发树，这样所有的数据都只在这棵树所只是的路径上传输，就不会产生广播风暴——因为树没有环路。但因为STP算法开销太 大，交换机默认都没启用该协议。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：在接入层启用树生成协议，或者在诊断故障时打开树生成协议，以便协助确定故障点。在广播风暴发生时，应首先了解发生故障前网络的改动，建立完善的网络文 档资料，包括：网络布线图、IP地址和MAC地址对应表等，现在可以通过局域网工具软件来扫描获取这些信息。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 傻瓜交换机拓扑环引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 可网管的交换机由于具备树生成协议功能，可自动切断级联交换机之间的冗余端口，避免网路偶拓扑环的产生，但这个功能，傻瓜交换机并不具备。在同一傻瓜交换 机上的不同端口，或傻瓜交换机之间有冗余的连接，就导致网络拓扑环的发生，进而导致网络广播风暴，造成网络通讯失败。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：用于级联交换机的跳线应当做一些特殊标记，最好选择使用不同颜色的跳线，与其他普通跳线相区别。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 网卡损坏或者交换器端口损坏引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 当交换机有一个端口传输速率非常缓慢，最后导致整台交换机都慢下来，如果交换机是可网管型的，可通过控制台检查交换机的状态，如发现交换机的缓冲池增长的非常快，达到90%乃至更多。一般来说，这种原因是因为交换机与所连接的计算机之间发送大量的广播造成，通常是因为连接该计算机的网卡损坏，导致不断的发送广播包造成，也有可能是因为网卡与交换机形成了回路，广播包阻塞不能及时发出。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：可将其他正常的计算机接到有问题的端口 上，如果故障解决，则是原先计算机的网卡损坏或网络故障所致，更换新网卡并检测线路及网络配置即可解决。如果故障依旧，则说明原先计算机的网卡未损坏，可能是交换机的该端口已损坏，检查该端口的指示灯，如确认是该端口损坏，应及时将交换机送修或者将计算机连接到其他端口，注意，不要擅自修理交换机，否则损坏交换机得不偿失。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 蠕虫病毒引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 当网络中某计算机感染蠕虫病毒时，如Funlove、震荡波、RPC等病毒，如果查看该网卡的发送包和接收包的数量时发现发包数在快速增加，则说明该计算机感染了蠕虫病毒，通过网络传播，损耗大量的网络带宽，引起网络堵塞，导致广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：为每台计算机安装杀毒软件，并配置补丁服务器（WSUS）来保证局域网内所有的计算机都能及时打上最新的补丁。
</div> 
<div> 
</div> 
<div>
 ARP攻击导致广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 计算机不断出现IP地址冲突的提示，重启后不久就重新出现这种情况，升级到最新病毒库却未查出病毒。这种现象，是因为局域网中有计算机感染了病毒，不断的向局域网发送广播，并采用了IP地址欺骗和MAC地址欺骗的方法以躲过扫描。也有可能是有人在局域网中使用了黑客软件，如网络执法官、网络剪刀手等黑客软 件，对局域网进行攻击，也是采用了ARP攻击导致了广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：激活防止ARP病毒攻击。在路由器中打开该选项，或者为计算机安装防范ARP攻击的软件，如360安全卫士的局域网ARP攻击拦截的保护功能等；对 局域网内每一台计算机绑定网管的IP和其mac地址；给每一台计算机安装最新补丁，最好通过在局域网内架设补丁服务器（WSUS）来确保每一台计算机都能 打上最新的补丁程序，如关键更新、安全更新和Service Pack；给系统管理员帐户设置足够复杂的强密码；经常更新杀毒软件的病毒库和网络软件防火墙的规则库；关闭一些不需要的服务；不随意点击聊天工具里出现 的超链接、邮件的附件和来历不明的程序。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 网络视频引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 部分视频网络传输设备为了便于网络视频点播，常常采用UDP的方式，以广播数据包的形式对外进行发送，如果在专用网络中也使用这种方式，很容易引发广播风暴，导致网络阻塞，因此必须通过相关设置来杜绝这类故障。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：将视频网络传输设备所连接的交换机端口进行一些设置，对设备本身的网络传输模式以及传送协议类型进行更改，消除网络广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 恶劣环境引发广播风暴
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 如不合适的温度、湿度、震动和电磁干扰等，尤其是电磁干扰比较严重的环境下，同样也有可能会使网络变得不稳定，造成数据传输错误，引发广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 对策：要严格执行接地要求，特别是涉及远程线路的网络转接设备，否则达不到规定的连接速度，导致在联网过程中产生莫名其妙的故障；另外在建网之初必须考虑尽量避免计算机或者网络介质直接暴露强磁场中，如电磁炉、高压电缆、电源插头处等等；定期对计算机进行清洁工作。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 总结
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 作为网管员，在面对网络广播风暴发生时，要冷静分析广播风暴产生的原因，可使用笔者曾在2007年的《网管员世界》的几篇文章提到的二分法、排除法、替换法和网线插拔法等多种方法综合运用，一步一步地进行故障排除，快速定位引发广播风暴的故障点，查出引发广播风暴的原因，及时采取相应措施来消灭广播风暴。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 总的来看，要解决广播风暴的问题，可以从以下几个方面入手：
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 一、在局域网中安装WSUS补丁服务器，保证局域网所有计算机都能及时打上最新的补丁。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 二、最好在局域网内安装网络版的防毒服务器，如无条件这，起码也得保证单机版的防毒软件的病毒库是经常更新的。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 三、检查每一台计算机的网卡、网线和交换机的每一个端口，检查是否有故障。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 四、当广播风暴发生时，观察交换机的指示灯不啻为很好的方法，可直接观察网络连通性及网络流量。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 要避免广播风暴，可以采用恰当划分VLAN、缩小广播域、隔离广播风暴，还可在千兆以太网口上启用广播风暴控制，最大限度地避免网络再次陷入瘫痪。当端 口接受到大量的广播、单播或组播的包时，就会发生广播风暴。转发这些包会导致网络速度变慢或超时，在交换机上借助对端口的广播风暴控制可以有效避免硬件损 坏或链路故障导致的广播风暴的网络瘫痪。
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; 从笔者的实际经验来看，90%以上的网络广播风暴是病毒所致，因此，在局域网中配备防病毒系统，购置IDS入侵检测系统、网络流量检测工具等，以加强网络 病毒的防治，加强对网络线路运行状态的监控，及时发现和处理网络上的异常流量和病毒攻击等问题，并制定计算机安全管理制度，确保网络线路的正常运行。
</div> 
<div> 
</div> 
<div> 
</div></div></body></html>