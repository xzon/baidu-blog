<html><head><title><div class="tit">
  Tomcat和Websphere类加载机制（续）
</div></title></head><body><div id='tit'>Tomcat和Websphere类加载机制（续）</div><div id='cate'>细节</div><div id='date'>2008年03月23日 星期日 01:02 P.M.</div><div id='page'>156</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/a72b860a1278663ab0351d2b.html'>http://hi.baidu.com/hxzon/blog/item/a72b860a1278663ab0351d2b.html</a><div id='cnt'><p> </p> 
<p><strong>Tomcat和Websphere类加载机制（续）</strong></p> 
<p><strong><span style="mso-bookmark: N100D8"><strong><span style="font-size: 11.5pt; color: black; mso-font-kerning: 0pt; mso-bidi-font-size: 12.0pt">WebSphere</span></strong></span><span style="mso-bookmark: N100D8"><strong><span style="font-size: 11.5pt; color: black; mso-bidi-font-size: 12.0pt; mso-ascii-: 0pt">中的类加载器策略</span></strong></span></strong></p> 
<p>&lt;p class=&quot;MsoNormal&quot; style=&quot;MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt; mso-list: l1 l</p> 
<p> </p> 
<p class="MsoNormal" style="text-indent: 20pt; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-char-indent-count: 2.0" align="left"><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">WebSphere</span><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">中对类加载器有一些相关的配置，称为类加载器策略（<span>class loader policy</span>）。类加载器策略指类加载器的独立策略（<span>class loader isolation policy</span>）<span>,</span>通过类加载器策略设置，我们可以为<span>WAS</span>和应用程序的类加载器进行独立定义。</span></p> 
<p class="MsoNormal" style="text-indent: 20pt; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-char-indent-count: 2.0" align="left"><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">每个<span>WAS</span>可以配置自己的应用程序类加载器策略，<span>WAS</span>中的每个应用程序也可以配置自己的<span>Web</span>模块类加载器策略，下面我们对这两种策略分别介绍。</span></p> 
<p class="MsoNormal" style="line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan" align="left"><strong><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">1</span></strong><strong><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">．应用服务器（<span>WAS</span>）配置：应用程序类加载器策略</span></strong></p> 
<p class="MsoNormal" style="line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan" align="left"><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">应用服务器对应用程序类加载器策略有两种配置：</span></p> 
<ul type="disc"> 
 <li class="MsoNormal" style="color: black; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-list: l5 level1 lfo5; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto"><span style="font-size: 10pt; mso-font-kerning: 0pt">Single</span><span style="font-size: 10pt; mso-ascii-: 0pt">：整个应用服务器上的所有应用程序使用同一个类加载器。在这种配置下，每个应用程序不再有自己的类加载器。</span><span style="font-size: 10pt; mso-font-kerning: 0pt"> </span></li> 
 <li class="MsoNormal" style="color: black; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-list: l5 level1 lfo5; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto"><span style="font-size: 10pt; mso-font-kerning: 0pt">Multiple</span><span style="font-size: 10pt; mso-ascii-: 0pt">：应用服务器上的每个应用程序使用自己的类加载器。</span><span style="font-size: 10pt; mso-font-kerning: 0pt"> </span></li> 
</ul> 
<p class="MsoNormal" style="line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan" align="left"><strong><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">2</span></strong><strong><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">．应用程序配置：<span>Web</span>模块类加载器策略</span></strong></p> 
<p class="MsoNormal" style="line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan" align="left"><span style="font-size: 10pt; color: black; mso-bidi-: 0pt">应用程序中对<span>Web</span>模块类加载器有两种配置：</span></p> 
<ul type="disc"> 
 <li class="MsoNormal" style="color: black; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-list: l0 level1 lfo6; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto"><span style="font-size: 10pt; mso-font-kerning: 0pt">Application</span><span style="font-size: 10pt; mso-ascii-: 0pt">：整个应用程序内的所有的实用程序</span><span style="font-size: 10pt; mso-font-kerning: 0pt">jar</span><span style="font-size: 10pt; mso-ascii-: 0pt">包和</span><span style="font-size: 10pt; mso-font-kerning: 0pt">Web</span><span style="font-size: 10pt; mso-ascii-: 0pt">模块使用同一个类加载器。</span><span style="font-size: 10pt; mso-font-kerning: 0pt"> </span></li> 
 <li class="MsoNormal" style="color: black; line-height: 14.25pt; text-align: left; mso-pagination: widow-orphan; mso-list: l0 level1 lfo6; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto"><span style="font-size: 10pt; mso-font-kerning: 0pt">Module</span><span style="font-size: 10pt; mso-ascii-: 0pt">：应用程序内的每个</span><span style="font-size: 10pt; mso-font-kerning: 0pt">Web</span><span style="font-size: 10pt; mso-ascii-: 0pt">模块使用自己的类加载器。应用程序的类加载器仍然存在，负责加载应用程序中</span><span style="font-size: 10pt; mso-font-kerning: 0pt">Web</span><span style="font-size: 10pt; mso-ascii-: 0pt">模块以外的其它类，包括所有的实用程序</span><span style="font-size: 10pt; mso-font-kerning: 0pt">jar</span><span style="font-size: 10pt; mso-ascii-: 0pt">包。</span><span style="font-size: 10pt; mso-font-kerning: 0pt"> </span></li> 
</ul> 
<p class="MsoNormal" style="text-indent: 15.75pt; mso-char-indent-count: 1.5"><span>从上面的定义可以看出，不同的类加载器策略的配置下，类加载器的层次结构上的某些类加载器可能不存在。比如在应用程序服务器的应用程序类加载器策略定义为</span><span>single</span><span>的情况下，应用程序的类加载器将不存在，同一个应用服务器上的所有应用程序将共用同一个类加载器，这也就意味着不同的应用程序之间的类是共享的，应用程序间不能存在同名的类。</span></p></div></body></html>