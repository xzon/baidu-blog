<html><head><title><div class="tit">
  /**装饰模式实例-设计模式 -hxzon -gcode -gthought
</div></title></head><body><div id='tit'>/**装饰模式实例-设计模式 -hxzon -gcode -gthought</div><div id='cate'>设计方案</div><div id='date'>2008年04月16日 星期三 10:28 P.M.</div><div id='page'>141</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/901fcfea692623d6d439c9fc.html'>http://hi.baidu.com/hxzon/blog/item/901fcfea692623d6d439c9fc.html</a><div id='cnt'><div>
 /**装饰模式实例-设计模式 -hxzon -gcode -gthought
 <br /> * @(#)AixzDecoratorExample.java
 <br /> *
 <br /> *
 <br /> * @author Aixz
 <br /> * @version 1.00 2008/4/16
 <br /> * 模式的效果是，创建以decorator对象（负责新功能的对象）开始的一条对象链，
 <br /> * 并结束于被修饰的对象。
 <br /> * 每个decorator对象都对其后的对象添加新功能。
 <br /> * decorator模式按照所需的合适顺序将所需的功能串在一起，从而实现对它们的控制。
 <br /> *
 <br /> * 直接派生自java.io.InputStream的类都扮演被装饰的对象，
 <br /> * 所有的装饰者都派生自FilterInputStream.
 <br /> * 为什么Java要求在这些对象被实例化的时候将它们串在一起：这给程序员提供了灵活性，
 <br /> * 让他们可以挑选任意数量的组合来实现不同的行为。
 <br /> */
</div> 
<div> 
</div> 
<div>
 <br /> public class AixzDecoratorExample {
</div> 
<div> 
</div> 
<div>
 &nbsp;&nbsp;&nbsp; public AixzDecoratorExample() {
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public static void main(String[] args){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //任意的组合：打印ticket时用不同的抬头或脚注。
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Header1(new Header2(new SalesTicket())).printTicket();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Header1(new Footer2(new Header2(new SalesTicket()))).printTicket();
 <br /> &nbsp;&nbsp;&nbsp; }
</div> 
<div> 
</div> 
<div>
 }
</div> 
<div> 
</div> 
<div>
 class FatherClass{//所有可被修饰者的父类（修饰者的父类也继承自它，所以修饰者也可以被
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){//其它修饰者修饰
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class SalesTicket extends FatherClass{//被修饰的最初始的类
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;sales ticket&quot;);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class SalesTicketDecorator extends FatherClass{//所有的修饰者的父类
 <br /> &nbsp;&nbsp;&nbsp; private FatherClass salesTicket;
 <br /> &nbsp;&nbsp;&nbsp; public SalesTicketDecorator(FatherClass salesTicket){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.salesTicket=salesTicket;
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(salesTicket!=null) salesTicket.printTicket();
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class Header1 extends SalesTicketDecorator{
 <br /> &nbsp;&nbsp;&nbsp; public Header1(FatherClass salesTicket){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super(salesTicket);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;header 1&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super.printTicket();
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class Header2 extends SalesTicketDecorator{
 <br /> &nbsp;&nbsp;&nbsp; public Header2(FatherClass salesTicket){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super(salesTicket);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;header 2&quot;);
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super.printTicket();
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class Footer1 extends SalesTicketDecorator{
 <br /> &nbsp;&nbsp;&nbsp; public Footer1(FatherClass salesTicket){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super(salesTicket);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super.printTicket();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;footer 1&quot;);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div> 
<div> 
</div> 
<div>
 class Footer2 extends SalesTicketDecorator{
 <br /> &nbsp;&nbsp;&nbsp; public Footer2(FatherClass salesTicket){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super(salesTicket);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> &nbsp;&nbsp;&nbsp; public void printTicket(){
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super.printTicket();
 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;footer 2&quot;);
 <br /> &nbsp;&nbsp;&nbsp; }
 <br /> }
</div></div></body></html>