<html><head><title><div class="tit">
  FCKeditor图片上传
</div></title></head><body><div id='tit'>FCKeditor图片上传</div><div id='cate'>默认分类</div><div id='date'>2008年08月11日 星期一 03:09 P.M.</div><div id='page'>112</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/7cef45a96d4486fa1f17a270.html'>http://hi.baidu.com/hxzon/blog/item/7cef45a96d4486fa1f17a270.html</a><div id='cnt'><div> 
 <p><span>FCKeditor图片上传</span></p> 
 <span> <p>摘要：通过简单的步骤实现FCKeditor在JSP环境中配置使用 <br /> <br /> FCKeditor是sourceforge.net上面的一个开源项目，主要是实现在线网页编辑器的功能，可以让web程序拥有如MS Word这样强大的编辑功能。在服务器端支持ASP.Net、ASP、ClodFusion、PHP、Java等语言，并且支持IE 5+、Mozilla 、Netscape等主流浏览器。 <br /> 下面的配置是专为刚接触FCKeditor的学习者归纳的简单步骤，这里省略了一些深入的应用和理解，仅强调按步骤调出来就可以了 <br /> <br /> 1、下载 <br /> <br /> 首先在官方网站下载fckeditor,现在最新版本是FCKeditor 2.3.2 注意有两个包： <br /> FCKeditor.Java 2.3 (FCKeditot for java) <br /> FCKeditor_2.3.2.zip (FCKeditor 基本文件) <br /> <br /> 官方网站：http://www.fckeditor.net&nbsp;&nbsp;<br /> 下载地址：http://www.fckeditor.net/download <br /> 国外的网站打开的慢，我在www.deepteach.com里将这两个文件及下边的打成了一个包下载 <br /> <br /> 2、配置 <br /> <br /> 1.解压FCKeditor_2.3.2.zip,(FCKeditor主文件)，将FCKeditor目录复制到tomcat的webapps目录下，例如：Tomcat 5.5\webapps\FCKeditor\ <br /> 2.解压FCKeditor-2.3.zip,(jsp,FCKeditor整合包)，将解压文件夹中web目录下的所有文件拷贝到FCKeditor目录中。</p> <p align="center"><img style="cursor: pointer" title="点击图片可在新窗口打开" border="0" src="image/FCKeditor图片上传.html.2007111221049458.jpg" /><p class="origImg">mhtml:file://D: 文本文档 JSP问题及重点 FCKeditor在JSP环境中配置使用_可克E线.mht!http://www.deepteach.com/www1/DT_UploadFile329/2007111221049458.jpg</p></p> <p>3.如果是webapps可跳过此步，如果是root目录中须将将FCKeditor-2.3/web/WEB-INF/web.xml中的两个配置对应的servlet-name,servlet-mapping定义复制到自已项目的web.xml文件中。将FCKeditor-2.3/web/WEB-INF/lib目录下文件复制到自已项目的WEB-INF/lib目录中。 <br /> <br /> 4、测试 <br /> 启动tomcat访问<a href="http://localhost:8080/FCKeditor/_samples/">http://localhost:8080/FCKeditor/_samples/</a>（本例路径）看到例子，配置成功！！</p> <p align="center"><img style="cursor: pointer" title="点击图片可在新窗口打开" border="0" src="image/FCKeditor图片上传.html.2007111221131523.jpg" /><p class="origImg">mhtml:file://D: 文本文档 JSP问题及重点 FCKeditor在JSP环境中配置使用_可克E线.mht!http://www.deepteach.com/www1/DT_UploadFile329/2007111221131523.jpg</p></p> <p>可以将FCKeditor-2.3.zip,(jsp,FCKeditor整合包)文件夹中web/_samples目录下的例子复制到网站根目录下，启动服务器运行例子。 <br /> <br /> <br /> 5、在 jsp 页面中作如下调用（具体如何使用可以看 FCKeditor.tld定义 ）： <br /> 在需使用FCKeditor的jsp界面中加入： <br /> <br /> // 文件开头处加入&nbsp;&nbsp;<br /> &lt;%@ taglib uri=&quot;http://fckeditor.net/tags-fckeditor&quot; prefix=&quot;FCK&quot; %&gt;&nbsp;&nbsp;<br /> //要使用的地方加入&nbsp;&nbsp;<br /> &lt;FCK:editor id=&quot;content&quot; basePath=&quot;/FCKeditor/&quot;&nbsp;&nbsp; imageBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector=connectors/jsp/connector&quot; linkBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Connector=connectors/jsp/connector&quot; flashBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Type=Flash&amp;Connector=connectors/jsp/connector&quot;&nbsp;&nbsp; imageUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=Image&quot; linkUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=File&quot; flashUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=Flash&quot;&gt;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 深度空间 www.deepteach.com&nbsp;&nbsp; :)&nbsp;&nbsp;<br /> &lt;/FCK:editor&gt;</p> <p> </p> <p>附例子</p> <p>写页面（new.jsp）</p> <p>&lt;%@ page contentType=&quot;text/html; charset=GB2312&quot; language=&quot;java&quot; import=&quot;java.sql.*&quot; errorPage=&quot;&quot; %&gt;<br /> &lt;<a href="mailto:%@page">%@page</a> import=&quot;java.util.*&quot;%&gt;<br /> &lt;%@ include file=&quot;opendata.jsp&quot;%&gt;<br /> &lt;%@ include file=&quot;convert.jsp&quot;%&gt;<br /> &lt;%@ taglib uri=&quot;<a href="http://fckeditor.net/tags-fckeditor">http://fckeditor.net/tags-fckeditor</a>&quot; prefix=&quot;FCK&quot; %&gt; <br /> &lt;html&gt;<br /> &lt;head&gt;<br /> &lt;title&gt;写新闻&lt;/title&gt;<br /> &lt;meta. http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=GB2312&quot;&gt;&lt;style. type=&quot;text/css&quot;&gt;<br /> &lt;!--<br /> body {<br /> background-color: #CBFED7;<br /> }<br /> .STYLE1 {<br /> color: #FF00FF;<br /> font-size: 16px;<br /> }<br /> .STYLE2 {<br /> color: #FF00FF;<br /> font-size: x-large;<br /> font-weight: bold;<br /> }<br /> .STYLE4 {color: #FF00FF; font-size: 18px; }<br /> --&gt;<br /> &lt;/style&gt;&lt;/head&gt;<br /> &lt;body&gt;<br /> &lt;center&gt;&lt;table border=&quot;1&quot; bgcolor=&quot;#00FFFF&quot;&gt;<br /> &lt;tr&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;td width=&quot;680&quot; height=&quot;60&quot;&gt;&lt;div align=&quot;center&quot; class=&quot;STYLE2&quot;&gt;发表新闻&lt;/div&gt;&lt;/td&gt;<br /> &lt;/tr&gt;<br /> &lt;/table&gt;&lt;/center&gt;<br /> &lt;%<br /> &nbsp;&nbsp;&nbsp;&nbsp; String name=request.getParameter(&quot;name&quot;);<br /> // name=convert(name);<br /> %&gt;<br /> &lt;form. action=savenews.jsp?name=&lt;%=name%&gt; method=get target=&quot;_blank&quot;&gt;<br /> &lt;center&gt;&lt;table width=&quot;680&quot; border=1 bordercolor=&quot;#FFFFFF&quot; bgcolor=&quot;#66FFFF&quot;&gt;<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; &lt;tr&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td height=&quot;490&quot; bgcolor=#00FFFF class=&quot;STYLE1&quot;&gt;主题：&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td&gt;&lt;input type=text size=20 name=&quot;title&quot;&gt; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 请选择分类: <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;select name=&quot;differ&quot;&gt;<br /> &lt;option&gt;<br /> &lt;option selected&gt;政法类<br /> &lt;option&gt;体育类<br /> &lt;option&gt;文学类<br /> &lt;option&gt;娱乐类<br /> &lt;option&gt;生活类<br /> &lt;/select&gt;<br /> &lt;FCK:editor id=&quot;content&quot; basePath=&quot;/FCKeditor/&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; imageBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector=connectors/jsp/connector&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; linkBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Connector=connectors/jsp/connector&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flashBrowserURL=&quot;/FCKeditor/editor/filemanager/browser/default/browser.html?Type=Flash&amp;Connector=connectors/jsp/connector&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; imageUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=Image&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; linkUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=File&quot; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flashUploadURL=&quot;/FCKeditor/editor/filemanager/upload/simpleuploader?Type=Flash&quot;&gt; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this is default content:) <br /> &lt;/FCK:editor&gt;</p> <p> </p> <p>&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;tr&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp; &lt;td height=&quot;46&quot;&gt;&lt;input type=submit value=&quot;提交&quot;&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input name=&quot;reset&quot; type=reset value=&quot;重写&quot;&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br /> &lt;/table&gt;<br /> &lt;/center&gt;<br /> &lt;/form&gt;<br /> &lt;hr&gt;<br /> &lt;center&gt;<br /> &lt;%// &lt;div align=&quot;center&quot;&gt;&lt;span class=&quot;STYLE4&quot;&gt;&lt;a href=own.jsp?name=&lt;%=name%&gt;&gt;&lt;%//我的主页&lt;/a&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=board.jsp&gt;主页&lt;/a&gt;&lt;/span&gt;&lt;/div&gt; %&gt;</p> <p> </p> <p>写入数据库（savemes。jsp）</p> <p><br /> &lt;%@ page contentType=&quot;text/html; charset=GB2312&quot; language=&quot;java&quot; import=&quot;java.sql.*&quot; errorPage=&quot;&quot; %&gt;<br /> &lt;<a href="mailto:%@page">%@page</a> import=&quot;java.util.*&quot;%&gt;<br /> &lt;%@ include file=&quot;opendata.jsp&quot;%&gt;<br /> &lt;%@ include file=&quot;convert.jsp&quot;%&gt;<br /> &lt;!--<br /> * FCKeditor - The text editor for internet<br /> * Copyright (C) 2003-2005 Frederico Caldeira Knabben<br /> * <br /> * Licensed under the terms of the GNU Lesser General Public License:<br /> * &nbsp;&nbsp;<a href="http://www.opensource.org/licenses/lgpl-license.php">http://www.opensource.org/licenses/lgpl-license.php</a><br /> * <br /> * For further information visit:<br /> * &nbsp;&nbsp;<a href="http://www.fckeditor.net/">http://www.fckeditor.net/</a><br /> * <br /> * File Name: sampleposteddata.jsp<br /> * FCKeditor sample.<br /> * <br /> * Version: 2.1<br /> * Modified: 2005-03-29 21:30:00<br /> * <br /> * File Authors:<br /> * &nbsp;&nbsp; Simone Chiaretta (<a href="mailto:simo@users.sourceforge.net">simo@users.sourceforge.net</a>)<br /> --&gt;<br /> &lt;% <br /> Enumeration params= request.getParameterNames();<br /> %&gt;<br /> &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot; &gt;<br /> &lt;html&gt;<br /> &lt;head&gt;<br /> &nbsp;&nbsp; &lt;title&gt;FCKeditor - Samples - Posted Data&lt;/title&gt;<br /> &nbsp;&nbsp; &lt;meta. http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=GB2312&quot;&gt;<br /> &nbsp;&nbsp; &lt;meta. name=&quot;robots&quot; content=&quot;noindex, nofollow&quot;&gt;<br /> &nbsp;&nbsp; &lt;link href=&quot;../sample.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;<br /> &lt;/head&gt;<br /> &lt;%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String text=null;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String content=null;<br /> &nbsp;&nbsp;&nbsp; String parameter = null ;<br /> &nbsp;&nbsp;&nbsp; while( params.hasMoreElements() )<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp; parameter = (String) params.nextElement();<br /> &nbsp;&nbsp;&nbsp; if(parameter.equals(&quot;text&quot;)){<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp; content=request.getParameter(parameter);<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; }<br /> String name=request.getParameter(&quot;name&quot;);<br /> String title=request.getParameter(&quot;title&quot;);<br /> String differ=request.getParameter(&quot;differ&quot;);<br /> if(title.length()==0)<br /> {<br /> response.sendRedirect(&quot;news.jsp&quot;);<br /> }<br /> else<br /> {&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp; if(differ.length()==0)<br /> differ=&quot;未分类&quot;;<br /> &nbsp;&nbsp;&nbsp;&nbsp; int id=1,year,month,day,hour,minute,second;<br /> String time;<br /> sql=&quot;select * from news&quot;;<br /> rs=smt.executeQuery(sql);<br /> while(rs.next())<br /> id++;<br /> GregorianCalendar c;<br /> c=new GregorianCalendar();<br /> year=c.get(Calendar.YEAR);<br /> month=c.get(Calendar.MONTH);<br /> day=c.get(Calendar.DAY_OF_MONTH);<br /> hour=c.get(Calendar.HOUR_OF_DAY);<br /> minute=c.get(Calendar.MINUTE);<br /> second=c.get(Calendar.SECOND);<br /> time=year+&quot;年&quot;+month+&quot;月&quot;+day+&quot;日&quot;+hour+&quot;:&quot;+minute+&quot;:&quot;+second;<br /> <br /> // int index=0;<br /> // while((index=content.indexOf(&quot; &quot;))!=-1)<br /> &nbsp;&nbsp;&nbsp; // content=content.substring(0,index)+&quot;&amp;nbsp;&quot;+content.substring(index+1);<br /> // while((index=content.indexOf(&quot;\n&quot;))!=-1)<br /> &nbsp;&nbsp;&nbsp; // content=content.substring(0,index)+&quot;&lt;br&gt;&quot;+content.substring(index+1);<br /> &nbsp;&nbsp; // content=Replace(content);<br /> // content=convert(content);&nbsp;&nbsp;&nbsp;&nbsp;</p> <p>&nbsp;&nbsp;&nbsp; title=convert(title);<br /> &nbsp;&nbsp;&nbsp; time=convert(time);</p> <p><br /> &nbsp;&nbsp; sql=&quot;insert into news set title='&quot;+title+&quot;',content='&quot;+text+&quot;',time='&quot;+time+&quot;',name='&quot;+name+&quot;',differ='&quot;+differ+&quot;'&quot;;<br /> smt.executeUpdate(sql);<br /> <br /> //out.print(name);<br /> response.sendRedirect(&quot;1000.jsp?id=&quot;+id);<br /> &nbsp;&nbsp;<br /> }<br /> %&gt;<br /> &lt;/table&gt;<br /> &lt;/body&gt;<br /> &lt;/html&gt;</p> <p>读出页面（1000.jsp）</p> <p>&lt;%@ page contentType=&quot;text/html; charset=GB2312&quot; language=&quot;java&quot; import=&quot;java.sql.*&quot; errorPage=&quot;&quot; %&gt;<br /> &lt;<a href="mailto:%@page">%@page</a> import=&quot;java.util.*&quot;%&gt;<br /> &lt;%@ include file=&quot;opendata.jsp&quot;%&gt;<br /> &lt;%@ include file=&quot;convert.jsp&quot;%&gt;<br /> &lt;html&gt;<br /> &lt;head&gt;<br /> &lt;title&gt;我的主页&lt;/title&gt;<br /> &lt;style. type=&quot;text/css&quot;&gt;<br /> &lt;!--<br /> body {<br /> background-color: #CBFED7;<br /> }<br /> .STYLE3 {<br /> font-size: x-large;<br /> color: #FF00FF;<br /> font-weight: bold;<br /> }<br /> .STYLE4 {<br /> font-size: large;<br /> color: #FF00FF;<br /> }<br /> --&gt;<br /> &lt;/style&gt;<br /> &lt;meta. http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=GB2312&quot;&gt;&lt;/head&gt;<br /> &lt;body&gt;<br /> &lt;center&gt;&lt;table width=&quot;680&quot; border=&quot;1&quot;&gt;<br /> &lt;tr&gt;&lt;td width=&quot;100%&quot; height=&quot;80&quot; bgcolor=&quot;#00FFFF&quot;&gt;&lt;div align=&quot;center&quot;&gt;&lt;span class=&quot;STYLE3&quot;&gt;我的主页&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;<br /> &lt;/tr&gt;<br /> &lt;/table&gt;<br /> &lt;table width=680 border=&quot;1&quot; bgcolor=&quot;#D8F8F8&quot;&gt;<br /> &lt;%&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int n=0;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String name=null;<br /> &nbsp;&nbsp; name=request.getParameter(&quot;name&quot;);<br /> &nbsp;&nbsp; String id=request.getParameter(&quot;id&quot;);<br /> &nbsp;&nbsp; if(id!=null)<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp; n=Integer.parseInt(id);<br /> &nbsp;&nbsp;&nbsp; sql=&quot;select * from news where id=&quot;+n;<br /> &nbsp;&nbsp;&nbsp;&nbsp; rs=smt.executeQuery(sql); <br /> &nbsp;&nbsp;&nbsp;&nbsp; if(rs.next())<br /> name=rs.getString(4); <br /> sql=&quot;select * from news where name='&quot;+name+&quot;'&quot;;<br /> &nbsp;&nbsp;&nbsp;&nbsp; rs=smt.executeQuery(sql); <br /> &nbsp;&nbsp;&nbsp;&nbsp; rs.afterLast();<br /> &nbsp;&nbsp;&nbsp;&nbsp; while(rs.previous())<br /> &nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n=rs.getInt(6);<br /> %&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td width=10%&gt;&lt;%=rs.getString(4)%&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td width=30%&gt;&lt;%=rs.getString(3)%&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td width=60%&gt;&lt;a href=omessage.jsp?id=&lt;%=n%&gt;&gt;&lt;%=rs.getString(1)%&gt;&lt;/a&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br /> &lt;%<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> <br /> }<br /> else<br /> &nbsp;&nbsp; {<br /> &nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp; if(name==null)&nbsp;&nbsp; //out.print(n);<br /> &nbsp;&nbsp; <br /> &nbsp;&nbsp; response.sendRedirect(&quot;reg.jsp&quot;);<br /> &nbsp;&nbsp;&nbsp; else<br /> &nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name=convert(name);<br /> &nbsp;&nbsp;&nbsp;&nbsp; sql=&quot;select * from news where name='&quot;+name+&quot;'&quot;;<br /> &nbsp;&nbsp;&nbsp;&nbsp; rs=smt.executeQuery(sql); <br /> &nbsp;&nbsp;&nbsp;&nbsp; rs.afterLast();<br /> &nbsp;&nbsp;&nbsp;&nbsp; while(rs.previous())<br /> &nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n=rs.getInt(6);<br /> %&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td width=10%&gt;&lt;%=rs.getString(4)%&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td width=30%&gt;&lt;%=rs.getString(3)%&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;td width=60%&gt;&lt;a href=omessage.jsp?id=&lt;%=n%&gt;&gt;&lt;%=rs.getString(1)%&gt;&lt;/a&gt;&lt;/td&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br /> &lt;%<br /> &nbsp;&nbsp;&nbsp;&nbsp; }<br /> }<br /> }<br /> %&gt;<br /> &lt;/table&gt;&lt;/center&gt;<br /> &lt;p&gt;<br /> &lt;hr&gt;&lt;center&gt;<br /> &lt;div align=&quot;center&quot;&gt;&lt;span class=&quot;STYLE4&quot;&gt;&lt;a href=news.jsp?name=&lt;%=name%&gt;&gt;写新闻&lt;/a&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=0board.jsp&gt;主页&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;</p> <p>&lt;/body&gt;<br /> &lt;/html&gt;</p> <p> </p> </span>
</div></div></body></html>