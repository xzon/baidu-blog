<html><head><title><div class="tit">
  FCKeditor进阶
</div></title></head><body><div id='tit'>FCKeditor进阶</div><div id='cate'>默认分类</div><div id='date'>2008年08月08日 星期五 12:05 P.M.</div><div id='page'>113</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/1f9581946dac3c18d31b707b.html'>http://hi.baidu.com/hxzon/blog/item/1f9581946dac3c18d31b707b.html</a><div id='cnt'><p>FCKeditor进阶</p> 
<p><font size="2" face="宋体">html在线编辑器对于我们作新闻产品之类的程序是很重要的，在网上找录了好一段时间，发现FCKeditor,跨平台的，正在进行的jsp项目正需要这款html在线编</font><font size="2" face="宋体">辑器。</font></p> 
<p><font size="2" face="宋体"><br /> <strong>1.下载</strong><br /> FCKeditor.java 2.3 (FCKeditot for java)<br /> FCKeditor 2.2 (FCKeditor基本文件)<br /> 以下是下载地址：<br /> </font><a title="http://www.fckeditor.net/download/default.html" target="_blank" href="http://www.fckeditor.net/download/default.html"><font size="2" face="宋体">http://www.fckeditor.net/download/default.html</font></a><br /> <br /> <font size="2"></font><font face="宋体"><strong>2.建立项目:</strong><br /> 建立项目tomcat/webapps/FCKeditor.<br /> <br /> <strong>3.将FCKeditor2.2解压缩</strong><br /> 将FCKeditor2.2解压缩,将整个目录FCKeditor复制到项目的根目录下，<br /> 目录结构为：tomcat/webapps/FCKeditor<br /> 然后将FCKeditor-2.3.zip（java）压缩包中webWEB-INFlib目录下的两个jar文件拷 <br /> 到项目的WEB-INFlib目录下。把其中的src目录下的FCKeditor.tld文件copy到 <br /> </font><font size="2" face="宋体">FCKeitor/WEB-INF/下<br /> <br /> <strong>4.合并web.xml:</strong><br /> 将FCKeditor-2.3.zip压缩包中webWEB-INF目录下的web.xml文件合并到项目的 <br /> </font><font size="2" face="宋体">WEB-INF目录下的web.xml文件中。<br /> <br /> <br /> <strong>5. 修改合并后的web.xml文件</strong><br /> 修改合并后的web.xml文件，将名为SimpleUploader的Servlet的enabled参数值改为 <br /> true，以允许上传功能，Connector Servlet的baseDir参数值用于设置上传文件存 <br /> 放</font><font size="2" face="宋体">的位置。<br /> 添加标签定义:<br /> &lt;taglib&gt;<br /> &lt;taglib-uri&gt;/TestFCKeditor&lt;/taglib-uri&gt;<br /> &lt;taglib-location&gt;/WEB-INF/FCKeditor.tld&lt;/taglib-location&gt;<br /> &lt;/taglib&gt;<br /> <br /> 运行图：<br /> </font></p> 
<div style="overflow-x: auto; width: 100%">
 <a target="_blank" href="http://www.java3z.com/cwbwebhome/article/article1/images/fckeditor.gif"><font size="2" face="宋体"><img style="width: 500px; cursor: pointer" src="image/FCKeditor进阶.html.fckeditor.gif" /><p class="origImg">http://www.java3z.com/cwbwebhome/article/article1/images/fckeditor.gif</p></font></a>
</div> 
<p><br /> <br /> <br /> <br /> <font size="2"></font><font face="宋体"><strong>6. 映射:</strong><br /> 上面文件中两个servlet的映射分别为：/editor/filemanager/browser/default/connectors <br /> /</font><font size="2" face="宋体">jsp/connector和/editor/filemanager/upload/simpleuploader<br /> <br /> <strong>7.修改skin文件夹</strong><br /> 进入skin文件夹，如果你想使用fckeditor默认的这种奶黄色，<br /> 那就把除了default文件夹外的另两个文件夹直接删除.<br /> <br /> <strong>8.删除无用文件</strong><br /> 删除/FCKeditor/目录下除fckconfig.js, fckeditor.js, fckstyles.xml, fcktemplates.xml四个 <br /> </font><font size="2" face="宋体">文件以外的所有文件 <br /> 删除目录/editor/_source,<br /> 删除/editor/filemanager/browser/default/connectors/下的所有文件<br /> 删除/editor/filemanager/upload/下的所有文件<br /> 删除/editor/lang/下的除了fcklanguagemanager.js, en.js, zh.js, zh-cn.js四个文件的所有 <br /> </font><font size="2" face="宋体">文件<br /> <br /> <strong>9.修改配置：</strong><br /> 打开/FCKeditor/fckconfig.js<br /> 修改 FCKConfig.DefaultLanguage = 'zh-cn' ; <br /> 把FCKConfig.LinkBrowserURL等的值替换成以下内容：<br /> FCKConfig.LinkBrowserURL<br /> = FCKConfig.BasePath + &quot;filemanager/browser/default/browser.html Connector <br /> </font><font size="2" face="宋体">=connectors/jsp/connector&quot; ;<br /> <br /> FCKConfig.ImageBrowserURL<br /> = FCKConfig.BasePath + &quot;filemanager/browser/default/browser.html Type <br /> =Image&amp;Connector=connectors</font><font size="2" face="宋体">/jsp/connector&quot; ;<br /> <br /> FCKConfig.FlashBrowserURL<br /> = FCKConfig.BasePath + &quot;filemanager/browser/default/browser.html Type=Flash&amp; <br /> </font><font size="2" face="宋体">Connector=connectors/jsp/connector&quot; ;<br /> <br /> FCKConfig.LinkUploadURL = FCKConfig.BasePath + <br /> </font><font size="2" face="宋体">'filemanager/upload/simpleuploader Type=File' ;<br /> FCKConfig.FlashUploadURL = FCKConfig.BasePath + <br /> </font><font size="2" face="宋体">'filemanager/upload/simpleuploader Type=Flash' ;<br /> FCKConfig.ImageUploadURL = FCKConfig.BasePath + <br /> </font><font size="2" face="宋体">'filemanager/upload/simpleuploader Type=Image' ;<br /> <br /> <strong>10.其它</strong><br /> fckconfig.js总配置文件，可用记录本打开，修改后将文件存为utf-8 编码格式。 <br /> 找到：FCKConfig.TabSpaces = 0 ; 改为FCKConfig.TabSpaces = 1 ; 即在编辑器域 <br /> </font><font size="2" face="宋体">内可以使用Tab键。<br /> <br /> 如果你的编辑器还用在网站前台的话，比如说用于留言本或是日记回复时， <br /> </font><font size="2" face="宋体">那就不得不考虑安全了，<br /> 在前台千万不要使用Default的toolbar，要么自定义一下功能，要么就用系统已 <br /> </font><font size="2" face="宋体">经定义好的Basic，<br /> 也就是基本的toolbar，找到：<br /> FCKConfig.ToolbarSets[&quot;Basic&quot;] = [<br /> ['Bold','Italic','-','OrderedList','UnorderedList','-',/*'Link',*/'Unlink','-','Style','FontSize','TextColor','BGColor','-',<br /> 'Smiley','SpecialChar','Replace','Preview'] ] ; <br /> 或者 <br /> </font><font size="2" face="宋体">FCKConfig.ToolbarSets[&quot;Basic&quot;] = [<br /> ['Cut','Copy','Paste','-'],<br /> ['FontFormat','FontName','FontSize','-'],<br /> ['Bold','Italic','Underline','-'],<br /> ['JustifyLeft','JustifyCenter','JustifyRight','JustifyFull','-'],'/',<br /> ['OrderedList','UnorderedList','Outdent','Indent','-'],<br /> ['Link','Unlink','-'],<br /> ['TextColor','BGColor','-'],<br /> ['Smiley'] <br /> </font><font size="2" face="宋体">] ;<br /> 这是改过的Basic，把图像功能去掉，把添加链接功能去掉，因为图像和链接 <br /> </font><font size="2" face="宋体">和flash和图像按钮添加功能都能让前台<br /> 页直接访问和上传文件， fckeditor还支持编辑域内的鼠标右键功能。<br /> <br /> FCKConfig.ContextMenu = ['Generic',/*'Link',*/'Anchor',/*'Image',*/'Flash','Select','Textarea','Checkbox','Radio' <br /> </font><font size="2" face="宋体">,'TextField','HiddenField',<br /> /*'ImageButton',*/'Button','BulletedList','NumberedList','TableCell','Table','Form'] ;<br /> <br /> 这也是改过的把鼠标右键的“链接、图像，FLASH，图像按钮”功能都去 <br /> </font><font size="2" face="宋体">掉。<br /> <br /> 找到： FCKConfig.FontNames = 'Arial;Comic Sans MS;Courier New;Tahoma;Times New Roman;Verdana' ;<br /> 加上几种我们常用的字体 <br /> FCKConfig.FontNames <br /> = '宋体;黑体;隶书;楷体_GB2312;Arial;Comic Sans MS;Courier New;Tahoma;Times New Roman;Verdana' ;<br /> <br /> <strong>11.添加文件</strong><br /> 添加文件 /TestFCKeditor/test.jsp:<br /> &lt;%@ page language=&quot;java&quot; import=&quot;com.fredck.FCKeditor.*&quot; %&gt;<br /> &lt;%@ taglib uri=&quot;/TestFCKeditor&quot; prefix=&quot;FCK&quot; %&gt;<br /> &lt;script type=&quot;text/javascript&quot; src=&quot;/TestFCKeditor/FCKeditor/fckeditor.js&quot;&gt;&lt;/script&gt;<br /> <br /> &lt;%--<br /> 三种方法调用FCKeditor<br /> 1.FCKeditor自定义标签 (必须加头文件 &lt;%@ taglib uri=&quot;/TestFCKeditor&quot; prefix=&quot;FCK&quot; %&gt; )<br /> 2.script脚本语言调用 (必须引用 脚本文件 &lt;script type=&quot;text/javascript&quot; src=&quot;/TestFCKeditor/FCKeditor/fckeditor.js&quot;&gt;&lt;/script&gt; )<br /> 3.FCKeditor API 调用 (必须加头文件 &lt;%@ page language=&quot;java&quot; import=&quot;com.fredck.FCKeditor.*&quot; %&gt; )<br /> --%&gt;<br /> <br /> </font><font size="2" face="宋体">A:<br /> &lt;%--<br /> &lt;form action=&quot;show.jsp&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;<br /> &lt;FCK:editor id=&quot;content&quot; basePath=&quot;/TestFCKeditor/FCKeditor/&quot;<br /> width=&quot;700&quot;<br /> height=&quot;500&quot;<br /> skinPath=&quot;/TestFCKeditor/FCKeditor/editor/skins/silver/&quot;<br /> toolbarSet = &quot;Default&quot;<br /> &gt;<br /> input<br /> &lt;/FCK:editor&gt;<br /> &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;<br /> &lt;/form&gt;<br /> --%&gt;<br /> <br /> </font><font size="2" face="宋体">B:<br /> &lt;form action=&quot;show.jsp&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;<br /> &lt;table border=&quot;0&quot; width=&quot;700&quot;&gt;&lt;tr&gt;&lt;td&gt;<br /> &lt;textarea id=&quot;content&quot; name=&quot;content&quot; style=&quot;WIDTH: 100%; HEIGHT: 400px&quot;&gt;input&lt;/textarea&gt;<br /> &lt;script type=&quot;text/javascript&quot;&gt;<br /> var oFCKeditor = new FCKeditor('content') ;<br /> oFCKeditor.BasePath = &quot;/TestFCKeditor/FCKeditor/&quot; ;<br /> oFCKeditor.Height = 400;<br /> oFCKeditor.ToolbarSet = &quot;Default&quot; ; <br /> oFCKeditor.ReplaceTextarea();<br /> &lt;/script&gt;<br /> &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;<br /> &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br /> &lt;/form&gt;<br /> <br /> </font><font size="1" face="Times New Roman"></font><font size="2" face="宋体">C:<br /> &lt;%--<br /> &lt;form action=&quot;show.jsp&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;<br /> &lt;%<br /> FCKeditor oFCKeditor ;<br /> oFCKeditor = new FCKeditor( request, &quot;content&quot; ) ;<br /> oFCKeditor.setBasePath( &quot;/TestFCKeditor/FCKeditor/&quot; ) ;<br /> oFCKeditor.setValue( &quot;input&quot; );<br /> out.println( oFCKeditor.create() ) ;<br /> %&gt;<br /> &lt;br&gt;<br /> &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;<br /> &lt;/form&gt;<br /> --%&gt;<br /> <br /> 添加文件/TestFCKeditor/show.jsp:<br /> &lt;%<br /> String content = request.getParameter(&quot;content&quot;);<br /> out.print(content);<br /> %&gt;</font><br /> </p></div></body></html>