<html><head><title><div class="tit">
  ajax-百度百科
</div></title></head><body><div id='tit'>ajax-百度百科</div><div id='cate'>默认分类</div><div id='date'>2008年03月28日 星期五 07:15 P.M.</div><div id='page'>153</div><a id='url' href='http://hi.baidu.com/hxzon/blog/item/f1832bf50b9b7f21bd310971.html'>http://hi.baidu.com/hxzon/blog/item/f1832bf50b9b7f21bd310971.html</a><div id='cnt'><div class="box2">
 <span class="Tit">ajax-百度百科</span> 
 <div class="kind f14">
  <a target="_blank" href="http://baike.baidu.com/pic/1/1199725171268394.jpg"><img title="点击查看大图" hspace="5" align="right" vspace="5" border="0" src="image/ajax-百度百科.html.1199725171268394_small.jpg" /><p class="origImg">http://baike.baidu.com/pic/1/1199725171268394_small.jpg</p></a>
 </div> 
</div> 
<form>
 <fieldset class="dir">
  <legend>目录</legend> 
  <ul> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#1" name="STAT_ONCLICK_UNSUBMIT_CATALOG">主要包含了以下几种技术</a></li> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#2" name="STAT_ONCLICK_UNSUBMIT_CATALOG">与传统的web应用比较</a></li> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#3" name="STAT_ONCLICK_UNSUBMIT_CATALOG">发展史</a></li> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#4" name="STAT_ONCLICK_UNSUBMIT_CATALOG">优点和缺点</a></li> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#5" name="STAT_ONCLICK_UNSUBMIT_CATALOG">Ajax的工作原理</a></li> 
   <li>• <a href="http://baike.baidu.com/view/1641.htm#6" name="STAT_ONCLICK_UNSUBMIT_CATALOG">基础应用</a></li> 
   <li>
    <dl></dl></li> 
   <li><img src="image/ajax-百度百科.html.arr_down.gif" /><p class="origImg">http://img.baidu.com/img/baike/arr_down.gif</p></li> 
  </ul> 
 </fieldset> 
 <div class="ref"> 
  <p> </p> 
  <p> </p> 
  <p><strong>AJAX全称为“Asynchronous JavaScript and XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。 </strong></p> 
  <p> </p> 
  <p><strong>主要包含了以下几种技术</strong></p> 
  <p><strong>Ajax（Asynchronous JavaScript + XML）的定义 <br /> 基于web标准（standards-based presentation）XHTML+CSS的表示； <br /> 使用 DOM（Document Object Model）进行动态显示及交互； <br /> 使用 XML 和 XSLT 进行数据交换及相关操作； <br /> 使用 XMLHttpRequest 进行异步数据查询、检索； <br /> 使用 JavaScript 将所有的东西绑定在一起。英文参见Ajax的提出者Jesse James Garrett的原文。<br /> 类似于DHTML或LAMP，AJAX不是指一种单一的技术，而是有机地利用了一系列相关的技术。事实上，一些基于AJAX的“派生/合成”式（derivative/composite）的技术正在出现，如“AFLAX”。 </strong></p> 
  <p><strong>AJAX的应用使用支持以上技术的web浏览器作为运行平台。这些浏览器目前包括：Mozilla、Firefox、Internet Explorer、Opera、Konqueror及Safari。但是Opera不支持XSL格式对象，也不支持XSLT。</strong></p> 
  <p> </p> 
  <p><strong>与传统的web应用比较</strong></p> 
  <p><strong>传统的web应用允许用户填写表单(form)，当提交表单时就向web服务器发送一个请求。服务器接收并处理传来的表单，然後返回一个新的网页。这个做法浪费了许多带宽，因为在前後两个页面中的大部分HTML代码往往是相同的。由于每次应用的交互都需要向服务器发送请求，应用的响应时间就依赖于服务器的响应时间。这导致了用户界面的响应比本地应用慢得多。 </strong></p> 
  <p><strong>与此不同，AJAX应用可以仅向服务器发送并取回必需的数据，它使用SOAP或其它一些基于XML的web service接口，并在客户端采用JavaScript处理来自服务器的响应。因为在服务器和浏览器之间交换的数据大量减少，结果我们就能看到响应更快的应用。同时很多的处理工作可以在发出请求的客户端机器上完成，所以Web服务器的处理时间也减少了。</strong></p> 
  <p><strong>Ajax应用程序的优势在于：<br /> 1. 通过异步模式，提升了用户体验<br /> 2. 优化了浏览器和服务器之间的传输，减少不必要的数据往返，减少了带宽占用<br /> 3. Ajax引擎在客户端运行，承担了一部分本来由服务器承担的工作，从而减少了大用户量下的服务器负载。</strong></p> 
  <strong> </strong>
  <p><br /> 发展史<br /> 该技术在1998年前后得到了应用。允许客户端脚本发送HTTP请求(XMLHTTP)的第一个组件由Outlook Web Access小组写成。该组件原属于微软Exchange Server，并且迅速地成为了Internet Explorer 4.0[3]的一部分。部分观察家认为，Outlook Web Access是第一个应用了Ajax技术的成功的商业应用程序，并成为包括Oddpost的网络邮件产品在内的许多产品的领头羊。但是，2005年初，许多事件使得Ajax被大众所接受。Google在它著名的交互应用程序中使用了异步通讯，如Google讨论组、Google地图、Google搜索建议、Gmail等。Ajax这个词由《Ajax: A New Approach to Web Applications》一文所创，该文的迅速流传提高了人们使用该项技术的意识。另外，对Mozilla/Gecko的支持使得该技术走向成熟，变得更为易用。</p> 
  <p><br /> 优点和缺点<br /> 使用Ajax的最大优点，就是能在不更新整个页面的前提下维护数据。这使得Web应用程序更为迅捷地回应用户动作，并避免了在网络上发送那些没有改变过的信息。<br /> Ajax不需要任何浏览器插件，但需要用户允许JavaScript在浏览器上执行。就像DHTML应用程序那样，Ajax应用程序必须在众多不同的浏览器和平台上经过严格的测试。随着Ajax的成熟，一些简化Ajax使用方法的程序库也相继问世。同样，也出现了另一种辅助程序设计的技术，为那些不支持JavaScript的用户提供替代功能。<br /> 对应用Ajax最主要的批评就是，它可能破坏浏览器后退按钮的正常行为[4]。在动态更新页面的情况下，用户无法回到前一个页面状态，这是因为浏览器仅能记下历史记录中的静态页面。一个被完整读入的页面与一个已经被动态修改过的页面之间的差别非常微妙；用户通常都希望单击后退按钮，就能够取消他们的前一次操作，但是在Ajax应用程序中，却无法这样做。不过开发者已想出了种种办法来解决这个问题，当中大多数都是在用户单击后退按钮访问历史记录时，通过建立或使用一个隐藏的IFRAME来重现页面上的变更。（例如，当用户在Google Maps中单击后退时，它在一个隐藏的IFRAME中进行搜索，然后将搜索结果反映到Ajax元素上，以便将应用程序状态恢复到当时的状态。）<br /> 一个相关的观点认为，使用动态页面更新使得用户难于将某个特定的状态保存到收藏夹中。该问题的解决方案也已出现，大部分都使用URL片断标识符（通常被称为锚点，即URL中#后面的部分）来保持跟踪，允许用户回到指定的某个应用程序状态。（许多浏览器允许JavaScript动态更新锚点，这使得Ajax应用程序能够在更新显示内容的同时更新锚点。）这些解决方案也同时解决了许多关于不支持后退按钮的争论。<br /> 进行Ajax开发时，网络延迟——即用户发出请求到服务器发出响应之间的间隔——需要慎重考虑。不给予用户明确的回应 [5]，没有恰当的预读数据 [6]，或者对XMLHttpRequest的不恰当处理[7]，都会使用户感到延迟，这是用户不欲看到的，也是他们无法理解的[8]。通常的解决方案是，使用一个可视化的组件来告诉用户系统正在进行后台操作并且正在读取数据和内容。<br /> 一些手持设备（如手机、PDA等）现在还不能很好的支持Ajax; <br /> 用JavaScript作的Ajax引擎，JavaScript的兼容性和DeBug都是让人头痛的事; <br /> Ajax的无刷新重载，由于页面的变化没有刷新重载那么明显，所以容易给用户带来困扰――用户不太清楚现在的数据是新的还是已经更新过的；现有的解决有：在相关位置提示、数据更新的区域设计得比较明显、数据更新后给用户提示等; <br /> 对串流媒体的支持没有FLASH、Java Applet好;</p> 
  <p> </p> 
  <p>Ajax的工作原理</p> 
  <p> Ajax的核心是JavaScript对象XmlHttpRequest。该对象在Internet Explorer 5中首次引入，它是一种支持异步请求的技术。简而言之，XmlHttpRequest使您可以使用JavaScript向服务器提出请求并处理响应，而不阻塞用户。</p> 
  <p> 在创建Web站点时，在客户端执行屏幕更新为用户提供了很大的灵活性。下面是使用Ajax可以完成的功能：</p> 
  <p>&nbsp;&nbsp;&nbsp; 动态更新购物车的物品总数，无需用户单击Update并等待服务器重新发送整个页面。</p> 
  <p>&nbsp;&nbsp;&nbsp; 提升站点的性能，这是通过减少从服务器下载的数据量而实现的。例如，在某购物车页面，当更新篮子中的一项物品的数量时，会重新载入整个页面，这必须下载整个页面的数据。如果使用Ajax计算新的总量，服务器只会返回新的总量值，因此所需的带宽仅为原来的百分之一。 消除了每次用户输入时的页面刷新。例如，在Ajax中，如果用户在分页列表上单击Next，则服务器数据只刷新列表而不是整个页面。 <br /> 直接编辑表格数据，而不是要求用户导航到新的页面来编辑数据。对于Ajax，当用户单击Edit时，可以将静态表格刷新为内容可编辑的表格。用户单击Done之后，就可以发出一个Ajax请求来更新服务器，并刷新表格，使其包含静态、只读的数据。</p> 
  <p> 一切皆有可能！但愿它能够激发您开始开发自己的基于Ajax的站点。然而，在开始之前，让我们介绍一个现有的Web站点，它遵循传统的提交/等待/重新显示的范例，我们还将讨论Ajax如何提升用户体验。</p> 
  <p> Ajax的工作原理相当于在用户和服务器之间加了—个中间层，使用户操作与服务器响应异步化。这样把以前的一些服务器负担的工作转嫁到客户端，利于客户端闲置的处理能力来处理，减轻服务器和带宽的负担，从而达到节约ISP的空间及带宽租用成本的目的。</p> 
  <p><br /> 基础应用</p> 
  <p>我们以两个验证通行证帐号是否存在的例子来讲述AJAX在实际中的应用：</p> 
  <p>(1)用文本字符串的方式返回服务器的响应来验证网易通行证帐号是否存在；</p> 
  <p>(2)以XMLDocument对象方式返回响应来验证金山通行证帐号是否存在；</p> 
  <p>首先，我们需要用JavaScript来创建XMLHttpRequest 类向服务器发送一个HTTP请求， XMLHttpRequest 类首先由Internet Explorer以ActiveX对象引入，被称为XMLHTTP。 后来Mozilla﹑Netscape﹑Safari 和其他浏览器也提供了XMLHttpRequest类，不过它们创建XMLHttpRequest类的方法不同。</p> 
  <p>对于Internet Explorer浏览器，创建XMLHttpRequest 方法如下：</p> 
  <p>xmlhttp_request = new ActiveXObject(&quot;Msxml2.XMLHTTP.3.0&quot;); //3.0或4.0, 5.0 <br /> xmlhttp_request = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); <br /> xmlhttp_request = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</p> 
  <p>由于在不同Internet Explorer浏览器中XMLHTTP版本可能不一致，为了更好的兼容不同版本的Internet Explorer浏览器，因此我们需要根据不同版本的Internet Explorer浏览器来创建XMLHttpRequest类，上面代码就是根据不同的Internet Explorer浏览器创建XMLHttpRequest类的方法。</p> 
  <p>对于Mozilla﹑Netscape﹑Safari等浏览器，创建XMLHttpRequest 方法如下：xmlhttp_request = new XMLHttpRequest();</p> 
  <p>如果服务器的响应没有XML mime-type header，某些Mozilla浏览器可能无法正常工作。 为了解决这个问题，如果服务器响应的header不是text/xml，可以调用其它方法修改该header。</p> 
  <p>xmlhttp_request = new XMLHttpRequest(); <br /> xmlhttp_request.overrideMimeType('text/xml');</p> 
  <p>在实际应用中，为了兼容多种不同版本的浏览器，一般将创建XMLHttpRequest类的方法写成如下形式：</p> 
  <p>try{ <br /> if( window.ActiveXObject ){ <br /> for( var i = 5; i; i-- ){ <br /> try{ <br /> if( i == 2 ){ <br /> xmlhttp_request = new ActiveXObject( &quot;Microsoft.XMLHTTP&quot; ); }<br /> else{ <br /> xmlhttp_request = new ActiveXObject( &quot;Msxml2.XMLHTTP.&quot; + i + &quot;.0&quot; ); <br /> xmlhttp_request.setRequestHeader(&quot;Content-Type&quot;,&quot;text/xml&quot;); <br /> xmlhttp_request.setRequestHeader(&quot;Content-Type&quot;,&quot;gb2312&quot;); }<br /> break;} <br /> catch(e){ <br /> xmlhttp_request = false; } } }<br /> else if( window.XMLHttpRequest )<br /> { xmlhttp_request = new XMLHttpRequest(); <br /> if (xmlhttp_request.overrideMimeType) <br /> { xmlhttp_request.overrideMimeType('text/xml'); } } }<br /> catch(e){ xmlhttp_request = false; }</p> 
  <p>在定义了如何处理响应后，就要发送请求了。可以调用HTTP请求类的open()和send()方法，如下所示：</p> 
  <p>xmlhttp_request.open('GET', URL, true); <br /> xmlhttp_request.send(null);</p> 
  <p>open()的第一个参数是HTTP请求方式—GET，POST或任何服务器所支持的您想调用的方式。 按照HTTP规范，该参数要大写；否则，某些浏览器(如Firefox)可能无法处理请求。</p> 
  <p>第二个参数是请求页面的URL。</p> 
  <p>第三个参数设置请求是否为异步模式。如果是TRUE，JavaScript函数将继续执行，而不等待服务器响应。这就是&quot;AJAX&quot;中的&quot;A&quot;。</p> 
  <p>用JavaScript来创建XMLHttpRequest 类向服务器发送一个HTTP请求后，接下来要决定当收到服务器的响应后，需要做什么。这需要告诉HTTP请求对象用哪一个JavaScript函数处理这个响应。可以将对象的onreadystatechange属性设置为要使用的JavaScript的函数名，如下所示：</p> 
  <p>xmlhttp_request.onreadystatechange =FunctionName;</p> 
  <p>FunctionName是用JavaScript创建的函数名，注意不要写成FunctionName()，当然我们也可以直接将JavaScript代码创建在onreadystatechange之后，例如：</p> 
  <p>xmlhttp_request.onreadystatechange = function(){<br /> // JavaScript代码段<br /> };</p> 
  <p>首先要检查请求的状态。只有当一个完整的服务器响应已经收到了，函数才可以处理该响应。XMLHttpRequest 提供了readyState属性来对服务器响应进行判断。</p> 
  <p>readyState的取值如下：</p> 
  <p>0 (未初始化)</p> 
  <p>1 (正在装载)</p> 
  <p>2 (装载完毕)</p> 
  <p>3 (交互中)</p> 
  <p>4 (完成)</p> 
  <p>所以只有当readyState=4时，一个完整的服务器响应已经收到了，函数才可以处理该响应。具体代码如下：</p> 
  <p>if (http_request.readyState == 4) { // 收到完整的服务器响应 } <br /> else { // 没有收到完整的服务器响应 }</p> 
  <p>当readyState=4时，一个完整的服务器响应已经收到了，接着，函数会检查HTTP服务器响应的状态值。完整的状态取值可参见W3C文档。当HTTP服务器响应的值为200时，表示状态正常。</p> 
  <p>在检查完请求的状态值和响应的HTTP状态值后，就可以处理从服务器得到的数据了。有两种方式可以得到这些数据：</p> 
  <p>(1) 以文本字符串的方式返回服务器的响应</p> 
  <p>(2) 以XMLDocument对象方式返回响应</p> 
  <p>实例一： 用文本字符串的方式返回服务器的响应来验证网易通行证帐号是否存在</p> 
  <p>首先，我们登陆网易通行证注册页面，可以看到检测用户名是否存在是将用户名提交给checkssn.jsp页面进行判断，格式为：</p> 
  <p>reg.163.com/register/checkssn.jsp?username=用户名</p> 
  <p>根据上面讲到的方法，我们可以利用AJAX技术对网易通行证用户名进行检测：</p> 
  <p>第一步：新建一个基于Xhtml标准的网页，在区域插入Javascript函数如下：</p> 
  <p>function getXMLRequester( )</p> 
  <p>{ var xmlhttp_request = false;</p> 
  <p>try</p> 
  <p>{ if( window.ActiveXObject )</p> 
  <p>{ for( var i = 5; i; i-- ){</p> 
  <p>try{</p> 
  <p>if( i == 2 )</p> 
  <p>{ xmlhttp_request = new ActiveXObject( &quot;Microsoft.XMLHTTP&quot; ); }</p> 
  <p>else</p> 
  <p>{ xmlhttp_request = new ActiveXObject</p> 
  <p>( &quot;Msxml2.XMLHTTP.&quot; + i + &quot;.0&quot; );</p> 
  <p>xmlhttp_request.setRequestHeader(&quot;Content-Type&quot;,&quot;text/xml&quot;);</p> 
  <p>xmlhttp_request.setRequestHeader(&quot;Content-Type&quot;,&quot;gb2312&quot;); }</p> 
  <p>break;}</p> 
  <p>catch(e){ xmlhttp_request = false; } } }</p> 
  <p>else if( window.XMLHttpRequest )</p> 
  <p>{ xmlhttp_request = new XMLHttpRequest();</p> 
  <p>if (xmlhttp_request.overrideMimeType)</p> 
  <p>{ xmlhttp_request.overrideMimeType('text/xml'); } } }</p> 
  <p>catch(e){ xmlhttp_request = false; }</p> 
  <p>return xmlhttp_request ; }</p> 
  <p>function IDRequest(n) { //定义收到服务器的响应后需要执行的JavaScript函数</p> 
  <p>url=n+document.getElementById('163id').value;//定义网址参数</p> 
  <p>xmlhttp_request=getXMLRequester();//调用创建XMLHttpRequest的函数</p> 
  <p>xmlhttp_request.onreadystatechange = doContents;//调用doContents函数</p> 
  <p>xmlhttp_request.open('GET', url, true);</p> 
  <p>xmlhttp_request.send(null); }</p> 
  <p>function doContents()</p> 
  <p>{ if (xmlhttp_request.readyState == 4) {// 收到完整的服务器响应</p> 
  <p>if (xmlhttp_request.status == 200) {//HTTP服务器响应的值OK</p> 
  <p>document.getElementById('message').innerHTML = xmlhttp_request.responseText;</p> 
  <p>//将服务器返回的字符串写到页面中ID为message的区域 }</p> 
  <p>else { alert(http_request.status); } } }</p> 
  <p>在区域建立一个文本框，id为163id，再建一个id为messsge的空白区域用来显示返回字符串(也可以通过Javascript函数截取一部分字符串显示)：</p> 
  <p>&lt;input type=text id=&quot;163id&quot;&gt;<br /> &lt;span id=&quot;message&quot;&gt;&lt;/span&gt;</p> 
  <p>这样，一个基于AJAX技术的用户名检测页面就做好了，不过这个页面将返回服务器响应生成页面的所有字符串，当然还可以对返回的字符串进行一些操作，便于应用到不同的需要当中。</p> 
  <p>实例二： 以XMLDocument对象方式返回响应来验证金山通行证帐号是否存在</p> 
  <p>在上面的例子中，当服务器对HTTP请求的响应被收到后，我们会调用请求对象的reponseText属性。该属性包含了服务器返回响应文件的内容。现在我们以XMLDocument对象方式返回响应，此时将不再需要reponseText属性而使用responseXML属性。</p> 
  <p>首先登陆金山通行证注册页面，我们发现金山通行证用户名的检测方式为： pass.kingsoft.com/ksgweb/jsp/login/uid.jsp?uid=用户名,并且返回XML数据:</p> 
  <p>isExistedUid -2</p> 
  <p>当result值为-1时表示此用户名已被注册，当result值为-2时表示此用户名尚未注册，因此通过对result值的判断可以知道用户名是否被注册。</p> 
  <p>对上例代码进行修改：</p> 
  <p>首先找到</p> 
  <p>document.getElementById('message').innerHTML = xmlhttp_request.responseText;</p> 
  <p>改为:</p> 
  <p>var response = xmlhttp_request.responseXML.documentElement;</p> 
  <p>var result = response.getElementsByTagName('result')[0].firstChild.data;//返回result节点数据</p> 
  <p>if(result ==-2){</p> 
  <p>document.getElementById('message').innerHTML = &quot;用户名&quot;+document.getElementById('163id').value+&quot;尚未注册&quot;;}</p> 
  <p>else if(result ==-1){</p> 
  <p>document.getElementById('message').innerHTML = &quot;对不起,用户名&quot;+document.getElementById('163id').value+&quot;已经注册&quot;;}</p> 
  <p>通过以上两个实例说明了AJAX的客户端基础应用，采用的是网易和金山现成的服务器端程序，当然为了开发合适自己页面的程序，还需要对自己编写服务器端程序，这设计到程序语言及数据库的操作，对于有一定程序基础的读者一定不是很难的事情。</p> 
  <p> </p> 
  <p>补充：<br /> 1.Ajax：著名希腊史诗伊利亚特中英雄埃阿斯的名字。<br /> 2.Ajax：荷兰著名足球俱乐部阿贾克斯，以培养青年球员而著称，并多次夺得欧洲冠军杯。<br /> 3.Ajax：亚甲斯炸药 <br /> 4.Ajax：艾杰克斯铜锡铅轴承合金</p> 
  <p> </p> 
  <strong>参考资料：</strong>
  <br /> 1.
  <a target="_blank" href="http://www.cnic.org/wiki/AJAX">http://www.cnic.org/wiki/AJAX</a> 
  <br /> 2.
  <a target="_blank" href="http://blog.inmedia.cn/index.php/2006/03/29/ajaxasbasncn_erd_ac">http://blog.inmedia.cn/index.php/2006/03/29/ajaxasbasncn_erd_ac</a> 
  <br /> 3.Ajax——JS与XML的精彩组合: 
  <a target="_blank" href="http://www.micy.cn/blog/index.php/archives/199.html">http://www.micy.cn/blog/index.php/archives/199.html</a> 
  <br /> 4.
  <a target="_blank" href="http://tech.chinaasp.com/20051123/ajax/31503.shtml">http://tech.chinaasp.com/20051123/ajax/31503.shtml</a> 
  <br /> 5.
  <a target="_blank" href="http://www.hotajax.org/">http://www.hotajax.org</a>
 </div>
</form></div></body></html>