<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Struts2 + jQuery 实现ajax -json插件</title></head><body><h1>Struts2 + jQuery 实现ajax -json插件</h1><div><div>Struts2 + jQuery 实现ajax  -json插件</div>
<div> </div>
<div>使用这个组合，感觉还是很方便灵活的。</div>
<div> </div>
<div>1、将struts2的json插件加入web工程的lib，jsonplugin的下载地址：<a href="http://code.google.com/p/jsonplugin/downloads/list">http://code.google.com/p/jsonplugin/downloads/list</a></div>
<div> </div>
<div>2、struts.xml添加专为ajax使用的package</div>
<div> </div>
<div>&lt;package name=&quot;ajax&quot; extends=&quot;json-default&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;action name=&quot;ajaxRequest&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  class=&quot;org.david.struts2.HelloWorld&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;result type=&quot;json&quot;&gt;&lt;/result&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;/action&gt;<br>
&nbsp;&nbsp;&nbsp;  &lt;/package&gt;<br>
3、helloworld.jsp<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;SCRIPT type=&quot;text/javascript&quot; src=&quot;js/jquery-1.2.6.min.js&quot;&gt;&lt;/script&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;SCRIPT type=&quot;text/javascript&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  function clickButton()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {&nbsp;&nbsp;&nbsp;  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  var url = 'ajaxRequest.action';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  var params = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  name:$('#name').attr('value')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  };<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  jQuery.post(url, params, callbackFun, 'json');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  function callbackFun(data)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  alert(data.result);//对应HelloWorld类的message属性<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  //获取数据后渲染页面<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;/SCRIPT&gt;</div>
<div> </div>
<div> </div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;input id=&quot;name&quot; type=&quot;text&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;input type=&quot;button&quot; value=&quot;ok&quot; onclick=&quot;javascript:clickButton();&quot;&gt;<br>
4、HelloWorld.java<br>
package org.david.struts2;</div>
<div> </div>
<div>public class HelloWorld {</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp;  private String name;<br>
&nbsp;&nbsp;&nbsp;  private String result;</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp;  // ajax请求参数赋值<br>
&nbsp;&nbsp;&nbsp;  public void setName(String name) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  this.name = name;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  }</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp;  // ajax返回结果<br>
&nbsp;&nbsp;&nbsp;  public String getResult() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return result;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  }</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp;  public String execute() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  this.result = &quot;Hello! &quot; + this.name + &quot;.&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return &quot;success&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  }</div>
<div> </div>
<div>}<br>
<a href="http://www.blogjava.net/ITdavid/archive/2008/09/07/227612.aspx?opt=admin">http://www.blogjava.net/ITdavid/archive/2008/09/07/227612.aspx?opt=admin</a></div></div></body></html>