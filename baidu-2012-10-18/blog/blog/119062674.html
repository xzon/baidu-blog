<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Microsoft ASP.NET MVC Preview 5 及LINQ TO SQL最新版开发示例演示（提供源码下载）</title></head><body><h1>Microsoft ASP.NET MVC Preview 5 及LINQ TO SQL最新版开发示例演示（提供源码下载）</h1><div><div align="center"><strong>Microsoft ASP.NET MVC Preview 5 </strong><strong>及LINQ TO SQL</strong><strong>最新版开发示例演示（提供源码下载）</strong></div>
<div> </div>
<div> </div>
<div>本示例程序演示如何采用 Microsoft ASP.NET MVC Preview 5 和 LINQ TO SQL 开发 Web Application。</div>
<div> </div>
<div><strong>1. ASP.NET MVC </strong><strong>简介</strong></div>
<div>ASP.NET MVC框架是既ASP.NET WebForms后的又一种开发方式。它提供了一系列优秀特性，使ASP.NET开发人员拥有了另一个选择。MVC是个将一个应用的实现分成三个组件角色的框架技术：模型，视图和控制器。</div>
<div>在基于MVC的应用里，Model(模型)是负责保持状态的应用组件。这个状态通常都持久于数据库之中。</div>
<div>在基于MVC的应用里，View(视图)是负责显示用户界面的组件。这个UI通常是使用模型Model数据来创建的。</div>
<div>在基于MVC的应用里，Controller(控制器)是处理用户交互，操作模型Model和最终选择用哪个视图View来显示UI的组件。在MVC应用中，视图只是用来显示信息而已，是控制器来处理和回应用户的输入和交互的。</div>
<div>使用MVC方法的一个好处是，它有助于促进应用中模型，视图，控制器间的关注的清晰分离。保持关注的清晰分离使得对应用的测试极其容易，因为不同应用组件间的契约的定义和表达是更明确的。</div>
<div> </div>
<div><strong>2. MVC </strong><strong>和 LINQ TO SQL </strong><strong>演示程序</strong></div>
<div>下面是EntLib.com 论坛小组（<a href="http://forum.entlib.com/"><font color="#800080">http://forum.EntLib.com</font></a> ）针对 Microsoft ASP.NET MVC 框架最新版(Preview 5) 设计的一个简单示例程序。示例程序基于EntLib.com Forum 数据库演示，可以非常方便切换到其他数据库。</div>
<div> </div>
<div>如下是示例程序的运行效果界面：</div>
<br>
<br>
<br>
<br>
<div> </div>
<div><strong>3. </strong><strong>构建基于LINQ TO SQL </strong><strong>的Model</strong></div>
<div>下面是示例项目源程序：</div>
<br>
<br>
<div> </div>
<div>其中Model部分，采用LINQ TO SQL 创建，示例程序采用EntLib.com Forum 数据库，添加了四个表，操作界面如下：</div>
<br>
<br>
<div> </div>
<div><strong>4. </strong><strong>创建EntLibForumController </strong><strong>控制器</strong></div>
<div>EntLibForumController 类首先增加一个先前创建的Model &ndash; EntLibForumDataContext，然后编写检索论坛、主题和帖子内容的方法。具体代码如下 &ndash; 采用LINQ TO Object 技术：</div>
<div> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;  public class EntLibForumController : Controller</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  private EntLibForumDataContext m_Forum = new EntLibForumDataContext();</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  public ActionResult Index()</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  // Add action logic here</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  throw new NotImplementedException();</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  public ActionResult Forums()</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ViewData[&quot;Forums&quot;] = DataContext.yaf_Forums.ToList();</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return View();</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  public ActionResult Topics(int id)</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ViewData[&quot;Topics&quot;] = DataContext.yaf_Topics.Where(a =&gt; a.ForumID == id).ToList();</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return View();</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  public ActionResult Messages(int id)</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ViewData[&quot;Messages&quot;] = DataContext.yaf_Messages.Where(a =&gt; a.TopicID == id).ToList();</span></div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return View();</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div align="left"> </div>
<div align="left"> </div>
<div align="left"> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  #region</span> Properties</div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  private EntLibForumDataContext DataContext</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  get { return m_Forum; }</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  #endregion</span></div>
<div align="left"> </div>
<div><span>&nbsp;&nbsp;&nbsp;  }</span></div>
<div> </div>
<div> </div>
<div><strong>5. </strong><strong>创建UI </strong><strong>视图</strong></div>
<div>创建UI View 比较简单，在创建UI View时，选择MVC View Content Page，Master Page 选择Shared 目录下的Site.Master 文件。</div>
<div> </div>
下面是Forums.aspx 页面的UI 及其代码：<br>
<br>
<br>
<br>
<div> </div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;  public partial class Forums : ViewPage</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  protected void Page_Load(object sender, EventArgs e)</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  grdForum.DataSource = (List&lt;yaf_Forum&gt;)ViewData[&quot;Forums&quot;];</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  grdForum.DataBind();</span></div>
<div align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }</span></div>
<div><span>&nbsp;&nbsp;&nbsp;  }</span></div>
<div> </div>
<div>欢迎访问<a href="http://forum.entlib.com/"><font color="#800080">http://forum.entlib.com</font></a> 开源ASP.NET论坛，获取更多的.Net 技术资料和系统架构设计文档，更有很多技术专家的知识共享。</div>
<div> </div>
<div> </div>
<p><strong class="smallfont">附件:</strong><br>
<img border="0" src="/themes/flatearth/icon_file.gif"> <strong><a href="/resource.ashx?a=40">MVC_Demo_EntLib.zip</a></strong> <span class="smallfont">548 KB, 下载 596 次.</span></p>
<p><span class="smallfont">http://forum.entlib.com/Default.aspx?g=posts&amp;t=247 本文<br>
</span></p>
<p><a rel="nofollow" href="http://forum.entlib.com/">http://forum.entlib.com</a> -- 免费、开源、ASP.NET 论坛。</p>
<p>http://www.challenges.com.cn/?wt.srch=1<br>
http://msdn.microsoft.com/zh-cn/vstudio/bb332392.aspx<br>
http://www.asp.net/cn/</p></div></body></html>