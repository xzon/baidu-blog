<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>用JSP生成HTM网页，减轻数据库操作！</title></head><body><h1>用JSP生成HTM网页，减轻数据库操作！</h1><div><p>用JSP生成HTM网页，减轻数据库操作！</p>
<p>模本页面:template.htm <br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;title&gt;###title###&lt;/title&gt;<br>
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;&gt;<br>
&lt;LINK href=&quot;../css.css&quot; rel=stylesheet type=text/css&gt;<br>
&lt;/head&gt;<br>
<br>
&lt;body&gt;<br>
&lt;table width=&quot;500&quot; border=&quot;0&quot; align=&quot;center&quot; cellpadding=&quot;0&quot; cellspacing=&quot;2&quot;&gt;<br>
&lt;tr&gt; <br>
&lt;td align=&quot;center&quot;&gt;###title###&lt;/td&gt;<br>
&lt;/tr&gt;<br>
&lt;tr&gt; <br>
&lt;td align=&quot;center&quot;&gt;作者：###author###&nbsp;&nbsp;  &lt;/td&gt;<br>
&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;###content###<br>
&lt;/td&gt;<br>
<br>
&lt;/tr&gt;<br>
<br>
&lt;/table&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>
<br>
=========================================<br>
JSP文件: buildhtml.jsp<br>
<br>
&lt;%@ page contentType=&quot;text/html; charset=gb2312&quot; import=&quot;java.util.*,java.io.*&quot;%&gt;<br>
&lt;%<br>
try{<br>
String title=&quot;jsp生成静态html文件&quot;;<br>
String content=&quot;小样，还搞不定你？&quot;;<br>
String editer=&quot;hpsoft&quot;;<br>
String filePath = &quot;&quot;;<br>
filePath = request.getRealPath(&quot;/&quot;)+&quot;template.htm&quot;;<br>
out.print(filePath);<br>
String templateContent=&quot;&quot;;<br>
FileInputStream fileinputstream = new FileInputStream(filePath);//读取模块文件<br>
int lenght = fileinputstream.available();<br>
byte bytes[] = new byte[lenght];<br>
fileinputstream.read(bytes);<br>
fileinputstream.close();<br>
templateContent = new String(bytes);<br>
out.print(templateContent);<br>
templateContent=templateContent.replaceAll(&quot;###title###&quot;,title);<br>
templateContent=templateContent.replaceAll(&quot;###content###&quot;,content);<br>
templateContent=templateContent.replaceAll(&quot;###author###&quot;,editer);//替换掉模块中相应的地方<br>
out.print(templateContent);<br>
// 根据时间得文件名<br>
Calendar calendar = Calendar.getInstance();<br>
String fileame = String.valueOf(calendar.getTimeInMillis()) +&quot;.html&quot;;<br>
fileame = request.getRealPath(&quot;/&quot;)+fileame;//生成的html文件保存路径<br>
FileOutputStream fileoutputstream = new FileOutputStream(fileame);//建立文件输出流<br>
out.print(&quot;文件输出路径:&lt;br&gt;&quot;);<br>
out.print(fileame);<br>
byte tag_bytes[] = templateContent.getBytes();<br>
fileoutputstream.write(tag_bytes);<br>
fileoutputstream.close();<br>
}<br>
catch(Exception e){<br>
out.print(e.toString());<br>
}<br>
<br>
%&gt;<br>
------------------------------<br>
用JSP生成HTM网页，减轻数据库操作（2）！</p>
<p>大家跟着做就可以了，这个代码还可以在修改让他传递个文件名称，生成文件，按照传递的参数实现文件名称，大家自己修改下<br>
<br>
1 toHtml.java(不用修改,直接用)<br>
<br>
package com.jetsum.mystatic; <br>
import java.io.ByteArrayOutputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.IOException;<br>
import java.io.OutputStreamWriter;<br>
import java.io.PrintWriter;<br>
import javax.servlet.RequestDispatcher;<br>
import javax.servlet.ServletContext;<br>
import javax.servlet.ServletException;<br>
import javax.servlet.ServletOutputStream;<br>
import javax.servlet.http.HttpServlet;<br>
import javax.servlet.http.HttpServletRequest;<br>
import javax.servlet.http.HttpServletResponse;<br>
import javax.servlet.http.HttpServletResponseWrapper;<br>
<br>
public class toHtml extends HttpServlet {<br>
<br>
public void service(HttpServletRequest request, HttpServletResponse response)<br>
throws ServletException, IOException {<br>
String url = request.getParameter(&quot;urls&quot;)!=null?request.getParameter(&quot;urls&quot;):&quot;&quot;;<br>
//url是要生成htm的jsp页面<br>
String name = &quot;&quot;;<br>
response.setContentType(&quot;text/html;charset=gb2312&quot;);<br>
ServletContext sc = getServletContext();<br>
System.out.println(&quot;request.getRealPath&quot;+request.getRealPath(&quot;&quot;));<br>
name = request.getRealPath(&quot;&quot;) + &quot;/index.htm&quot;; /*生成htm页位置在%服务器的根目录%/工程名/index.htm 例如:d:/tomcat5.0/webapp/studyteach/index.htm ,注意这里是在根目录生成,你可以生成后放到你想放的文件夹里,保证其它东西如图片的路径正确 这里就写成name = request.getRealPath(&quot;&quot;) + &quot;/kszx/kszx.htm&quot;; */<br>
<br>
RequestDispatcher rd = sc.getRequestDispatcher(url);<br>
<br>
final ByteArrayOutputStream os = new ByteArrayOutputStream();<br>
<br>
final ServletOutputStream stream = new ServletOutputStream()<br>
{<br>
public void write(byte[] data, int offset, int length) {<br>
os.write(data, offset, length);<br>
}<br>
<br>
public void write(int b) throws IOException {<br>
os.write(b);<br>
}<br>
};<br>
<br>
final PrintWriter pw = new PrintWriter(new OutputStreamWriter(os));<br>
<br>
HttpServletResponse rep = new HttpServletResponseWrapper(response)<br>
{<br>
public ServletOutputStream getOutputStream() {<br>
return stream;<br>
}<br>
<br>
public PrintWriter getWriter() {<br>
return pw;<br>
}<br>
};<br>
rd.include(request, rep);<br>
pw.flush();<br>
FileOutputStream fos = new FileOutputStream(name); // 把jsp输出的内容写到xxx.htm<br>
os.writeTo(fos);<br>
fos.close();<br>
PrintWriter out = response.getWriter();<br>
out.print(&quot;&lt;p align=center&gt;&lt;font size=3 color=red&gt;首页已经成功生成！&lt;/font&gt;&lt;/p&gt;&quot;);<br>
}<br>
}<br>
web.xml<br>
中添加<br>
&lt;servlet&gt;<br>
&lt;servlet-name&gt;tohtm&lt;/servlet-name&gt;<br>
&lt;servlet-class&gt;com.jetsum.mystatic.toHtml&lt;/servlet-class&gt;<br>
&lt;/servlet&gt;<br>
<br>
&lt;servlet-mapping&gt;<br>
&lt;servlet-name&gt;tohtm&lt;/servlet-name&gt;<br>
&lt;url-pattern&gt;/web/tohtm&lt;/url-pattern&gt;<br>
&lt;/servlet-mapping&gt;<br>
使用方法很简单 mytest.jsp(wwwroot下)<br>
&lt;a href=&quot;web/tohtm?urls=/kszx/kszx.jsp&quot;&gt;生成静态页&lt;/a&gt; kszx.jsp为要生成htm的动态页<br>
如果不在wwwroot下,在wwwroot/pp下<br>
就要写成<br>
&lt;a href=&quot;../web/tohtm?urls=/kszx/kszx.jsp&quot;&gt;生成静态页&lt;/a&gt;</p></div></body></html>