<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>总结spring下配置dbcp,c3p0,proxool数据源链接池 -gcode</title></head><body><h1>总结spring下配置dbcp,c3p0,proxool数据源链接池 -gcode</h1><div><p>总结spring下配置dbcp,c3p0,proxool数据源链接池 -gcode</p>
<p>hxzon：全部成功。2007-10-06。<a href="http://hiok.blog.sohu.com/entry/4183941/">http://hiok.blog.sohu.com/entry/4183941/</a></p>
<p><font face="Georgia">applicationContext-datasource-jdbc.xml</font></p>
<pre><p><font face="Georgia">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></p>
<p><font face="Georgia">&lt;!DOCTYPE beans PUBLIC<br>&nbsp;&nbsp;&nbsp;    &quot;-//SPRING//DTD BEAN//EN&quot;<br>&nbsp;&nbsp;&nbsp;    &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;</font></p>
<p><font face="Georgia">&lt;beans default-autowire=&quot;no&quot; default-lazy-init=&quot;true&quot;<br> default-dependency-check=&quot;none&quot;&gt;<br> &lt;description&gt;datasource&lt;/description&gt;<br>&lt;!--  &nbsp;&nbsp;    <br> &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;driverClassName&quot;&gt;&lt;value&gt;${jdbc.driverClassName}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;url&quot;&gt;&lt;value&gt;${jdbc.url}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;username&quot;&gt;&lt;value&gt;${jdbc.username}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${jdbc.password}&lt;/value&gt;&lt;/property&gt;<br> &lt;/bean&gt;<br>--&gt;</font></p>
<p><br><font face="Georgia">&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;<br> &lt;property name=&quot;driverClassName&quot;&gt;&lt;value&gt;${jdbc.driverClassName}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;url&quot;&gt;&lt;value&gt;${jdbc.url}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;username&quot;&gt;&lt;value&gt;${jdbc.username}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${jdbc.password}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;maxActive&quot;&gt;&lt;value&gt;80&lt;/value&gt;&lt;/property&gt;  <br>&nbsp;&nbsp;     &lt;property name=&quot;maxIdle&quot;&gt;&lt;value&gt;20&lt;/value&gt;&lt;/property&gt;  <br>&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;maxWait&quot;&gt;&lt;value&gt;3000&lt;/value&gt;&lt;/property&gt;  <br>&nbsp;&nbsp;&nbsp;    <br>&lt;/bean&gt; </font></p>
<p><font face="Georgia"> </font></p>
<p><font face="Georgia"> &lt;!--bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;driverClass&quot;&gt;&lt;value&gt;${jdbc.driverClassName}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;jdbcUrl&quot;&gt;&lt;value&gt;${jdbc.url}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;user&quot;&gt;&lt;value&gt;${jdbc.username}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${jdbc.password}&lt;/value&gt;&lt;/property&gt;  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;acquireIncrement&quot;&gt;&lt;value&gt;5&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;idleConnectionTestPeriod&quot;&gt;&lt;value&gt;3000&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;checkoutTimeout&quot;&gt;&lt;value&gt;3000&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;maxPoolSize&quot;&gt;&lt;value&gt;80&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;minPoolSize&quot;&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;maxStatements&quot;&gt;&lt;value&gt;6000&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;property name=&quot;initialPoolSize&quot;&gt;&lt;value&gt;5&lt;/value&gt;&lt;/property&gt;<br> &lt;/bean--&gt;<br> <br>&lt;!--<br>ComboPooledDataSource 参数说明</font></p>
<p><font face="Georgia">maxIdleTime：<br>最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 <br>acquireIncrement：<br>当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 <br>maxStatements：<br>JDBC的标准参数，用以控制数据源内加载的PreparedStatements数量。但由于预缓存的statements<br>属于单个connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素。<br>如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default: 0<br>idleConnectionTestPeriod：<br>每60秒检查所有连接池中的空闲连接。Default: 0 <br>acquireRetryAttempts： <br>定义在从数据库获取新连接失败后重复尝试的次数。Default: 30 <br>breakAfterAcquireFailure: <br>获取连接失败将会引起所有等待连接池来获取连接的线程抛出异常。但是数据源仍有效<br>保留，并在下次调用getConnection()的时候继续尝试获取连接。如果设为true，那么在尝试<br>获取连接失败后该数据源将申明已断开并永久关闭。Default: false<br>testConnectionOnCheckout：<br>因性能消耗大请只在需要的时候使用它。如果设为true那么在每个connection提交的<br>时候都将校验其有效性。建议使用idleConnectionTestPeriod或automaticTestTable<br>等方法来提升连接测试的性能。Default: false<br>--&gt;</font></p>
<p><br><font face="Georgia"> </font></p>
<p><br><font face="Georgia"> &lt;!--bean id=&quot;dataSource&quot; class=&quot;org.logicalcobwebs.proxool.ProxoolDataSource&quot; destroy-method=&quot;close&quot;&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;driver&quot;&gt;&lt;value&gt;${jdbc.driverClassName}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;driverUrl&quot;&gt;&lt;value&gt;${jdbc.url}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;user&quot;&gt;&lt;value&gt;${jdbc.username}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${jdbc.password}&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;alias&quot;&gt;&lt;value&gt;test&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;houseKeepingSleepTime&quot;&gt;&lt;value&gt;90000&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;prototypeCount&quot;&gt;&lt;value&gt;10&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;maximumConnectionCount&quot;&gt;&lt;value&gt;100&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;minimumConnectionCount&quot;&gt;&lt;value&gt;10&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;trace&quot;&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;<br>&nbsp;&nbsp;   &lt;property name=&quot;verbose&quot;&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;<br> &lt;/bean&gt;<br> --&gt;</font></p>
<p><font face="Georgia">&lt;/beans&gt;</font></p></pre>
<p><font face="Georgia">jdbc.properties</font></p>
<pre><p><font face="Georgia"> </font></p>
<p><br><font face="Georgia">#jdbc.driverClassName=net.sourceforge.jtds.jdbc.Driver<br>#jdbc.url=jdbc:jtds:sybase://192.168.1.1:5000/test;charset=eucgb<br>#jdbc.username=test<br>#jdbc.password=test</font></p>
<p><font face="Georgia"> </font></p>
<p><br><font face="Georgia">#jdbc.driverClassName=org.hsqldb.jdbcDriver<br>#jdbc.url=jdbc:hsqldb:file:hsqldb/test<br>#jdbc.username=sa<br>#jdbc.password=</font></p>
<p><br><font face="Georgia">jdbc.driverClassName=com.mysql.jdbc.Driver<br>jdbc.url=jdbc:mysql://localhost:3306/test?user=root&amp;password=root&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8<br>jdbc.username=root<br>jdbc.password=root</font></p>
<p><font face="Georgia"> </font></p>
<p><font face="Georgia">#jdbc.url=jdbc:mysql://localhost:3306/test?user=root&amp;amp;password=root&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;characterSetResults=UTF-8</font></p>
<p><font face="Georgia"> </font></p>
<p><font face="Georgia">#jdbc.driverClassName=net.sourceforge.jtds.jdbc.Driver<br>#jdbc.url=jdbc:jtds:sqlserver://localhost:1433/test;useUnicode=true&amp;amp;characterEncoding=GBK&amp;amp;characterSetResults=GBK<br>#jdbc.username=sa<br>#jdbc.password=sa</font></p>
<p><font face="Georgia">#jndi<br>jndi.factory.initial=weblogic.jndi.WLInitialContextFactory<br>jndi.provider.url=t3://127.0.0.1:7001<br>jndi.jndiName=jdbc/test</font></p></pre>
<p><br>
<font face="Georgia">hibernate.properties</font></p>
<pre><p><br><font face="Georgia">#hibernate.dialect=org.hibernate.dialect.SQLServerDialect<br>hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect<br>#hibernate.dialect=org.hibernate.dialect.HSQLDialect<br>hibernate.cache.use_query_cache=true<br>#hibernate.cache.provider_class=net.sf.hibernate.cache.EhCacheProvider<br>hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider<br>hibernate.show_sql=true<br>hibernate.format_sql=false<br>hibernate.transaction.auto_close_session=true<br>hibernate.connection.autocommit=false<br>hibernate.connection.isolation=2<br>hibernate.hbm2ddl.auto=update<br>hibernate.jdbc.fetch_size=50<br>hibernate.jdbc.batch_size=25<br>hibernate.default_batch_fetch_size=16<br>hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory<br>#hibernate.transaction.factory_class=net.sf.hibernate.transaction.JDBCTransactionFactory<br>hibernate.query.factory_class=org.hibernate.hql.classic.ClassicQueryTranslatorFactory<br>hibernate.connection.release_mode=after_transaction<br>hibernate.cache.region_prefix=hibernate.cache.test<br>hibernate.default_schema=test</font></p></pre></div></body></html>