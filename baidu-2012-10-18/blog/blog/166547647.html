<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Eclipse 内存监控 profile</title></head><body><h1>Eclipse 内存监控 profile</h1><div><div>Eclipse 内存监控 profile</div>
<div> </div>
<div>1，Eclipse插件之Hidden Heap Status<br>
菜单 Window =&gt; Preferences =&gt; General =&gt; 右边，把 Show Heap Status 打上勾就会在右下角任务栏显示内存监视器,并且可以点击内存回收。 <br>
-----------------------------<br>
2，如何利用Eclipse Profile Plugin对Tomcat进行性能监控分析<br>
<a href="http://www.blogjava.net/usherlight/archive/2009/08/21/292059.html">http://www.blogjava.net/usherlight/archive/2009/08/21/292059.html</a><br>
目前新版本的Eclipse在启动应用服务器的时候有一个新的选项：Start the server in profiling mode。<br>
我个人使用的是tomcat6.0<br>
但是我在一开始点击这个按钮的时候，出现了错误提示信息： Could not launch in profiling mode because no profilers are configured.<br>
经过一番搜索，发现要求安装TPTP（Test and Performance Tools Platform），下面我把我的安装步骤简单地列举如下：<br>
1、下载，TPTP的最新版本是4.6.0，下载地址：<a href="http://www.eclipse.org/tptp/home/downloads">http://www.eclipse.org/tptp/home/downloads</a> /?ver=4.6.0#tptp-plugins. 这里包括两个部分：runtime和sdk，如果你只是进行profile的运行分析，不对TPTP进行任何扩展，那就只需要下载runtime。下载的时候可以下载相应平台的（比如：windows的）或者下载全部平台的压缩包。我选择的是下载runtime和SDK两个的所有平台的压缩包，<br>
2、安装。安装TPTP是非常简单的，把下载的压缩包解压到Eclipse的安装目录下就行了<br>
3、除了上面的runtime/SDK，还需要安装Agent Controller，第一步当然还是下载了，地址：<a href="http://www.eclipse.org/tptp/home/downloads/?ver=4.6.0#rac">http://www.eclipse.org/tptp/home/downloads/?ver=4.6.0#rac</a><br>
同样的，这也有runtime和SDK两部分，选择和步骤1一样。<br>
4、把下载的两个压缩也解压到Eclipse的安装目录下。<br>
5、其他还有一些可选的步骤，比如：Native Logging/Generic Log Adapter之类的东西，我一概都没有下载安装。<br>
6、重新启动Eclipse，点击start server in profiling mode, OK, 成功，出现了一个对话框，让你选择监控的类型，是要监控线程，还是内存，选择一个，然后浏览一下你的网站，就能得到一张列表了。<br>
总的来说，整个过程并不复杂，非常顺利。<br>
------------------------------<br>
3，通过GC输出分析内存泄露问题<br>
<a href="http://www.javaeye.com/topic/256701?page=2">http://www.javaeye.com/topic/256701?page=2</a><br>
1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  在GC输出的环境下，大压力下做多天的测试。（可以在 JAVA_OPTS增加-verbose:gc -XX:+PrintGCDetails -XX:+HeapDumpOnOutOfMemoryError）</div>
<div> </div>
<div>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  检查GC输出日志来判断是否有内存泄露。（这部分后面有详细的实例说明）</div>
<div> </div>
<div>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  如果出现内存泄露问题，则使用jprofiler等工具来排查内存泄露点（之所以不一开始使用，因为jprofiler等工具对于压力测试有影响，使得大压力无法上去，也使问题不那么容易暴露）</div>
<div> </div>
<div>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  解决问题，并在重复2步骤。 <br>
----------------------------<br>
4，Java Application Profiling using TPTP</div></div></body></html>