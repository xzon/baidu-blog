<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>//java部分屏幕截图 -javacode -gcode</title></head><body><h1>//java部分屏幕截图 -javacode -gcode</h1><div><div>//java部分屏幕截图 -javacode -gcode<br>
//hxzon modify<br>
<br>
package com.xxx.goodcode;</div>
<div> </div>
<div>import java.awt.AWTException;<br>
import java.awt.Rectangle;<br>
import java.awt.Robot;<br>
import java.awt.Toolkit;<br>
import java.awt.image.BufferedImage;<br>
import java.io.File;<br>
import java.io.IOException;<br>
import java.text.SimpleDateFormat;<br>
import java.util.Date;</div>
<div> </div>
<div>import javax.imageio.ImageIO;</div>
<div> </div>
<div>public class Snap {</div>
<div> </div>
<div> private static String path;<br>
 private static String mode;<br>
 private static String nameFormat = &quot;yyMMddhhmmss&quot;; <br>
 private static Robot robot;<br>
 static {<br>
&nbsp;&nbsp; try {<br>
&nbsp;&nbsp;&nbsp; robot = new Robot();<br>
&nbsp;&nbsp; } catch (AWTException e) {<br>
&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>
&nbsp;&nbsp; }<br>
 }</div>
<div> </div>
<div> public static boolean snap(String path, String mode, int delay) {<br>
&nbsp;&nbsp; try {<br>
&nbsp;&nbsp;&nbsp; Snap.mode = mode;<br>
&nbsp;&nbsp;&nbsp; Snap.path = path;<br>
&nbsp;&nbsp;&nbsp; Toolkit toolkit = Toolkit.getDefaultToolkit();<br>
&nbsp;&nbsp;&nbsp; int width = toolkit.getScreenSize().width;<br>
&nbsp;&nbsp;&nbsp; int height = toolkit.getScreenSize().height;<br>
&nbsp;&nbsp;&nbsp; robot.delay(delay);<br>
&nbsp;&nbsp;&nbsp; BufferedImage image = robot.createScreenCapture(new Rectangle(0, 0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; width, height));<br>
&nbsp;&nbsp;&nbsp; return output(image);<br>
&nbsp;&nbsp; } catch (Exception e) {<br>
&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>
&nbsp;&nbsp;&nbsp; return false;<br>
&nbsp;&nbsp; }</div>
<div> </div>
<div> }</div>
<div> </div>
<div> public static boolean snap(String path, String mode, int x1, int y1,<br>
&nbsp;&nbsp;&nbsp; int x2, int y2, int delay) {<br>
&nbsp;&nbsp; try {<br>
&nbsp;&nbsp;&nbsp; Snap.mode = mode;<br>
&nbsp;&nbsp;&nbsp; Snap.path = path;<br>
&nbsp;&nbsp;&nbsp; robot.delay(delay);<br>
&nbsp;&nbsp;&nbsp; BufferedImage image = robot.createScreenCapture(new Rectangle(x1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y1, (x2 - x1), (y2 - y1)));<br>
&nbsp;&nbsp;&nbsp; return output(image);<br>
&nbsp;&nbsp; } catch (Exception e) {<br>
&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>
&nbsp;&nbsp;&nbsp; return false;<br>
&nbsp;&nbsp; }<br>
 }</div>
<div> </div>
<div> public static boolean output(BufferedImage image) {<br>
&nbsp;&nbsp; Date time = new Date();<br>
&nbsp;&nbsp; SimpleDateFormat format = new SimpleDateFormat(nameFormat);<br>
&nbsp;&nbsp; try {<br>
&nbsp;&nbsp;&nbsp; if (mode.contains(&quot;png&quot;)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp; ImageIO.write(image, &quot;png&quot;, new File(path + format.format(time)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + &quot;.png&quot;));<br>
&nbsp;&nbsp;&nbsp; }</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp; if (mode.contains(&quot;bmp&quot;)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp; ImageIO.write(image, &quot;bmp&quot;, new File(path + format.format(time)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + &quot;.bmp&quot;));<br>
&nbsp;&nbsp;&nbsp; }</div>
<div> </div>
<div>&nbsp;&nbsp;&nbsp; if (mode.contains(&quot;gif&quot;)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp; ImageIO.write(image, &quot;gif&quot;, new File(path + format.format(time)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + &quot;.gif&quot;));<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp; if (mode.contains(&quot;jpg&quot;)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp; ImageIO.write(image, &quot;jpg&quot;, new File(path + format.format(time)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + &quot;.jpg&quot;));<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp; return true;</div>
<div> </div>
<div>&nbsp;&nbsp; } catch (IOException e) {<br>
&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>
&nbsp;&nbsp;&nbsp; return false;<br>
&nbsp;&nbsp; }</div>
<div> </div>
<div> }</div>
<div> </div>
<div> public static void main(String[] args) {<br>
&nbsp;&nbsp; if (Snap.snap(&quot;.&quot;, &quot;jpg&quot;, 200, 200, 600, 600, 3000) == true)<br>
&nbsp;&nbsp;&nbsp; System.out.println(&quot;ok&quot;);<br>
&nbsp;&nbsp; if (Snap.snap(&quot;.&quot;, &quot;jpg&quot;, 3000) == true)<br>
&nbsp;&nbsp;&nbsp; System.out.println(&quot;ok&quot;);<br>
 }<br>
}</div></div></body></html>