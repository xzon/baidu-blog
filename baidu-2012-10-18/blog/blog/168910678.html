<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>com.jgoodies.forms.layout.FormLayout</title></head><body><h1>com.jgoodies.forms.layout.FormLayout</h1><div><p><strong>com.jgoodies.forms.layout.FormLayout</strong></p>
<p> </p>
<p>JGoodies Forms 1.2<br>
<a href="http://www.jgoodies.com/articles/forms.pdf">http://www.jgoodies.com/articles/forms.pdf</a></p>
<p>FormLayout is a powerful, flexible and precise general purpose layout manager. It aligns components vertically and horizontally in a dynamic rectangular grid of cells, with each component occupying one or more cells. A whitepaper about the FormLayout ships with the product documentation and is available online.</p>
<p>To use FormLayout you first define the grid by specifying the columns and rows. In a second step you add components to the grid. You can specify columns and rows via human-readable String descriptions or via arrays of <code><font face="新宋体">ColumnSpec</font></code> and <code><font face="新宋体">RowSpec</font></code> instances.</p>
<p>Each component managed by a FormLayout is associated with an instance of <code><font face="新宋体">CellConstraints</font></code>. The constraints object specifies where a component should be located on the form's grid and how the component should be positioned. In addition to its constraints object the <code><font face="新宋体">FormLayout</font></code> also considers each component's minimum and preferred sizes in order to determine a component's size.</p>
<p>FormLayout has been designed to work with non-visual builders that help you specify the layout and fill the grid. For example, the <code><font face="新宋体">ButtonBarBuilder2</font></code> assists you in building button bars; it creates a standardized FormLayout and provides a minimal API that specializes in adding buttons and Actions. Other builders can create frequently used panel design, for example a form that consists of rows of label-component pairs.</p>
<p>FormLayout has been prepared to work with different types of sizes as defined by the <code><font face="新宋体">Size</font></code> interface.</p>
<p><strong>Example 1</strong> (Plain FormLayout):<br>
The following example creates a panel with 3 data columns and 3 data rows; the columns and rows are specified before components are added to the form.</p>
<pre>FormLayout layout = new FormLayout(
      &quot;right:pref, 6dlu, 50dlu, 4dlu, default&quot;,  // columns
      &quot;pref, 3dlu, pref, 3dlu, pref&quot;);           // rows

 CellConstraints cc = new CellConstraints();
 JPanel panel = new JPanel(layout);
 panel.add(new JLabel(&quot;Label1&quot;),   cc.xy  (1, 1));
 panel.add(new JTextField(),       cc.xywh(3, 1, 3, 1));
 panel.add(new JLabel(&quot;Label2&quot;),   cc.xy  (1, 3));
 panel.add(new JTextField(),       cc.xy  (3, 3));
 panel.add(new JLabel(&quot;Label3&quot;),   cc.xy  (1, 5));
 panel.add(new JTextField(),       cc.xy  (3, 5));
 panel.add(new JButton(&quot;/u2026&quot;),  cc.xy  (5, 5));
 return panel;</pre>
<p><strong>Example 2</strong> (Using PanelBuilder):<br>
This example creates the same panel as above using the <code><font face="新宋体">PanelBuilder</font></code> to add components to the form.</p>
<pre>FormLayout layout = new FormLayout(
      &quot;right:pref, 6dlu, 50dlu, 4dlu, default&quot;,  // columns
      &quot;pref, 3dlu, pref, 3dlu, pref&quot;);           // rows

 PanelBuilder builder = new PanelBuilder(layout);
 CellConstraints cc = new CellConstraints();
 builder.addLabel(&quot;Label1&quot;,         cc.xy  (1, 1));
 builder.add(new JTextField(),      cc.xywh(3, 1, 3, 1));
 builder.addLabel(&quot;Label2&quot;,         cc.xy  (1, 3));
 builder.add(new JTextField(),      cc.xy  (3, 3));
 builder.addLabel(&quot;Label3&quot;,         cc.xy  (1, 5));
 builder.add(new JTextField(),      cc.xy  (3, 5));
 builder.add(new JButton(&quot;/u2026&quot;), cc.xy  (5, 5));
 return builder.getPanel();</pre>
<p><strong>Example 3</strong> (Using DefaultFormBuilder):<br>
This example utilizes the <code><font face="新宋体">DefaultFormBuilder</font></code> that ships with the source distribution.</p>
<pre>FormLayout layout = new FormLayout(
      &quot;right:pref, 6dlu, 50dlu, 4dlu, default&quot;); // 5 columns; add rows later

 DefaultFormBuilder builder = new DefaultFormBuilder(layout);
 builder.append(&quot;Label1&quot;, new JTextField(), 3);
 builder.append(&quot;Label2&quot;, new JTextField());
 builder.append(&quot;Label3&quot;, new JTextField());
 builder.append(new JButton(&quot;/u2026&quot;));
 return builder.getPanel();</pre>
<p> </p>
<p> </p>
<dl><dt><strong>Version:</strong> </dt><dd>$Revision: 1.19 $ </dd><dt><strong>Author:</strong> </dt><dd>Karsten Lentzsch </dd></dl>
<p> </p>
<p>=========================================</p>
<p><strong>com.jgoodies.forms.builder.DefaultFormBuilder</strong></p>
<p> </p>
<p>Provides a means to build form-oriented panels quickly and consistently using the <code><font face="新宋体">FormLayout</font></code>. This builder combines frequently used panel building steps: add a new row, add a label, proceed to the next data column, then add a component.</p>
<p>The extra value lies in the <code><font face="新宋体">#append</font></code> methods that append gap rows and component rows if necessary and then add the given components. They are built upon the superclass behavior <code><font face="新宋体">#appendRow</font></code> and the set of <code><font face="新宋体">#add</font></code> methods. A set of component appenders allows to add a textual label and associated component in a single step.</p>
<p>This builder can map resource keys to internationalized (i15d) texts when creating text labels, titles and titled separators. Therefore you must specify a <code><font face="新宋体">ResourceBundle</font></code> in the constructor. The builder methods throw an <code><font face="新宋体">IllegalStateException</font></code> if one of the mapping builder methods is invoked and no bundle has been set.</p>
<p>You can configure the build process by setting a leading column, enabling the row grouping and by modifying the gaps between normal lines and between paragraphs. The leading column will be honored if the cursor proceeds to the next row. All appended components start in the specified lead column, except appended separators that span all columns.</p>
<p>It is temptive to use the DefaultFormBuilder all the time and to let it add rows automatically. Use a simpler style if it increases the code readability. Explicit row specifications and cell constraints make your layout easier to understand - but harder to maintain. See also the accompanying tutorial sources and the Tips &amp; Tricks that are part of the Forms documentation.</p>
<p>Sometimes a form consists of many standardized rows but has a few rows that require a customization. The DefaultFormBuilder can do everything that the superclasses <code><font face="新宋体">AbstractFormBuilder</font></code> and <code><font face="新宋体">PanelBuilder</font></code> can do; among other things: appending new rows and moving the cursor. Again, ask yourself if the DefaultFormBuilder is the appropriate builder. As a rule of thumb you should have more components than builder commands. There are different ways to add custom rows. Find below example code that presents and compares the pros and cons of three approaches.</p>
<p>The texts used in methods <code><font face="新宋体">#append(String, ...)</font></code> and <code><font face="新宋体">#appendTitle(String)</font></code> as well as the localized texts used in methods <code><font face="新宋体">#appendI15d</font></code> and <code><font face="新宋体">#appendI15dTitle</font></code> can contain an optional mnemonic marker. The mnemonic and mnemonic index are indicated by a single ampersand (<tt><font face="新宋体">&amp;</font></tt>). For example <tt><font face="新宋体">&quot;&amp;Save&quot;</font></tt>, or <tt><font face="新宋体">&quot;Save &amp;as&quot;</font></tt>. To use the ampersand itself, duplicate it, for example <tt><font face="新宋体">&quot;Look&amp;&amp;Feel&quot;</font></tt>.</p>
<p><strong>Example:</strong></p>
<pre>public void build() {
     FormLayout layout = new FormLayout(
         &quot;right:max(40dlu;pref), 3dlu, 80dlu, 7dlu, &quot; // 1st major colum
       + &quot;right:max(40dlu;pref), 3dlu, 80dlu&quot;,        // 2nd major column
         &quot;&quot;);                                         // add rows dynamically
     DefaultFormBuilder builder = new DefaultFormBuilder(layout);
     builder.setDefaultDialogBorder();

     builder.appendSeparator(&quot;Flange&quot;);

     builder.append(&quot;Identifier&quot;, identifierField);
     builder.nextLine();

     builder.append(&quot;PTI [kW]&quot;,   new JTextField());
     builder.append(&quot;Power [kW]&quot;, new JTextField());

     builder.append(&quot;s [mm]&quot;,     new JTextField());
     builder.nextLine();

     builder.appendSeparator(&quot;Diameters&quot;);

     builder.append(&quot;da [mm]&quot;,    new JTextField());
     builder.append(&quot;di [mm]&quot;,    new JTextField());

     builder.append(&quot;da2 [mm]&quot;,   new JTextField());
     builder.append(&quot;di2 [mm]&quot;,   new JTextField());

     builder.append(&quot;R [mm]&quot;,     new JTextField());
     builder.append(&quot;D [mm]&quot;,     new JTextField());

     builder.appendSeparator(&quot;Criteria&quot;);

     builder.append(&quot;Location&quot;,   buildLocationComboBox());
     builder.append(&quot;k-factor&quot;,   new JTextField());

     builder.appendSeparator(&quot;Bolts&quot;);

     builder.append(&quot;Material&quot;,   ViewerUIFactory.buildMaterialComboBox());
     builder.nextLine();

     builder.append(&quot;Numbers&quot;,    new JTextField());
     builder.nextLine();

     builder.append(&quot;ds [mm]&quot;,    new JTextField());
 }</pre>
<p><strong>Custom Row Example:</strong></p>
<pre>public JComponent buildPanel() {
     initComponents();

     FormLayout layout = new FormLayout(
             &quot;right:pref, 3dlu, default:grow&quot;,
             &quot;&quot;);
     DefaultFormBuilder builder = new DefaultFormBuilder(layout);
     builder.setDefaultDialogBorder();
     builder.setRowGroupingEnabled(true);

     CellConstraints cc = new CellConstraints();

     // In this approach, we add a gap and a custom row.
     // The advantage of this approach is, that we can express
     // the row spec and comment area cell constraints freely.
     // The disadvantage is the misalignment of the leading label.
     // Also the row's height may be inconsistent with other rows.
     builder.appendSeparator(&quot;Single Custom Row&quot;);
     builder.append(&quot;Name&quot;, name1Field);
     builder.appendRow(builder.getLineGapSpec());
     builder.appendRow(new RowSpec(&quot;top:31dlu&quot;)); // Assumes line is 14, gap is 3
     builder.nextLine(2);
     builder.append(&quot;Comment&quot;);
     builder.add(new JScrollPane(comment1Area),
                 cc.xy(builder.getColumn(), builder.getRow(), &quot;fill, fill&quot;));
     builder.nextLine();

     // In this approach, we append a standard row with gap before it.
     // The advantage is, that the leading label is aligned well.
     // The disadvantage is that the comment area now spans
     // multiple cells and is slightly less flexible.
     // Also the row's height may be inconsistent with other rows.
     builder.appendSeparator(&quot;Standard + Custom Row&quot;);
     builder.append(&quot;Name&quot;, name2Field);
     builder.append(&quot;Comment&quot;);
     builder.appendRow(new RowSpec(&quot;17dlu&quot;)); // Assumes line is 14, gap is 3
     builder.add(new JScrollPane(comment2Area),
                 cc.xywh(builder.getColumn(), builder.getRow(), 1, 2));
     builder.nextLine(2);

     // In this approach, we append two standard rows with associated gaps.
     // The advantage is, that the leading label is aligned well,
     // and the height is consistent with other rows.
     // The disadvantage is that the comment area now spans
     // multiple cells and is slightly less flexible.
     builder.appendSeparator(&quot;Two Standard Rows&quot;);
     builder.append(&quot;Name&quot;, name3Field);
     builder.append(&quot;Comment&quot;);
     builder.nextLine();
     builder.append(&quot;&quot;);
     builder.nextRow(-2);
     builder.add(new JScrollPane(comment3Area),
                 cc.xywh(builder.getColumn(), builder.getRow(), 1, 3));

     return builder.getPanel();
 }</pre>
<p>TODO: Consider adding a method for appending a component that spans the remaining columns in the current row. Method name candidates are <code><font face="新宋体">#appendFullSpan</font></code> and <code><font face="新宋体">#appendRemaining</font></code>.</p>
<p> </p>
<p>=========================</p>
<p><strong>com.jgoodies.forms.builder.ButtonBarBuilder2</strong></p>
<p> </p>
<p>A non-visual builder for building consistent button bars that comply with popular style guides. Utilizes the JGoodies <code><font face="新宋体">FormLayout</font></code> and honors the platform's <code><font face="新宋体">LayoutStyle</font></code> regarding button sizes, gap widths, and the default button order.</p>
<p>This is an improved version of the older <code><font face="新宋体">ButtonBarBuilder</font></code>. The ButtonBarBuilder2 has a simpler, safer, and more convenient API, see below for a comparison.</p>
<p><strong>ButtonBarBuilder2 vs. ButtonBarBuilder:</strong><br>
ButtonBarBuilder2 uses only 3 component types that can be added: <em>button</em>, <em>standard</em>, and <em>growing button</em>, where ButtonBarBuilder has <em>button</em>, <em>fixed</em>, and <em>growing</em>. Also, the ButtonBarBuilder2 doesn't group buttons. The layout of the ButtonBarBuilder and ButtonBarBuilder2 is the same if all buttons are smaller than <code><font face="新宋体">LayoutStyle.getDefaultButtonWidth()</font></code>. If some buttons are wider, ButtonBarBuilder2 will make only these buttons wider, where the old ButtonBarBuilder makes all (gridded) buttons wider.</p>
<p><strong>Examples:</strong></p>
<pre>// Build a right-aligned bar for: OK, Cancel, Apply
 ButtonBarBuilder2 builder = new ButtonBarBuilder2();
 builder.addGlue();
 builder.addButton(okButton);
 builder.addRelatedGap();
 builder.addButton(cancelButton);
 builder.addRelatedGap();
 builder.addButton(applyButton);
 return builder.getPanel();

 // Add a sequence of related buttons
 ButtonBarBuilder2 builder = new ButtonBarBuilder2();
 builder.addGlue();
 builder.addButton(okButton, cancelButton, applyButton);
 return builder.getPanel();

 // Add a sequence of related buttons for given Actions
 ButtonBarBuilder2 builder = new ButtonBarBuilder2();
 builder.addGlue();
 builder.addButton(okAction, cancelAction, applyAction);
 return builder.getPanel();</pre>
Buttons are added to a builder individually or as a sequence. To honor the platform's button order (left-to-right vs. right-to-left) this builder uses the <em>leftToRightButtonOrder</em> property. It is initialized with the current LayoutStyle's button order, which in turn is left-to-right on most platforms and right-to-left on the Mac OS X. Builder methods that create sequences of buttons (e.g. <code><font face="新宋体">addButton(JComponent[])</font></code> honor the button order. If you want to ignore the default button order, you can either add individual buttons, or create a ButtonBarBuilder2 instance with the order set to left-to-right. For the latter see <code><font face="新宋体">createLeftToRightBuilder()</font></code>. Also see the button order example below.
<p><strong>Example:</strong><br>
The following example builds a button bar with <em>Help</em> button on the left-hand side and <em>OK, Cancel, Apply</em> buttons on the right-hand side.</p>
<pre>private JPanel createHelpOKCancelApplyBar(
         JButton help, JButton ok, JButton cancel, JButton apply) {
     ButtonBarBuilder2 builder = new ButtonBarBuilder2();
     builder.addButton(help);
     builder.addUnrelatedGap();
     builder.addGlue();
     builder.addButton(new JButton[]{ok, cancel, apply});
     return builder.getPanel();
 }</pre>
<p><strong>Button Order Example:</strong><br>
The following example builds three button bars where one honors the platform's button order and the other two ignore it.</p>
<pre>public JComponent buildPanel() {
     FormLayout layout = new FormLayout(&quot;pref&quot;);
     DefaultFormBuilder rowBuilder = new DefaultFormBuilder(layout);
     rowBuilder.setDefaultDialogBorder();

     rowBuilder.append(buildButtonSequence(new ButtonBarBuilder2()));
     rowBuilder.append(buildButtonSequence(ButtonBarBuilder2.createLeftToRightBuilder()));
     rowBuilder.append(buildIndividualButtons(new ButtonBarBuilder2()));

     return rowBuilder.getPanel();
 }

 private Component buildButtonSequence(ButtonBarBuilder2 builder) {
     builder.addButton(new JButton[] {
             new JButton(&quot;One&quot;),
             new JButton(&quot;Two&quot;),
             new JButton(&quot;Three&quot;)
     });
     return builder.getPanel();
 }

 private Component buildIndividualButtons(ButtonBarBuilder2 builder) {
     builder.addButton(new JButton(&quot;One&quot;));
     builder.addRelatedGap();
     builder.addButton(new JButton(&quot;Two&quot;));
     builder.addRelatedGap();
     builder.addButton(new JButton(&quot;Three&quot;));
     return builder.getPanel();
 }</pre>
<p> </p></div></body></html>