<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>jQuery 合并相同内容的单元格</title></head><body><h1>jQuery 合并相同内容的单元格</h1><div><div>
<h1 class="title_txt">jQuery 合并相同内容的单元格</h1>
<p>运行函数合并单元格后的表格：</p>
<p> </p>
<table border="1" sizcache="1" sizset="0">
    <tbody sizcache="0" sizset="0">
        <tr>
            <th>h1</th>
            <th>h2</th>
            <th>h3</th>
            <th>h4</th>
            <th>h5</th>
            <th>h6</th>
        </tr>
        <tr>
            <td rowspan="7">a1</td>
            <td rowspan="4">ab1</td>
            <td rowspan="2">abc1</td>
            <td>1234</td>
            <td>222</td>
            <td>333</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="2">a1</td>
            <td style="display: none" jquery1255166906906="12">ab1</td>
            <td style="display: none" jquery1255166906906="19">abc1</td>
            <td>1.1</td>
            <td>2.1</td>
            <td>3.1</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="3">a1</td>
            <td style="display: none" jquery1255166906906="13">ab1</td>
            <td rowspan="2">abc2</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="4">a1</td>
            <td style="display: none" jquery1255166906906="14">ab1</td>
            <td style="display: none" jquery1255166906906="20">abc2</td>
            <td>7</td>
            <td>8</td>
            <td>9</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="5">a1</td>
            <td rowspan="3">ab2</td>
            <td>abc1</td>
            <td>10</td>
            <td>11</td>
            <td>12</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="6">a1</td>
            <td style="display: none" jquery1255166906906="15">ab2</td>
            <td>abc2</td>
            <td>13</td>
            <td>14</td>
            <td>15</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="7">a1</td>
            <td style="display: none" jquery1255166906906="16">ab2</td>
            <td>abc3</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td rowspan="5">a2</td>
            <td>ab1</td>
            <td rowspan="3">abc1</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="8">a2</td>
            <td>ab2</td>
            <td style="display: none" jquery1255166906906="21">abc1</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="9">a2</td>
            <td rowspan="3">ab3</td>
            <td style="display: none" jquery1255166906906="22">abc1</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="10">a2</td>
            <td style="display: none" jquery1255166906906="17">ab3</td>
            <td rowspan="2">abc2</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td style="display: none" jquery1255166906906="11">a2</td>
            <td style="display: none" jquery1255166906906="18">ab3</td>
            <td style="display: none" jquery1255166906906="23">abc2</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
    </tbody>
</table>
<p>代码： hxzon:改th为td.</p>
</div>
<div>
<pre>jQuery.fn.rowspan = function(colIdx) {<br> return this.each(function(){</pre>
<pre>  var that;<br>  $('tr', this).each(function(row) {<br>  $('td:eq('+colIdx+')', this).filter(':visible').each(function(col) {<br>  //add that!=null by hxzon<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if (that!=null &amp;&amp; $(this).html() == $(that).html()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  rowspan = $(that).attr(&quot;rowSpan&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if (rowspan == undefined) {<br>   <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(that).attr(&quot;rowSpan&quot;,1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  rowspan = $(that).attr(&quot;rowSpan&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  rowspan = Number(rowspan)+1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(that).attr(&quot;rowSpan&quot;,rowspan); // do your action for the colspan cell here<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(this).hide(); // .remove(); // do your action for the old cell here<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  that = this;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  //that = (that == null) ? this : that; // set the that if not already set<br>  });<br> });</pre>
<pre> });<br>}</pre>
<pre><br>jQuery.fn.colspan = function(rowIdx) {<br> return this.each(function(){</pre>
<pre>  var that;<br>  $('tr', this).filter(&quot;:eq(&quot;+rowIdx+&quot;)&quot;).each(function(row) {<br>  $(this).find('td').filter(':visible').each(function(col) {<br>  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if (that!=null &amp;&amp; $(this).html() == $(that).html()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  colspan = $(that).attr(&quot;colSpan&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if (colspan == undefined) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(that).attr(&quot;colSpan&quot;,1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  colspan = $(that).attr(&quot;colSpan&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  colspan = Number(colspan)+1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(that).attr(&quot;colSpan&quot;,colspan);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(this).hide(); // .remove();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  that = this;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  //that = (that == null) ? this : that; // set the that if not already set<br>  });<br> });</pre>
<pre> });<br>}</pre>
页面：hxzon:合并前三列相同项。
<pre>&lt;html&gt;<br>&lt;head&gt;<br>&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.3.2.min.js&quot; &gt;&lt;/script&gt;<br>&lt;script type=&quot;text/javascript&quot; src=&quot;tablespan.js&quot; &gt;&lt;/script&gt;<br>&lt;script type=&quot;text/javascript&quot; &gt;<br>$(function(){<br> alert('stop');<br> $(&quot;#table1&quot;).rowspan(0);<br> $(&quot;#table1&quot;).rowspan(1);<br> $(&quot;#table1&quot;).rowspan(2);<br> });<br> &lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;table border=&quot;1&quot; id=&quot;table1&quot;&gt;<br> &lt;tbody&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h1&lt;/th&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h2&lt;/th&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h3&lt;/th&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h4&lt;/th&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h5&lt;/th&gt;<br>&nbsp;&nbsp;&nbsp; &lt;th&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; h6&lt;/th&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1234&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 222&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 333&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1.1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2.1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3.1&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 4&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 5&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 6&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 7&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 8&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 9&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 10&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 11&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 12&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 13&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 14&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 15&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc3&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab3&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab3&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br>&nbsp;&nbsp; &lt;tr&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; a2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; ab3&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; abc2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 1&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 2&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp; &lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp; 3&lt;/td&gt;<br>&nbsp;&nbsp; &lt;/tr&gt;<br> &lt;/tbody&gt;<br>&lt;/table&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</pre>
</div></div></body></html>