<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>ch.qos.logback.classic.html.HTMLLayout</title></head><body><h1>ch.qos.logback.classic.html.HTMLLayout</h1><div><pre>ch.qos.logback.classic.html.HTMLLayout</pre>
<h3><a href="http://logback.qos.ch/manual/layouts.html#ClassicHTMLLayout" name="ClassicHTMLLayout">HTMLLayout</a></h3>
<p><code><a href="http://logback.qos.ch/manual/layouts.html#ClassicHTMLLayout"><font face="NSimsun">http://logback.qos.ch/manual/layouts.html#ClassicHTMLLayout</font></a></code></p>
<p><a href="http://logback.qos.ch/xref/ch/qos/logback/classic/html/HTMLLayout.html"><code><font face="NSimsun">HTMLLayout</font></code></a> (as included in logback-classic) generates logs in HTML format. <code><font face="NSimsun">HTMLLayout</font></code> outputs logging events in an HTML table where each row of the table corresponds to a logging event.</p>
<p>Here is a sample output produced by <code><font face="NSimsun">HTMLLayout</font></code> using its default CSS stylesheet:</p>
<p><img alt="HTML Layout Sample Image" src="http://logback.qos.ch/manual/images/htmlLayout0.gif"></p>
<p>The content of table columns are specified with the help of a conversion pattern. See <a href="http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout"><code><font face="NSimsun">PatternLayout</font></code></a> for documentation on conversion patterns. As such, you have full control over the contents and format of the table. You can select and display any combination of converters <code><font face="NSimsun">PatternLayout</font></code> knows about.</p>
<p>One notable exception about the use of <code><font face="NSimsun">PatternLayout</font></code> with <code><font face="NSimsun">HTMLLayout</font></code> is that conversion specifiers should not be separated by space characters or more generally by literal text. Each specifier found in the pattern will result in a separate column. Likewise a separate column will be generated for each block of literal text found in the pattern potentially wasting valuable real estate on your screen.</p>
<p>Here is simple but functional configuration file illustrating the use of <code><font face="NSimsun">HTMLLayout</font></code>.</p>
<pre class="prettyprint source"><span class="pun">&lt;</span><span class="tag">configuration</span><span class="pln"> </span><span class="atn">debug</span><span class="pun">=</span><span class="atv">&quot;true&quot;</span><span class="pun">&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;</span><span class="tag">appender</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">&quot;FILE&quot;</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.core.FileAppender&quot;</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">layout</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.classic.html.HTMLLayout&quot;</span><span class="pun">&gt;</span><span class="pln"><br>      </span><strong><span class="pun">&lt;</span><span class="tag">pattern</span><span class="pun">&gt;</span><span class="pln">%relative%thread%mdc%level%logger%msg</span><span class="pun">&lt;/</span><span class="tag">pattern</span><span class="pun">&gt;</span></strong><span class="pln"><br>    </span><span class="pun">&lt;/</span><span class="tag">layout</span><span class="pun">&gt;</span><span class="pln"><br>   </span><span class="pun">&lt;</span><span class="tag">File</span><span class="pun">&gt;</span><span class="pln">/test.html</span><span class="pun">&lt;/</span><span class="tag">File</span><span class="pun">&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;/</span><span class="tag">appender</span><span class="pun">&gt;</span><span class="pln"><br><br>  </span><span class="pun">&lt;</span><span class="tag">root</span><span class="pln"> </span><span class="atn">level</span><span class="pun">=</span><span class="atv">&quot;debug&quot;</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">appender-ref</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">&quot;FILE&quot;</span><span class="pln"> </span><span class="pun">/&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;/</span><span class="tag">root</span><span class="pun">&gt;</span><span class="pln"><br></span><span class="pun">&lt;/</span><span class="tag">configuration</span><span class="pun">&gt;</span></pre>
<p>Launching the <code><font face="NSimsun">TrivialMain</font></code> application listed below will create the file <em>test.html</em> on your local drive.</p>
<pre class="prettyprint source"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">Logger</span><span class="pun">;</span><span class="pln"><br></span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">LoggerFactory</span><span class="pun">;</span><span class="pln"><br><br></span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TrivialMain</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InterruptedException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>    </span><span class="typ">Logger</span><span class="pln"> logger </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoggerFactory</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">TrivialMain</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln"><br>    </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">i </span><span class="pun">%</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>        logger</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">&quot;an info message &quot;</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span><span class="pln"><br>      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>        logger</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">&quot;hello world number&quot;</span><span class="pln"> </span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span><span class="pln"><br>      </span><span class="pun">}</span><span class="pln"><br>    </span><span class="pun">}</span><span class="pln"><br>    logger</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="str">&quot;Finish off with fireworks&quot;</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Exception</span><span class="pun">(</span><span class="str">&quot;Just testing&quot;</span><span class="pun">));</span><span class="pln"><br>  </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></pre>
<p>The contents of <em>test.html</em> should be similar to:</p>
<p><img alt="HTML Layout Sample Image" src="http://logback.qos.ch/manual/images/htmlLayout1.jpg"></p>
<h3>Stack traces</h3>
<p>If you use the <em>%em</em> conversion word to display stack traces, a table column will be created to display stack traces. In most cases the column will be empty, wasting screen real-estate. Moreover, printing a stack trace on a separate column does not yield very readable results. Fortunately, the <em>%ex</em> conversion word is not the only way to display stack traces.</p>
<p>A better solution is available through implementations of <code><font face="NSimsun">IThrowableRenderer</font></code> interface. Such an implementation can be assigned to <code><font face="NSimsun">HTMLLayout</font></code> to manage the display data related to exceptions. By default, a <a href="http://logback.qos.ch/xref/ch/qos/logback/classic/html/DefaultThrowableRenderer.html"><code><font face="NSimsun">DefaultThrowableRenderer</font></code></a> is assigned to each <code><font face="NSimsun">HTMLLayout</font></code> instance. It writes exceptions on a <em>new table row</em>, along with its stacktrace, in an easily readable manner, as shown on the figure above.</p>
<p>If for some reason, you still wish to use the <em>%ex</em> pattern, then you can specify <a href="http://logback.qos.ch/xref/ch/qos/logback/core/html/NOPThrowableRenderer.html"><code><font face="NSimsun">NOPThrowableRenderer</font></code></a> in the configuration file in order to disable displaying a separate row for the stack trace. We don't have the faintest idea why you would want to do that, but if you wished, you could.</p>
<h3>CSS</h3>
<p>The presentation of the HTML created by <code><font face="NSimsun">HTMLLayout</font></code> is controlled through a Cascading Style Sheet (CSS). In the absence of specific instructions, <code><font face="NSimsun">HTMLLayout</font></code> will default to its internal CSS. However, your can instruct <code><font face="NSimsun">HTMLLayout</font></code> to use an external CSS file. For this purpose a <code><font face="NSimsun">cssBuilder</font></code> element can be nested within a <code><font face="NSimsun">&lt;layout&gt;</font></code> element, as shown below.</p>
<pre class="prettyprint source"><span class="pun">&lt;</span><span class="tag">layout</span><span class="pun">&gt;</span><span class="pln"><br>  ...<br>  </span><span class="pun">&lt;</span><span class="tag">cssBuilder</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.core.html.UrlCssBuilder&quot;</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">url</span><span class="pun">&gt;</span><span class="pln">path_to_StyleFile.css</span><span class="pun">&lt;/</span><span class="tag">url</span><span class="pun">&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;/</span><span class="tag">cssBuilder</span><span class="pun">&gt;</span><span class="pln"> <br>  ...<br></span><span class="pun">&lt;/</span><span class="tag">layout</span><span class="pun">&gt;</span></pre>
<p>The <code><font face="NSimsun">HTMLLayout</font></code> is often used in conjunction with <code><font face="NSimsun">SMTPAppender</font></code>, in order to send an email pleasantly formatted in HTML. Here is a typical configuration:</p>
<pre class="prettyprint source"><span class="pun">&lt;</span><span class="tag">configuration</span><span class="pun">&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;</span><span class="tag">appender</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">&quot;SMTP&quot;</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.classic.net.SMTPAppender&quot;</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">layout</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.classic.html.HTMLLayout&quot;</span><span class="pun">&gt;</span><span class="pln"><br>      </span><span class="pun">&lt;</span><span class="tag">pattern</span><span class="pun">&gt;</span><span class="pln">%relative%thread%mdc%level%class%msg</span><span class="pun">&lt;/</span><span class="tag">pattern</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;/</span><span class="tag">layout</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">From</span><span class="pun">&gt;</span><span class="pln">sender.email@domain.net</span><span class="pun">&lt;/</span><span class="tag">From</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">SMTPHost</span><span class="pun">&gt;</span><span class="pln">mail.domain.net</span><span class="pun">&lt;/</span><span class="tag">SMTPHost</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">Subject</span><span class="pun">&gt;</span><span class="pln">LastEvent: %class - %msg </span><span class="pun">&lt;/</span><span class="tag">Subject</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">To</span><span class="pun">&gt;</span><span class="pln">destination.email@domain.net</span><span class="pun">&lt;/</span><span class="tag">To</span><span class="pun">&gt;</span><span class="pln"> <br>  </span><span class="pun">&lt;/</span><span class="tag">appender</span><span class="pun">&gt;</span><span class="pln"><br><br>  </span><span class="pun">&lt;</span><span class="tag">root</span><span class="pln"> </span><span class="atn">level</span><span class="pun">=</span><span class="atv">&quot;debug&quot;</span><span class="pun">&gt;</span><span class="pln"><br>    </span><span class="pun">&lt;</span><span class="tag">appender-ref</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">&quot;SMTP&quot;</span><span class="pln"> </span><span class="pun">/&gt;</span><span class="pln"><br>  </span><span class="pun">&lt;/</span><span class="tag">root</span><span class="pun">&gt;</span><span class="pln"><br></span><span class="pun">&lt;/</span><span class="tag">configuration</span><span class="pun">&gt;</span></pre>
<p><code><font face="NSimsun">HTMLLayout</font></code> can also be used with any <code><font face="NSimsun">FileAppender</font></code>, including a a rolling file appender, as shown in the sample configuration below.</p>
<pre class="prettyprint source"><span class="pun">&lt;</span><span class="tag">configuration</span><span class="pun">&gt;</span><span class="pln"><br>   </span><span class="pun">&lt;</span><span class="tag">appender</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">&quot;FILE&quot;</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="pun">&gt;</span><span class="pln"><br>   </span><span class="pun">&lt;</span><span class="tag">rollingPolicy</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="pun">&gt;</span><span class="pln"><br>     </span><span class="pun">&lt;</span><span class="tag">ActiveFileName</span><span class="pun">&gt;</span><span class="pln">lastLogEntries.html</span><span class="pun">&lt;/</span><span class="tag">ActiveFileName</span><span class="pun">&gt;</span><span class="pln"><br>     </span><span class="pun">&lt;</span><span class="tag">FileNamePattern</span><span class="pun">&gt;</span><span class="pln">logEntries.%d{yyyy-MM-dd}.log</span><span class="pun">&lt;/</span><span class="tag">FileNamePattern</span><span class="pun">&gt;</span><span class="pln"><br>   </span><span class="pun">&lt;/</span><span class="tag">rollingPolicy</span><span class="pun">&gt;</span><span class="pln"><br>   <br>   </span><span class="pun">&lt;</span><span class="tag">layout</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.classic.html.HTMLLayout&quot;</span><span class="pun">&gt;</span><span class="pln"><br>      </span><span class="pun">&lt;</span><span class="tag">cssBuilder</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">&quot;ch.qos.logback.core.html.UrlCssBuilder&quot;</span><span class="pun">&gt;</span><span class="pln"><br>        </span><span class="pun">&lt;</span><span class="tag">url</span><span class="pun">&gt;</span><span class="pln">address_of_a_custom_stylesheet.css</span><span class="pun">&lt;/</span><span class="tag">url</span><span class="pun">&gt;</span><span class="pln"><br>      </span><span class="pun">&lt;/</span><span class="tag">cssBuilder</span><span class="pun">&gt;</span><span class="pln">     <br>      </span><span class="pun">&lt;</span><span class="tag">Pattern</span><span class="pun">&gt;</span><span class="pln">%relative%thread%mdc%level%logger%msg</span><span class="pun">&lt;/</span><span class="tag">Pattern</span><span class="pun">&gt;</span><span class="pln"><br>      </span><strong><span class="pun">&lt;</span><span class="tag">Title</span><span class="pun">&gt;</span><span class="pln">Logging Events</span><span class="pun">&lt;/</span><span class="tag">Title</span><span class="pun">&gt;</span></strong><span class="pln"><br>    </span><span class="pun">&lt;/</span><span class="tag">layout</span><span class="pun">&gt;</span><span class="pln"><br> </span><span class="pun">&lt;/</span><span class="tag">appender</span><span class="pun">&gt;</span><span class="pln"> <br><br> </span><span class="pun">&lt;</span><span class="tag">root</span><span class="pln"> </span><span class="atn">level</span><span class="pun">=</span><span class="atv">&quot;debug&quot;</span><span class="pun">&gt;</span><span class="pln"><br>   </span><span class="pun">&lt;</span><span class="tag">appender-ref</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">&quot;FILE&quot;</span><span class="pln"> </span><span class="pun">/&gt;</span><span class="pln"><br> </span><span class="pun">&lt;/</span><span class="tag">root</span><span class="pun">&gt;</span><span class="pln"><br></span><span class="pun">&lt;/</span><span class="tag">configuration</span><span class="pun">&gt;</span></pre></div></body></html>