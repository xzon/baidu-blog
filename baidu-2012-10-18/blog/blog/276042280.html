<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>企业中的NoSQL</title></head><body><h1>企业中的NoSQL</h1><div><h1>企业中的NoSQL</h1>
<p> </p>
<p>非关系数据库比较</p>
<p><a href="http://www.infoq.com/cn/articles/nosql-in-the-enterprise">http://www.infoq.com/cn/articles/nosql-in-the-enterprise</a></p>
<p><a href="http://www.infoq.com/articles/nosql-in-the-enterprise">http://www.infoq.com/articles/nosql-in-the-enterprise</a></p>
<p>作者 <strong><a class="editorlink" href="http://www.infoq.com/cn/author/Sourav-Mazumder">Sourav Mazumder</a> </strong>译者<strong><a class="editorlink" href="http://www.infoq.com/cn/author/%E9%BB%84%E7%92%9C"> 黄璜</a> </strong>发布于 2010年7月9日 上午1时50分</p>
<h2>引子</h2>
<p>作为企业架构师，我的职业习惯之一，就是不断的探求各种新的有前景的概念和思想，看其是否有潜力为我所服务的来自各行各业的企业客户带来价值。同样出于对这种理念的追求，我对NoSQL领域的关注了也有一段时间了，甚至从这个术语产生(或者错误的产生?)之前就开始了。Google首先在这方面点了一把火，发布了论文<a href="http://labs.google.com/papers/bigtable.html">Big Table架构</a>，对关系数据库是银弹这种普遍的信念提出了质疑，而Amazon关于<a href="http://s3.amazonaws.com/AllThingsDistributed/sosp/amazon-dynamo-sosp2007.pdf">Dynamo</a>的论文则紧随其后。 过去的一年中我们见证了NoSQL强劲的势头，在这一领域有多达<a href="http://nosql-database.org/">25种产品/解决方案</a>发布，并且NoSQL的触角已经伸向了业界的各个角落。在此前提下，我最近考虑深入这一领域，评估一下我的客户究竟如何才能从这种NoSQL运动中获益。不仅如此，我还想探究对于企业来说，是否是到了该认真考虑采纳NoSQL的合适时机了。</p>
<h2>什么是NoSQL&mdash;&mdash;快速回顾</h2>
<p>像许多关注这一领域的人一样，我不喜欢从本质上将SQL与NoSQL这一术语对立起来。同时我对该术语现有的解释&quot;Not Only SQL&quot;也不甚满意。对我来说，我们这里所讨论的并非是是否使用SQL。<strong>(相反的是，我们仍然可以选择类似SQL这样的查询接口(缺少对join等的支持)来与这些数据库交互，使用现有的资源和技术来管理开发伸缩性和可维护性。)</strong> 这一运动是要找到存储和检索数据的其他高效的途径，而不是盲目地在任何情况下都把关系数据库当作万金油。因此，我认为'Non Relational Database'(非关系型数据库)能够更好的表达这一思想。</p>
<p>无论采用哪个名字，&ldquo;非关系型数据库&rdquo;这一范围所传达出来的&ldquo;囊括所有&rdquo;类型的意味，使得这一概念比较模糊(并且它还是否定型的)。这又使得人们(特别是企业中的决策者)对于哪些是属于这个范围，哪些不是，更重要的是，对他们来说这到底意味着什么，感到非常迷惑。</p>
<p>为了解答这些疑问，我尝试通过以下几点特征的描述，来刻画&ldquo;非关系型数据库&rdquo;的内在本质。</p>
<p>所谓&ldquo;非关系型数据库&rdquo;指的是</p>
<ol>
    <li>使用松耦合类型、可扩展的数据模式来对数据进行逻辑建模(Map，列，文档，图表等)，而不是使用固定的关系模式元组来构建数据模型。</li>
    <li>以遵循于<a href="http://www.cs.berkeley.edu/~brewer/cs262b-2004/PODC-keynote.pdf">CAP定理</a>（能保证在一致性，可用性和分区容忍性三者中中达到任意两个）的跨多节点数据分布模型而设计，支持水平伸缩。这意味着对于多数据中心和动态供应（在生产集群中透明地加入/删除节点）的必要支持，也即弹性(Elasticity)。</li>
    <li>拥有在磁盘或内存中，或者在这两者中都有的，对数据持久化的能力，有时候还可以使用可热插拔的定制存储。</li>
    <li>支持多种的'Non-SQL'接口(通常多于一种)来进行数据访问。</li>
</ol>
<p><img src="http://www.infoq.com/resource/articles/nosql-in-the-enterprise/en/resources/Image1.JPG"></p>
<p>围绕着图中四个特征的（数据持久性、逻辑数据模型、数据分布模型和接口）&ldquo;非关系型数据库&rdquo;的各种变形，在最近的一些<a href="http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/">文章</a>中有详尽的描述，并且在因特网上有着广泛的传播。所以我就不做过多繁复的描述，而是通过一些例子对关键的方向进行总结，供快速参考：</p>
<p><strong>接口</strong>&mdash;&mdash;REST (HBase，CouchDB，Riak等)，MapReduce (HBase，CouchDB，MongoDB，Hypertable等)，Get/Put (Voldemort，Scalaris等)，Thrift (HBase，Hypertable，Cassandra等)，语言特定的API(MongoDB)。</p>
<p><strong>逻辑数据模型</strong>&mdash;&mdash;面向键值对的(Voldemort，Dynomite 等)，面向Column Family的(BigTable，HBase，Hypertable 等)，面向文档的(Couch DB，MongoDB等)，面向图的(Neo4j， Infogrid等)</p>
<p><strong>数据分布模型</strong>&mdash;&mdash;一致性和可用性(HBase，Hypertable， MongoDB等)， 可用性和可分区性(Cassandra等)。<strong>一致性和可分区性的组合会导致一些非额定的节点产生可用性的损失。有趣的是目前还没有一个&ldquo;非关系型数据库&rdquo;支持这一组合。</strong></p>
<p><strong>数据持久性</strong>&mdash;&mdash;基于内存的(如Redis，Scalaris， Terrastore)，基于磁盘的(如MongoDB，Riak等)，或内存及磁盘二者的结合(如 HBase，Hypertable，Cassandra)。存储的类型有助于我们辨别该解决方案适用于哪种类型。然而，在大多数情况下人们发现基于组合方案的解决方案是最佳的选择。既能通过内存数据存储支持高性能，又能在写入足够多的数据后存储到磁盘来保证持续性。</p>
<h2>如何将其与企业IT融合</h2>
<p>如今的企业中，并非所有用例都直观地倾向于使用关系型数据库，或者都需要严格的ACID属性(特别是一致性和隔离性)。在80年代及90年代，绝大部分存储在企业数据库里的数据都是结构化的业务事务的&ldquo;记录&rdquo;，必须用受控的方式来生成或访问，而如今它已一去不复返了。无可争辩的是，仍有这一类型的数据在那里，并将继续也应该通过关系型数据库来建模，存储和访问。但对于过去15年以来，随着Web的发展，电子商务和社交计算的兴起所引起的企业里不受控的非结构化并且面向信息的数据大爆炸，该如何应对呢？企业确实不需要关系型数据库来管理这些数据，因为关系型数据库的特点决定了它不适用于这些数据的性质和使用方式。</p>
<p><img src="http://www.infoq.com/resource/articles/nosql-in-the-enterprise/en/resources/Image2.JPG"></p>
<p>上图总结了现今以web为中心的企业中信息管理的新兴模式。而&ldquo;非关系型数据库&rdquo; 是处理这些趋势的最佳选择(较之关系型数据库来说)，提供了对非结构化数据的支持，拥有支持分区的水平伸缩性，支持高可用性等等。</p>
<p>以下是支持这一观点的一些实际应用场景：</p>
<p><strong>日志挖掘</strong>&mdash;&mdash;集群里的多个节点都会产生服务器日志、应用程序日志和用户活动日志等。对于解决生产环境中的问题，日志挖掘工具非常有用，它能访问跨服务器的日志记录，将它们关联起来并进行分析。使用&ldquo;非关系型数据库&rdquo;来定制这样的解决方案将会非常容易。</p>
<p><strong>分析社交计算&mdash;&mdash;</strong>许多企业如今都为用户(内部用户、客户和合作伙伴)提供通过消息论坛，博客等方式来进行社交计算的能力。挖掘这些非结构化的数据对于获得用户的喜好偏向以及进一步提升服务有着至关重要的作用。使用&ldquo;非关系型数据库&rdquo; 可以很好的解决这一需求。</p>
<p><strong>外部数据feed聚合&mdash;&mdash;</strong>许多情况下企业需要消费来自合作伙伴的数据。显然，就算经过了多轮的讨论和协商，企业对于来自合作伙伴的数据的格式仍然没有发言权。同时，许多情况下，基于合作伙伴业务的变更，这些数据格式也频繁的发生变化。通过&ldquo;非关系型数据库&rdquo;来开发或定制一个ETL解决方案能够非常成功的解决这一问题。</p>
<p><strong>高容量的EAI系统</strong>&mdash;&mdash;许多企业的EAI系统都有高容量传输流(不管是基于产品的还是定制开发的)。出于可靠性和审计的目的，这些通过EAI系统的消息流通常都需要持久化。对于这一场景，&ldquo;非关系型数据库&rdquo; 再次体现出它十分适用于底层的数据存储，只要能给定环境中源系统和目标系统的数据结构更改和所需的容量。</p>
<p><strong>前端订单处理系统</strong>&mdash;&mdash;随着电子商务的膨胀，通过不同渠道流经零售商、银行和保险供应商、娱乐服务供应商、物流供应商等等的订单、应用、服务请求的容量十分巨大。同时，由于不同渠道的所关联的行为模式的限制，每种情况下系统所使用的信息结构都有所差异，需要加上不同的规则类型。在此之上，绝大部分数据不需要即时的处理和后端对帐。所需要的是，当终端用户想要从任何地方推送这些数据时，这些请求都能够被捕获并且不会被打断。随后，通常会有一个对帐系统将其更新到真正的后端源系统并更新终端用户的订单状态。这又是一个可以应用&ldquo;非关系型数据库&rdquo;的场景，可用于初期存储终端用户的输入。这一场景是体现&ldquo;非关系型数据库&rdquo;的应用的极佳例子，它具有高容量，异构的输入数据类型和对帐的&quot;最终一致性&quot;等等特点。</p>
<p><strong>企业内容管理服务</strong>&mdash;&mdash;出于各种各样的目的，内容管理在企业内部得到了广泛的应用，横跨多个不同的功能部门比如销售、市场、零售和人力资源等。企业大多数时间所面临的挑战是用一个公共的内容管理服务平台，将不同部门的需求整合到一起，而它们的元数据是各不相同的。这又是&ldquo;非关系型数据库&rdquo;发挥作用的地方。</p>
<p><strong>合并和收购</strong>&mdash;&mdash;企业在合并与收购中面临巨大的挑战，因为他们需要将适应于相同功能的系统整合起来。&ldquo;非关系型数据库&rdquo; 可解决这一问题，不管是快速地组成一个临时的公共数据存储，或者是架构一个未来的数据存储来调和合并的公司之间现有公共应用程序的结构。</p>
<p>但我们如何才能准确的描述，相对于传统的关系型数据库，企业使用&ldquo;非关系型数据库&rdquo;带来的好处呢？下面是可通过非关系型数据库的核心特点(正如上一节所讨论的)而获得的一些主要的好处，即企业的任何IT决策都会参考的核心参数&mdash;&mdash;成本削减，更好的周转时间和更优良的质量。</p>
<p><img src="http://www.infoq.com/resource/articles/nosql-in-the-enterprise/en/resources/Image3.JPG"></p>
<h3>业务灵活性&mdash;&mdash;更短的周转时间</h3>
<p>&ldquo;非关系型数据库&rdquo;能够以两种基本的方式带来业务灵活性。</p>
<ul>
    <li>模式自由的逻辑数据模型有助于在为任何业务进行调整时带来更快的周转时间，把对现有应用和功能造成影响减到最少。在大多数情况下因任意的变更而给你带来的迁移工作几乎为零。</li>
    <li>水平伸缩性能够在当越来越多的用户负载造成负载周期性变化，或者应用突然变更的使用模式时，提供坚固的保障。面向水平伸缩性的架构也是迈向基于SLA构建(例如云)的第一步，这样才能保证在不断变化的使用情形下业务的延续性。</li>
</ul>
<h3>更佳的终端用户体验&mdash;&mdash;更优越的质量</h3>
<p>在现今企业IT中，应用的质量主要由终端用户的满意度来决定。&ldquo;非关系型数据库&rdquo;通过解决如下终端用户的考虑因素，能够达到同样的效果，而这些因素也是最容易发生和最难以处理的。</p>
<ul>
    <li>&ldquo;非关系型数据库&rdquo; 为提升应用的性能带来了极大的机会。分布式数据的核心概念是保证磁盘I/O(寻道速率)绝不能成为应用性能的瓶颈。尽管性能更多的是由传输速率来决定。在此之上，绝大部分解决方案支持各种不同的新一代的高速计算的范式，比如MapReduce，排序列，Bloom Filter，仅可追加的B树，Memtable等。</li>
    <li>现今用户满意度的另一个重要的方面就是可靠性。终端用户希望在想要访问应用时就能访问到，并且至少是在当他们分配到时间的时候能随时执行他们的任务。所以不可用的应用需要不惜代价的避免。许多现代的&ldquo;非关系型数据库&rdquo;都能适应并支持这一类有着严格和<a href="http://queue.acm.org/detail.cfm?id=1466448">最终一致性</a>的可用性的需求。</li>
</ul>
<h3>更低的所有者总成本</h3>
<p>在如今的竞争市场中，企业IT支出随时都要仔细审查，以合理的成本获取合理的质量才值得赞许。在这一领域中&ldquo;非关系型数据库&rdquo;在一定程度上胜于传统的数据库，特别是当存储和处理的数据容量很大时。</p>
<ul>
    <li>水平伸缩性的基本前提保证了它们可以运行于廉价机器之上。这不仅削减了硬件资本的成本，同时还削减了诸如电力，维护等运维成本。同时这还进一步的为利用诸如云、虚拟数据中心等下一代低成本的基础设施打下了基础。</li>
    <li>从长期来看，更少的维护能带来更多的运维成本优势。对于关系型数据库，这绝对是一个需要存储大容量数据的场景。为大容量的数据调优数据库需要高超的技艺，也就意味着更高的成本。相较之下，&ldquo;非关系型数据库&rdquo;始终提供快速和响应的特点，就算是在数据大幅上升的情况下。索引和缓存也以同样的方式工作。开发者不必过多担心硬件、磁盘、重新索引及文件布局等，而是把更多的精力投入了应用程序的开发上。</li>
</ul>
<h2>企业采用中所面临的挑战</h2>
<p>抛开所有这些长远的好处，在企业拥抱&ldquo;非关系型数据库&rdquo;之前，当然还需要经历各种各样的挑战。</p>
<p><img src="http://www.infoq.com/resource/articles/nosql-in-the-enterprise/en/resources/Image4.JPG"></p>
<p>不考虑因现有思想的转换和缺乏信心而产生的来自高层的阻力，目前我认为的最主要的战术性挑战是：</p>
<h3>为&ldquo;非关系型数据库&rdquo;认定正确的应用/使用场景</h3>
<p>尽管从理论上容易论证并非所有的企业数据都需要基于关系和ACID的系统，然而由于关系型数据库与企业数据间多年的绑定关系，要作出所有的数据可以通过非关系的解决方案而解耦的决定仍然有很多困难。许多时候IT经理(以及其它对于应用程序负有核心的底线责任的各级人员)不明白他们将会失去什么，这样的担忧对于从关系型数据库转变出来比较不利。企业IT最有价值的资产就是数据。因此，要作出决定使用一种不太明确或者未被广泛采用的解决方案来管理同样的数据，这种能力不仅需要转换思维方式，同时还需要来自高层的强大的支持(和推动)。</p>
<h3>我们如何选择最适合我们的产品/解决方案</h3>
<p>另一个重大的挑战是找出合适的产品/工具来提供&ldquo;非关系型数据库&rdquo;。正如前面所提到的那样，现今业界里面有多于25种不同的产品和解决方案，它们在四个方面有着不同的特点。正因为每个产品在这四个方面特点各异，所以要选择一个产品来应对所有的需求显得尤为困难。有的时候，可能在企业的不同部门使用到多种类型的非关系型数据库，最后人们可能会完全出于对标准的需要而转向关系型数据库。</p>
<h3>如何获得规模经济</h3>
<p>这一想法本质上是从前一个问题分支出来的。如果一个组织需要使用多个非关系型数据库解决方案(由于单个方案的适用问题)，那么保证在技术(开发者，管理者，支持人员)，基础设施(硬件成本，软件许可成本，支持成本，咨询成本)，以及工件(公共组件和服务)方面的规模经济就是一个大问题。这一方面与传统的关系型数据库解决方案比较起来确实更为严峻，因为大部分时间组织的数据存储都是以共享服务的模式在运行的。</p>
<h3>我们如何保证解决方案的可移植性</h3>
<p>从&ldquo;非关系型数据库&rdquo;的发展来看，我们可以很直观地推测在未来的几年中这一领域会有许多变化，比如供应商的合并，功能的进步以及标准化。所以对于企业来说一个更好的策略是不要把宝押在某个特定的产品/解决方案上，以后才可以更灵活的转换到一个更好的经过考验的产品。 由于现在的非关系型产品/解决方案大部分是私有的，因此IT决策者在考虑尝试&ldquo;非关系型数据库&rdquo;之前，不得不认真考虑可移植性这一重要的问题。这纯粹是出于保护现有投资的需要。</p>
<h3>我们如何获得合适的产品支持类型</h3>
<p>现在的&ldquo;非关系型数据库&rdquo;能通过外部组织而提供支持方案的少之又少。就算有，也无法与Oracle，IBM或者微软等相比。特别是在数据恢复，备份和特定的数据恢复方面，由于许多&ldquo;非关系型数据库&rdquo;在这些方面未能提供一个健壮而易于使用的机制，对于企业决策者来说，仍存在很大的问题。</p>
<h3>我们如何预算整体成本</h3>
<p>与重量级的关系型数据库相比，&ldquo;非关系型数据库&rdquo;通常在性能和伸缩性特征方面能提供的数据更少。我也没有发现有TPC基准程序方面和类似的其它方面的数据。这将企业决策者置于了一个&ldquo;没有方向&rdquo;的情况下，因为他们不知道需要在硬件、软件许可、基础设施管理和支持等方面支出多大的费用。要得出一个预算估计，缺乏判断的数据就成了一个主要的障碍。因此在项目启动阶段，大部分情况下决策者还是会选择基于熟悉的关系型数据库的解决方案。</p>
<p>有时候，就算可以得到这些数字，但也不足以用来形成TCO模型并与传统的基于关系型数据库的数据存储和非关系型数据存储进行整体的成本分析 (Capex+Opex)比较。通常情况下水平伸缩性所要求的大量的硬件机器(以及软件许可成本，支持成本)，如果与垂直伸缩性乍一比较，会让人觉得战战兢兢，除非由此带来的好处经过基于TCO模型的全方位比较仍然被证明是可以持续的。</p>
<h2>关于如何采用NoSQL的两点思考</h2>
<p>这是否意味着目前来看企业应该对NoSQL运动持观望的态度呢？并非如此。诚然，&ldquo;非关系型数据库&rdquo;对于广泛的采用来说还未到完全成熟的阶段。但 &ldquo;非关系型数据库&rdquo;作为未来企业骨架的潜力仍不能忽视。特别是不远的将来企业将更多地处理大容量的半结构化/非结构化以及最终一致性的数据，而不是相对而言小容量的，严格结构化的遵循ACID的数据。 所以现在而言至关重要的是做企业的关键决策人的思想工作，让他们明白企业的数据处理需要使用&ldquo;非关系型数据库&rdquo;。在这一过程中，要采取一些渐进的步骤把 &ldquo;非关系型数据库&rdquo;应用到企业IT的一些关键的方面(技术，人员和流程)，并产生一定的价值。这样，就可以用一种缓慢而稳健的方式从整体上来解决我们之前所总结出来的一系列问题。</p>
<p><img src="http://www.infoq.com/resource/articles/nosql-in-the-enterprise/en/resources/Image5.JPG"></p>
<h3>采用一个产品/解决方案</h3>
<p>如今市场上的选择非常多样化，可根据&ldquo;非关系型数据库&rdquo;侧重的面不同而进行差异化的处理。与此同时，企业应用场景可能需要不同类型的特点。然而以不同的解决方案来处理不同的应用/使用场景从规模经济的角度出发对于企业是不适宜的。因此最好是根据目标应用的需要最终落实到某一个具体的产品/解决方案上。需要注意的是大多数的解决方案在特性上都会有一些折中，有些特性可能在其它的产品中可以获得，有些可能只是在发展路线图当中暂时设定了一个位置。因为大部分的产品会在不久的将来不断趋于成熟，因此可以通过不同配置来提供不同的解决方案。所以只要现有的解决方案能适合目前大部分的需要，不妨作为一个起点将其采纳。</p>
<p>选择产品/解决方案的经验法则</p>
<ul>
    <li>支持所需要的逻辑数据模型应当被给予更高的权重。这将从实质上决定该解决方案在当前或未来能否灵活地适应不同的业务需求。</li>
    <li>调查该产品所支持的物理数据模型的合适与否，据此对这一解决方案所需要的水平伸缩性、可靠性、一致性和分区性作出合理的评估。这同样能表明备份和恢复机制的可能性。</li>
    <li>接口支持需要与企业标准的运行环境对齐。由于这些产品支持多样的接口，所以这一点可以得到很好的处理。</li>
    <li>只要产品支持水平伸缩性，对于持久化模型的选择就不再重要了。</li>
</ul>
<p>这里有一份一系列&ldquo;非关系型数据库&rdquo;的对照表。对于现在正认真考虑采用的企业来说，这是一个不错的起点。为了更贴近企业本身的情况，从25+的集合中挑选出的子集所用到的的关键选择标准是：</p>
<ol>
    <li>最重要的一点首先是企业应用程序必须支持有一定复杂程度的数据结构。否则的话，应用程序管理复杂性的责任将变得非常大。我认为比较合理的应当是介于纯粹的键值对与关系型模式中间的一种方案。出于这方面的考虑像Vlodemort，Tokyo Cabinet等产品就排除在了我的列表之外。</li>
    <li>第二点是以低成本的分片/分区为大容量数据提供水平支持。缺乏这样的支持就使得解决方案与任何关系型数据库无异了。因此像Neo4J(尽管他有丰富的基于图的模型)，Redis，CouchDB等此时此刻就被过滤出我的列表之外了。</li>
    <li>最后一条评判标准，在企业级推广之前我会考虑一定程度的商业支持。否则的话，一旦出现生产环境的问题，我该去找谁呢？出于这一点，我不得不将现在的一些明星产品排除在外，比如Cassandra(尽管有很大的可能不久的将来Rackspace或者Cloudera就会对其提供支持，因为它已经被用于一些生产环境里边了，比如Twitter，Digg，Facebook)。</li>
</ol>
<p>有了这些过滤标准，我可以精简这一列表，符合目前企业可用的产品有 <a href="http://www.mongodb.org/display/DOCS/Home">MongoDB</a> (下一版本就会提供shards支持)， <a href="http://riak.basho.com/">Riak</a>，<a href="http://hypertable.org/">Hypertable</a>和<a href="http://hadoop.apache.org/hbase/">HBase</a>。下面这个表格中总结了这四个产品的主要特性。一个企业可以基于自己具体的实际情况从中作出选择，找到最适合自己需要的特性。</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top" width="177">
            <p><strong>特性</strong></p>
            </td>
            <td valign="top" width="137">
            <p><strong>MongoDB</strong></p>
            </td>
            <td valign="top" width="131">
            <p><strong>Riak</strong></p>
            </td>
            <td valign="top" width="147">
            <p><strong>HyperTable</strong></p>
            </td>
            <td valign="top" width="147">
            <p><strong>HBase</strong></p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>逻辑数据模型</p>
            </td>
            <td valign="top" width="137">
            <p>富文档，并提供对内嵌文档的支持</p>
            </td>
            <td valign="top" width="131">
            <p>富文档</p>
            </td>
            <td valign="top" width="147">
            <p>列家族(Column Family)</p>
            </td>
            <td valign="top" width="147">
            <p>列家族(Column Family)</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>CAP支持</p>
            </td>
            <td valign="top" width="137">
            <p>CA</p>
            </td>
            <td valign="top" width="131">
            <p>AP</p>
            </td>
            <td valign="top" width="147">
            <p>CA</p>
            </td>
            <td valign="top" width="147">
            <p>CA</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>动态添加删除节点</p>
            </td>
            <td valign="top" width="137">
            <p>支持(很快在下一发布中就会加入)</p>
            </td>
            <td valign="top" width="131">
            <p>支持</p>
            </td>
            <td valign="top" width="147">
            <p>支持</p>
            </td>
            <td valign="top" width="147">
            <p>支持</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>多DC支持</p>
            </td>
            <td valign="top" width="137">
            <p>支持</p>
            </td>
            <td valign="top" width="131">
            <p>不支持</p>
            </td>
            <td valign="top" width="147">
            <p>支持</p>
            </td>
            <td valign="top" width="147">
            <p>支持</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>接口</p>
            </td>
            <td valign="top" width="137">
            <p>多种特定语言API(Java，Python，Perl，C#等)</p>
            </td>
            <td valign="top" width="131">
            <p>HTTP之上的JSON</p>
            </td>
            <td valign="top" width="147">
            <p>REST，Thrift，Java</p>
            </td>
            <td valign="top" width="147">
            <p>C++，Thrift</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>持久化模型</p>
            </td>
            <td valign="top" width="137">
            <p>磁盘</p>
            </td>
            <td valign="top" width="131">
            <p>磁盘</p>
            </td>
            <td valign="top" width="147">
            <p>内存加磁盘(可调的)</p>
            </td>
            <td valign="top" width="147">
            <p>内存加磁盘(可调的)</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>相对性能</p>
            </td>
            <td valign="top" width="137">
            <p>更优(C++编写)</p>
            </td>
            <td valign="top" width="131">
            <p>最优(Erlang编写)</p>
            </td>
            <td valign="top" width="147">
            <p>更优(C++编写)</p>
            </td>
            <td valign="top" width="147">
            <p>优(Java编写)</p>
            </td>
        </tr>
        <tr>
            <td valign="top" width="177">
            <p>商业支持</p>
            </td>
            <td valign="top" width="137">
            <p>10gen.com</p>
            </td>
            <td valign="top" width="131">
            <p>Basho Technologies</p>
            </td>
            <td valign="top" width="147">
            <p>Hypertable Inc</p>
            </td>
            <td valign="top" width="147">
            <p>Cloudera</p>
            </td>
        </tr>
    </tbody>
</table>
<h3>数据访问抽象</h3>
<p>为数据访问创建一个单独的抽象层对于&ldquo;非关系型数据库&rdquo;来说是必须的。它可以带来多方面的好处。首先，应用开发者可以与底层解决方案的细节完全隔离开来。这对于技术方面的伸缩性带来了好处。同时未来如果需要更改底层的解决方案也很方便。这也以一个标准的方式满足了多个应用的要求(即去掉了 Join，Group by等复杂特性的SQL)。</p>
<h3>为性能和伸缩性创建模型</h3>
<p>不管选择怎样的解决方案，使用标准技术(比如<a href="http://www.cs.washington.edu/homes/lazowska/qsp/">排队网络模型</a>，<a href="http://www.sce.carleton.ca/rads/lqns/lqn-documentation/">分层排队网络</a>等)来对性能和伸缩性进行建模都是高度推荐的。它能够为基本的服务器规划、拓扑以及整体的软件许可证成本，管理运行等提供必要的数据。这将实质上成为所有预算计划的主要参考数据，并对作出决策提供帮助。</p>
<h3>构建显式的冗余</h3>
<p>要防止数据丢失，除了将数据复制到备份服务器上，没有其它的办法了。尽管许多非关系型数据库提供自动复制功能，但仍然存在主节点单点失效的风险。因此最好是使用次节点备份，并准备好用于数据恢复和自动数据修复的脚本。出于这样的目的，应当充分的了解目标解决方案的物理数据模型，找出可能的恢复机制备选方案，基于企业的整体需求和实践来对这些选项作出评估。</p>
<h3>构建公共数据服务平台</h3>
<p>就像公共共享服务的关系型数据库一样，也可以构建非关系型数据库的公共数据服务来促进规模经济效应，满足基础设施和支持的需要。这对于未来进一步演化和更改也有帮助。这可以作为愿望列表上的最终目标，通过中期或长期的努力来达到这一成熟水平。然而，初始阶段就设立这样的远景有助于在整个过程中作出正确的决策。</p>
<h3>壮大企业的技术力量</h3>
<p>每个组织都有一部分人对于学习新生的和非传统的事物充满热忱。成立这样的小组，并挑选人员(全职的或兼职的)，密切关注这方面的动向，了解问题和挑战，进行前瞻性的思考，能够为使用这些技术的项目提供方向和帮助。同时，这个小组还可以为决策者澄清炒作的疑云，提供来自真实数据的观点。</p>
<h3>建立与产品社区的关系</h3>
<p>选择了产品之后，与产品社区建立起良好的关系对于双方的成功都有极大的好处。许多非关系型数据库目前都有十分活跃的社区，非常愿意相互帮助。企业与社区之间的良好合作能给大家带来一个双赢的局面。 如能提前对问题和解决方案有了解，那么企业在对某些特性或版本作出决策时就能成竹在胸。反过来，企业又能对产品特性的路线图产生影响作用，这对他们自身和社区都是有利的。另一方面，社区也能从实际层次的问题中得到反馈，从而丰富和完善产品。来自大型企业的成功案例同样能让他们处于领先。</p>
<h3>迭代前进</h3>
<p>考虑到非关系型数据库相对的成熟度，风险最小的采用策略就是遵循迭代开发的方法论。构建公共数据服务平台和标准化数据访问抽象不可能是一蹴而就的。相反，通过迭代和面向重构的方式能更好的达到目标。运用不太成熟的技术进行转型的过程，中途改变解决方案也不会太意外的。与此同时，采用敏捷的方式来看待事物，能够帮助建立起一个能从管理和实现两方面不断吸引改进的开放态度。</p>
<p>然而，在这一问题上实现迭代，非常重要的一点是定义一个决策条件矩阵。比如操作指南(和例子)，来判断一个应用的对象模型是否适合关系型或非关系的范围，对基础设施规划作出指导，列出必需的测试用例等等。</p>
<h3>结束语</h3>
<p>企业的非关系型数据库采用过程中最大的挑战就是转变决策者的思想观念&mdash;&mdash;让他们相信并非所有的数据/对象都适合关系型数据库。 最能证明这一点就是选择合适的用例去<strong>尝试</strong>非关系型数据库，进而证实在合适的背景下，非关系型数据库是比关系型数据库更有效的解决方案。 找到一些&ldquo;非关键业务&rdquo;(但能立竿见影的)适合于非关系型数据库的项目。这些项目的成功(甚至失败)都能有助于观念的改变。这也能有助于不断学习如何才能以一种不同的方式来更好的采用非关系型数据库。这些少儿学步般的<strong>尝试</strong>所作出的努力与投入都是值得的，如果企业想要在将来使用&ldquo;非关系型数据库&rdquo;来重塑其信息管理体系的话。</p>
<h2>关于作者</h2>
<p>Sourav Mazumder目前是InfoSys Technologies的首席技术架构师。他在信息技术领域有14年以上的经验。作为Infosys技术顾问团的主要成员，Sourav为 Infosys在美国、欧洲、澳洲和日本的主要客户，提供保险、电信、银行、零售、安全、交通以及建筑、工程、施工等多个行业的服务。 他曾参与Web项目的技术架构和路线图定义，SOA战略实施，国际战略定义，UI组件化，性能建模，伸缩性分析，非结构化数据管理等等。Sourav参考的Infosys自身的核心银行产品Finacle，也为他提供了丰富的产品开发经验。Sourav还曾参与开发Infosys的J2EE可重用框架，和定义Infosys在架构方面和开发定制应用方面的软件工程方法。Sourav的经历还包括在保证架构合规和开发项目的治理方面的工作。</p>
<p>Sourav是iCMG认证的软件架构师，同时也是TOGAF 8认证的执行者。Sourav最近在LISA伯克利全球化会议上发表了演讲。<a href="http://www.infosys.com/services/systemintegration/white-papers/soa-perspective-implementation-risks.pdf">Sourav关于SOA的最新白皮书</a>在社区里十分流行。</p>
<p>Sourav目前关注NoSQL，Web 2.0，治理，性能建构和全球化。</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p></div></body></html>