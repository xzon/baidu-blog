<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Tapestry 5.3 Preview</title></head><body><h1>Tapestry 5.3 Preview</h1><div><div>Tapestry 5.3 Preview 
<p>&nbsp;<a href="http://blog.tapestry5.de/index.php/2011/08/22/tapestry-5-3-preview/">http://blog.tapestry5.de/index.php/2011/08/22/tapestry-5-3-preview/</a></p>
<p>Posted on <strong>Montag, 22nd August, 2011</strong></p>
<p>&nbsp;</p>
<p>The Tapestry team has been very busy in the last months and it looks like Tapestry 5.3 goes Beta. While we are working on fixing last minor issues before version 5.3 becomes generally available, I want to share with you some of the new upcoming features.</p>
<p>From the user perspective Tapestry 5.3 will be the most attractive release since 5.0. This article gives you a short overview.</p>New Components 
<p>Several components has been added to the core library:</p>
<p><em>Kaptcha / KaptchaField</em>: Allow you to protect your forms from spam.</p>
<p><em>Tree</em>: Used to render a recursive tree structure, with expandable/collapsable/selectable nodes.</p>
<p><em>Dynamic</em>: An awesome component&nbsp;allowing a component to render itself differently at different times, by making use of an external template file. More details on this component follow in the next post</p>
<p><em>Checklist</em>:&nbsp;Multiple selection component. Generates a UI consisting of a list of check&nbsp;boxes. This component is used as alternative to the <em>Palette</em> component.</p>
<p><em>Alerts</em>: Used to display alerts.</p>
<p></p>Alerts 
<p>In the past the only way to present some messages to the user was to persist some page properties using the <em>flash</em> strategy.&nbsp;Now Tapestry provides a central mechanism for handling user alerts: the <em>AlertManager</em> service and the Alerts component. Using <em>AlertManager</em> service you can add alerts which are presented to the user using the <em>Alerts</em> component. Alerts can be added during both traditional and Ajax requests, and may be transient (displayed for a few seconds), normal, or sticky (persist until the user expressly dismisses them). Alerts support three severities: info, warn(ing) and error; the look and feel can be customized by overriding Tapestry’s default CSS rules.</p>Template Skinning 
<p>I discussed template skinning feature in <a href="http://blog.tapestry5.de/index.php/2011/06/24/template-skinning/" target="_blank"><span style="COLOR: #d35b02">this article</span></a>.</p>Improved Exception Reporting 
<p>Tapestry is known to provide excellent messages when something goes wrong. In version 5.3, the exception reporting has been improved for&nbsp;Ajax requests.&nbsp;Please watch <a href="http://tapestry.apache.org/2011/08/16/tapestry-53-exception-reporting.html" target="_blank"><span style="COLOR: #d35b02">this screencast</span></a> for more details.</p>New JavaScript Abstraction Layer 
<p>As you probably know, Tapestry is stuck with using&nbsp;<a href="http://www.prototypejs.org/" target="_blank"><span style="COLOR: #d35b02">Prototype</span></a> and <a href="http://script.aculo.us/" target="_blank"><span style="COLOR: #d35b02">Scriptaculous</span></a> for backward compatibility reasons. A lot of Tapestry users has been complaining about missing support of <a href="http://jquery.com/" target="_blank"><span style="COLOR: #d35b02">jQuery</span></a>. Those of you, how can’t live without jQuery are probably using <a href="https://github.com/got5/tapestry5-jquery" target="_blank"><span style="COLOR: #d35b02">this Tapestry/jQuery</span></a> library which allows you to get rid of <a href="http://www.prototypejs.org/" target="_blank"><span style="COLOR: #d35b02">Prototype</span></a> and <a href="http://script.aculo.us/" target="_blank"><span style="COLOR: #d35b02">Scriptaculous</span></a>.</p>
<p>Breaking backward compatibility with existing apps just by rewriting the client-side code to jQuery is not an option. Also&nbsp;tying Tapestry to jQuery wouldn’t be a good decision. If yet another JavaScript library will become successful next year and everybody starts to migrate, you are stuck again. A much better solution is to provide an abstraction layer which allows you to use any JavaScript library you like just by replacing a couple of files. Some work has already been done in Tapestry 5.3. The transition is done&nbsp;gradually and will be finalized in version 5.4.</p>Improved Ajax 
<p>The <em>MultiZoneUpdate</em> class has been deprecated in favor of <em>AjaxResponseRenderer</em> service. This service manages the rendering of a partial page render as part of an Ajax response. Let’s see a simple example.</p>
<p>public class AjaxDemo {<br>&nbsp;&nbsp;&nbsp; @Inject<br>&nbsp;&nbsp;&nbsp; private Block block;</p>
<p>&nbsp;&nbsp;&nbsp; @Inject<br>&nbsp;&nbsp;&nbsp; private AjaxResponseRenderer ajaxResponseRenderer;</p>
<p>&nbsp;&nbsp;&nbsp; @Inject<br>&nbsp;&nbsp;&nbsp; @Path("MultiZoneUpdateDemo.js")<br>&nbsp;&nbsp;&nbsp; private Asset library;</p>
<p>&nbsp;&nbsp;&nbsp; Object onActionFromUpdate() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ajaxResponseRenderer.addRender("zone", block);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ajaxResponseRenderer.addCallback(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new JavaScriptCallback() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void run(JavaScriptSupport support) {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; support.importJavaScriptLibrary(library);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; support.addInitializerCall(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "writeMessageTo",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new JSONObject("id", "message",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "message", "Updated"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>&nbsp;&nbsp;&nbsp; }<br>}</p>
<p>As you can see, the new API allows us to update a zone with the content from a renderer (such as a <em>Block</em>, <em>Component</em> or other object that can be coerced to <em>RenderCommand</em>). It is also possible to queue a <em>JavaScriptCallback</em> to be executed during the partial markup render. In this example the callback is used to import a JavaScript library as part of the rendered page and to add a call to a client-side function inside the <em>Tapestry.Initializer</em> namespace.</p>JSR 330 Integration 
<p>Starting from Tapestry 5.3, it’s possible to use JSR-330 annotations for injection. Using the standard annotations, your code in the service layer doesn’t need to depend on Tapestry. Please read <a href="http://tapestry.apache.org/using-jsr-330-standard-annotations.html" target="_blank"><span style="COLOR: #d35b02">this article</span></a> for more details.</p>JPA 2 Integration 
<p>Finally, Tapestry provides a native JPA 2 integration. How does it differ from&nbsp;<a href="http://tynamo.org/tapestry-jpa+guide" target="_blank"><span style="COLOR: #d35b02">Tynamo’s JPA integration</span></a>? First of all, it is maintained by the Tapestry team, that will ensure the backward compatibility with future releases. Secondly, it provides some features that were not available in Tynamo. For example, you can have multiple persistence units in the same application. Furthermore, Tapestry allows you to configure JPA without XML. Read <a href="http://tapestry.apache.org/integrating-with-jpa.html" target="_blank"><span style="COLOR: #d35b02">this article</span></a> for more details.</p>JavaScript and CSS Compression 
<p>A module integrating Yahoo’s&nbsp;<a href="http://developer.yahoo.com/yui/compressor/" target="_blank"><span style="COLOR: #d35b02">YUI Compressor</span></a> has been added. This library allows you to compress your JavaScript and CSS.</p>Component Reference 
<p>Great news for component developers. Starting with Tapestry 5.3 generating a component reference will be as easy as writing JavaDoc. You no longer need to use Maven. Instead you just need to place <em>@tapestrydoc</em> in the component’s class JavaDoc. That’s all. The following screenshot&nbsp;demonstrates the result.</p>
<p><a href="http://blog.tapestry5.de/wp-content/uploads/2011/08/component_ref.png"><img class="aligncenter size-full wp-image-2709" src="http://blog.tapestry5.de/wp-content/uploads/2011/08/component_ref.png" width="634" height="332"></a></p>Scheduling Jobs 
<p>The&nbsp;<em>PeriodicExecutor</em> service has been introduced to allow execution of scheduled jobs. The following example demonstrates how to schedule a job to be executed every 5 minutes.</p>
<p>public class PeriodicExecutorDemo {<br><br>&nbsp;&nbsp;&nbsp; public PeriodicExecutorDemo(PeriodicExecutor executor) {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; executor.addJob(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new IntervalSchedule(300000L),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "MyJob",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Runnable () { void run() { ... }; } );<br>&nbsp;&nbsp;&nbsp; }<br>}</p>Plastic 
<p>Plastic is a&nbsp;bytecode transformation library based on ASM.&nbsp;Plastic is designed to simplify the run-time transformation of Java classes. The most parts of the internal API using Javassist has been rewritten to use Plastic. The Javassist-based API has been deprecated and will be removed in Tapestry 5.4. Starting from version 5.4 Tapestry will not longer depend on Javassist. Yay!</p>
<p>&nbsp;</p>
<p>Have fun with Tapestry and stay tuned!</p>
<p>&nbsp;<a href="http://hi.baidu.com/hxzon/blog/item/a0ca0a33e55bcaf61a4cffbc.html">http://hi.baidu.com/hxzon/blog/item/a0ca0a33e55bcaf61a4cffbc.html</a>&nbsp;&nbsp; Tapestry 5.2 Preview</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div></div></body></html>