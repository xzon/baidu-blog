<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>利用EFS进行文件保护</title></head><body><h1>利用EFS进行文件保护</h1><div>3.利用EFS进行文件保护<br>
　　EFS(Encrypting File System，加密文件系统)是Windows 2000/XP所特有的一个实用功能，对于NTFS卷上的文件和数据，都可以直接加密保存，在很大程度上提高了数据的安全性。<br>
<br>
　　(1)什么是EFS加密<br>
<br>
　　EFS加密是基于公钥策略的。在使用EFS加密一个文件或文件夹时，系统首先会生成一个由伪随机数组成的FEK(File Encryption Key，文件加密钥匙)，然后将利用FEK和数据扩展标准X算法创建加密后的文件，并把它存储到硬盘上，同时删除未加密的原始文件。随后系统利用你的公钥加密FEK，并把加密后的FEK存储在同一个加密文件中。而在访问被加密的文件时，系统首先利用当前用户的私钥解密FEK，然后利用FEK解密出文件。在首次使用EFS时，如果用户还没有公钥/私钥对(统称为密钥)，则会首先生成密钥，然后加密数据。如果你登录到了域环境中，密钥的生成依赖于域控制器，否则依赖于本地机器。 <br>
<br>
　　EFS加密系统对用户是透明的。这也就是说，如果你加密了一些数据，那么你对这些数据的访问将是完全允许的，并不会受到任何限制。而其他非授权用户试图访问加密过的数据时，就会收到&quot;访问拒绝&quot;的错误提示。EFS加密的用户验证过程是在登录Windows时进行的，只要登录到Windows，就可以打开任何一个被授权的加密文件。<br>
<br>
　　(2)EFS加密<br>
<br>
　　选中NTFS分区中的一个文件，点击鼠标右键，选择&quot;属性&quot;命令，在出现的对话框中点击&quot;常规&quot;选项卡，然后点击&quot;高级&quot;按钮，在出现的对话框中选中&quot;加密内容以便保护数据&quot;选项，点击&quot;确定&quot;即可。<br>
<br>
　　此时你可以发现，加密文件名的颜色变成了绿色，当其他用户登录系统后打开该文件时，就会出现&quot;拒绝访问&quot;的提示，这表示EFS加密成功。而如果想取消该文件的加密，只需将&quot;加密内容以便保护数据&quot;选项去除即可<br>
<br>
　　(3)EFS解密<br>
<br>
　　如果其他人想共享经过EFS加密的文件或文件夹，又该怎么办呢？由于重装系统后，SID(安全标示符)的改变会使原来由EFS加密的文件无法打开，所以为了保证别人能共享EFS加密文件或者重装系统后可以打开EFS加密文件，必须要进行备份证书。<br>
<br>
　　点击&quot;开始→运行&quot;菜单项，在出现的对话框中输入&quot;certmgr.msc&quot;，回车后，在出现的&quot;证书&quot;对话框中依次双击展开&quot;证书-当前用户→个人→证书&quot;选项，在右侧栏目里会出现以你的用户名为名称的证书。选中该证书，点击鼠标右键，选择&quot;所有任务→导出&quot;命令，打开&quot;证书导出向导&quot;对话框。<br>
<br>
　　在向导进行过程中，当出现&quot;是否要将私钥跟证书一起导出&quot;提示时，要选择&quot;是，导出私钥&quot;选项，接着会出现向导提示要求密码的对话框。为了安全起见，可以设置证书的安全密码。当选择好保存的文件名及文件路径后，点击&quot;完成&quot;按钮即可顺利将证书导出，此时会发现在保存路径上出现一个以PFX为扩展名的文件。<br>
<br>
　　当其他用户或重装系统后欲使用该加密文件时，只需记住证书及密码，然后在该证书上点击右键，选择&quot;安装证书&quot;命令，即可进入&quot;证书导入向导&quot;对话框。按默认状态点击&quot;下一步&quot;按钮，输入正确的密码后，即可完成证书的导入，这样就可顺利打开所加密的文件。<br>
<br></div></body></html>