<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>//FileDialogExample.java-SWTcode-hxzon</title></head><body><h1>//FileDialogExample.java-SWTcode-hxzon</h1><div><p> </p>
<p>//FileDialogExample.java-SWTcode-hxzon</p>
<p>import org.eclipse.swt.*;<br>
import org.eclipse.swt.events.*;<br>
import org.eclipse.swt.widgets.*;</p>
<p>public class FileDialogExample{<br>
Display display;<br>
Shell shell;<br>
<br>
FileDialogExample(){<br>
&nbsp;&nbsp;  display=new Display();<br>
shell=new Shell(display);<br>
shell.setSize(400,400);<br>
<br>
shell.setText("a fileDialog example");<br>
Menu menu=new Menu(shell,SWT.BAR);<br>
final MenuItem file=new MenuItem(menu,SWT.CASCADE);<br>
file.setText("&amp;file");<br>
<br>
final Menu filemenu=new Menu(shell,SWT.DROP_DOWN);<br>
file.setMenu(filemenu);<br>
final MenuItem openItem=new MenuItem(filemenu,SWT.PUSH);<br>
openItem.setText("&amp;open\tCtrl+O");<br>
openItem.setAccelerator(SWT.CTRL+'O');<br>
final MenuItem saveItem=new MenuItem(filemenu,SWT.PUSH);<br>
saveItem.setText("&amp;save\tCtrl+S");<br>
saveItem.setAccelerator(SWT.CTRL+'S');<br>
<br>
final MenuItem separator=new MenuItem(filemenu,SWT.SEPARATOR);<br>
final MenuItem exitItem=new MenuItem(filemenu,SWT.PUSH);<br>
exitItem.setText("E&amp;xit");<br>
<br>
class Open implements SelectionListener{<br>
&nbsp;&nbsp;  public void widgetSelected(SelectionEvent e){<br>
&nbsp;&nbsp;&nbsp;  FileDialog fd=new FileDialog(shell,SWT.OPEN);<br>
&nbsp;&nbsp;&nbsp;  fd.setText("open");<br>
&nbsp;&nbsp;&nbsp;  fd.setFilterPath("C:/");<br>
&nbsp;&nbsp;&nbsp;  //文件过滤类型<br>
&nbsp;&nbsp;&nbsp;  String[] filterExt={"*.txt","*.doc","*.rtf","*.*" };<br>
&nbsp;&nbsp;&nbsp;  fd.setFilterExtensions(filterExt);<br>
&nbsp;&nbsp;&nbsp;  String selected=fd.open();//获得文件名<br>
&nbsp;&nbsp;&nbsp;  System.out.println(selected);<br>
&nbsp;&nbsp;  }<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;  public void widgetDefaultSelected(SelectionEvent e){<br>
&nbsp;&nbsp;  }<br>
}//end Open<br>
<br>
class Save implements SelectionListener{<br>
&nbsp;&nbsp;  public void widgetSelected(SelectionEvent e){<br>
&nbsp;&nbsp;&nbsp;  FileDialog fd=new FileDialog(shell,SWT.SAVE);<br>
&nbsp;&nbsp;&nbsp;  fd.setText("save");<br>
&nbsp;&nbsp;&nbsp;  fd.setFilterPath("C:/");<br>
&nbsp;&nbsp;&nbsp;  String[] filterExt={"*.txt","*.doc","*.rtf","*.*" };<br>
&nbsp;&nbsp;&nbsp;  fd.setFilterExtensions(filterExt);<br>
&nbsp;&nbsp;&nbsp;  String selected=fd.open();<br>
&nbsp;&nbsp;&nbsp;  System.out.println(selected);<br>
&nbsp;&nbsp;  }<br>
&nbsp;&nbsp;  public void widgetDefaultSelected(SelectionEvent e){<br>
&nbsp;&nbsp;  }<br>
}//end Save<br>
<br>
openItem.addSelectionListener(new Open());<br>
saveItem.addSelectionListener(new Save());<br>
<br>
exitItem.addSelectionListener(new SelectionAdapter(){<br>
&nbsp;&nbsp;  public void widgetSelected(SelectionEvent e){<br>
&nbsp;&nbsp;&nbsp;  MessageBox messageBox=new MessageBox(shell,SWT.ICON_QUESTION|SWT.YES|SWT.NO);<br>
&nbsp;&nbsp;&nbsp;  messageBox.setMessage("do you really want to exit?");<br>
&nbsp;&nbsp;&nbsp;  messageBox.setText("exiting application");<br>
&nbsp;&nbsp;&nbsp;  int response=messageBox.open();<br>
&nbsp;&nbsp;&nbsp;  if(response==SWT.YES)<br>
&nbsp;&nbsp;&nbsp;&nbsp;  System.exit(0);<br>
&nbsp;&nbsp;  }<br>
});<br>
shell.setMenuBar(menu);<br>
shell.open();<br>
<br>
while(!shell.isDisposed()){<br>
&nbsp;&nbsp;  if(!display.readAndDispatch())<br>
&nbsp;&nbsp;&nbsp;  display.sleep();<br>
}<br>
display.dispose();<br>
}<br>
<br>
<br>
public static void main(String[] args){<br>
&nbsp;&nbsp;  new FileDialogExample();<br>
}<br>
}</p></div></body></html>