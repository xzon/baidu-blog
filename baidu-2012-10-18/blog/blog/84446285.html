<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>你了解创建者模式了吗?</title></head><body><h1>你了解创建者模式了吗?</h1><div><div class="postbody">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">你了解创建者模式了吗? </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">我准备从How 和 Why 这两个角度来谈谈我对创建者模式的理解. </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">How to implement Factory and Abstract Factory </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">对于创建者模式, 有一点很容易被大多数人所忽视所误解, 就是Factory模式和Abstract Factory模式的区别. </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">他们的最重要的区别不是在于Abstract Factory是用于创建产品族, 而Factory仅仅用于创建一种类型的产品. </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">他们的区别在于一个很重要的思想: 是采用聚合还是继承? Favor Composition than inheritance. </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">谈到创建者模式大家不自然的就会想到他们的任务都是用于创建对象. 然而真是这样吗? 他们仅仅是用于创建对象? </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">让我们来看看Gof书中有关Factory的一个例子. </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3"><img height="238" hspace="5" width="607" align="baseline" src="http://idior.cnblogs.com/images/cnblogs_com/idior/creator1.JPG"> </font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt">注意到了吗? Application就是一个Factory, 对于不同的Document我们需要扩展不同的Application然后override它们的CreateDocument方法. 然而Application仅仅是创建文档对象吗? 它还做了一系列的工作,将新建的文档对象添加到文档列表并打开文档. 并且还提供了一个完全和创建无关的打开文档(OpenDocument方法)的功能. 看看它和你想象中的创建者模式一样吗? 它可不是仅仅new 一个对象那么简单. 你注意到了吗? 我估计很多人都没有注意到这点, 甚至在吕震宇的文章中.(吕兄可别怪我 :P 谁叫你太有名了) <br>
</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><img height="284" hspace="5" width="473" align="baseline" src="http://idior.cnblogs.com/images/cnblogs_com/idior/Pic41.gif"> <br>
吕震宇文中的例图<br>
<br>
我们只看到了</span><span style="font-size: 9pt"><font face="Times New Roman">factory</font></span><span style="font-size: 9pt">方法</span><span style="font-size: 9pt"><font face="Times New Roman">. </font></span><span style="font-size: 9pt">然而在</span><span style="font-size: 9pt"><font face="Times New Roman">Gof</font></span><span style="font-size: 9pt">中的图是这样的</span><span style="font-size: 9pt"><font face="Times New Roman">:</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><img height="194" hspace="5" width="531" align="baseline" src="http://idior.cnblogs.com/images/cnblogs_com/idior/CropperCapture[6].Jpeg"> <br>
注意到那个</span><span style="font-size: 9pt"><font face="Times New Roman"> AnOperation() </font></span><span style="font-size: 9pt">了吗</span><span style="font-size: 9pt"><font face="Times New Roman">?</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt; color: blue">再来看看</span><span style="font-size: 9pt; color: blue"><font face="Times New Roman">Gof</font></span><span style="font-size: 9pt; color: blue">对</span><span style="font-size: 9pt; color: blue"><font face="Times New Roman">Factory</font></span><span style="font-size: 9pt; color: blue">模式的评价</span><span style="font-size: 9pt; color: blue"><font face="Times New Roman">:</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman" size="3">There are two common ways to parameterize a system by the classes of objects it creates. One way is to subclass the class that creates the objects; this corresponds to using the </font><a href="mk:@MSITStore:E: My%20Document eBooks Soft%20Engneer Pattern DesignPatterns英文版.chm::/pat3cfs.htm"><span style="color: windowtext; text-decoration: none"><font face="Times New Roman" size="3">Factory Method </font></span></a><font face="Times New Roman"><font size="3">pattern.<span style="color: blue"> The main drawback of this approach is that it can require creating a new subclass just to change the class of the product.</span> Such changes can cascade. For example, when the product creator is itself created by a factory method, then you have to override its creator as well.</font></font></span><font size="3"> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt">因为</span><span style="font-size: 9pt"><font face="Times New Roman">Factory</font></span><span style="font-size: 9pt">模式不仅仅是创建一个对象那么简单</span><span style="font-size: 9pt"><font face="Times New Roman">,</font></span><span style="font-size: 9pt">通常还要加上对创建出来的对象做一些操作</span><span style="font-size: 9pt"><font face="Times New Roman">(</font></span><span style="font-size: 9pt">比如初始化一些对象的一些属性</span><span style="font-size: 9pt"><font face="Times New Roman">, </font></span><span style="font-size: 9pt">把对象和环境关联起来</span><span style="font-size: 9pt"><font face="Times New Roman">) </font></span><span style="font-size: 9pt">这样就算那些操作不变仅仅是因为创建的对象变了</span><span style="font-size: 9pt"><font face="Times New Roman">,</font></span><span style="font-size: 9pt">你就需要新建一个</span><span style="font-size: 9pt"><font face="Times New Roman">Factory.</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman">For example, when the product creator is itself created by a factory method, then you have to override its creator as well.</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt">这句话有点让人费解</span><span style="font-size: 9pt"><font face="Times New Roman">,</font></span><span style="font-size: 9pt">让我们把这句话的演示一下</span><span style="font-size: 9pt"><font face="Times New Roman">:</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><img height="233" hspace="5" width="478" align="baseline" src="http://idior.cnblogs.com/images/cnblogs_com/idior/appcreator.gif"> <br>
<br>
Gof</font></span><span style="font-size: 9pt">的意思大概如图所示</span><span style="font-size: 9pt"><font face="Times New Roman">.</font></span><span style="font-size: 9pt">就是说仅仅是因为文档变了我们不仅要为它造一个老爸</span><span style="font-size: 9pt"><font face="Times New Roman">(MyApp),</font></span><span style="font-size: 9pt">还要连带为它造一个爷爷</span><span style="font-size: 9pt"><font face="Times New Roman">(MyAppCreator).</font></span><span style="font-size: 9pt; color: blue">怎样才能不造爷爷</span><span style="font-size: 9pt; color: blue"><font face="Times New Roman">?</font></span><span style="font-size: 9pt">使用</span><span style="font-size: 9pt"><font face="Times New Roman">Abstract Factory.</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt">这时的工厂就完全是为了创建一个新的对象</span><span style="font-size: 9pt"><font face="Times New Roman">, </font></span><span style="font-size: 9pt">而不在工厂中对新建的对象做任何操作</span><span style="font-size: 9pt"><font face="Times New Roman">.</font></span><span style="font-size: 9pt">如下图所示</span><span style="font-size: 9pt"><font face="Times New Roman">:</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman"><font size="3"><span style="font-size: 9pt"><img height="351" hspace="5" width="640" align="baseline" src="http://idior.cnblogs.com/images/cnblogs_com/idior/appcreator3.gif"></span> <br>
<br>
</font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<div style="border-right: windowtext 0.5pt solid; padding-right: 5.4pt; border-top: windowtext 0.5pt solid; padding-left: 5.4pt; background: #e6e6e6; padding-bottom: 4px; border-left: windowtext 0.5pt solid; width: 98%; word-break: break-all; padding-top: 4px; border-bottom: windowtext 0.5pt solid">
<div><font size="3"><img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif"><span style="color: #000000">AppCreator appc</span><span style="color: #000000">=</span><span style="color: #0000ff">new</span></font><font size="3"><span style="color: #000000"> AppCreator(); <br>
<img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif"> <br>
<img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif">Application app</span><span style="color: #000000">=</span><span style="color: #000000">appCreator.Creat(</span><span style="color: #0000ff">new</span></font><font size="3"><span style="color: #000000"> MyDocCreator()); <br>
<img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif"> <br>
<img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif">app.NewDoc(); <br>
<img height="16" width="11" align="top" src="http://idior.cnblogs.com/Images/OutliningIndicators/None.gif"></span> </font></div>
</div>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt">将创建对象的功能</span><span style="font-size: 9pt"><font face="Times New Roman">(DocCreator)</font></span><span style="font-size: 9pt">从对象的其他操作中</span><span style="font-size: 9pt"><font face="Times New Roman">(Application)</font></span><span style="font-size: 9pt">完全分离出来作为一个类</span><span style="font-size: 9pt"><font face="Times New Roman">, </font></span><span style="font-size: 9pt">这样我们就不需要为每种类型的文档造爷爷了</span><span style="font-size: 9pt"><font face="Times New Roman">.</font></span> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font size="3">这个是什么模式</font></span><span style="font-size: 9pt"><font face="Times New Roman"><font size="3">? <br>
</font></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><strong style="mso-bidi-font-weight: normal"><span style="font-size: 9pt; color: blue">看看</span></strong><strong style="mso-bidi-font-weight: normal"><span style="font-size: 9pt; color: blue"><font face="Times New Roman">Gof</font></span></strong><strong style="mso-bidi-font-weight: normal"><span style="font-size: 9pt; color: blue">的原话</span></strong> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt"><font face="Times New Roman" size="3">The other way to parameterize a system relies more on <span style="color: blue">object composition</span>: Define an object that's responsible for knowing the class of the product objects, and make it a parameter of the system. This is a key aspect of the </font><a href="mk:@MSITStore:E: My%20Document eBooks Soft%20Engneer Pattern DesignPatterns英文版.chm::/pat3afs.htm"><span style="color: windowtext; text-decoration: none"><font face="Times New Roman" size="3">Abstract Factory</font></span></a><font face="Times New Roman" size="3">, </font><a href="mk:@MSITStore:E: My%20Document eBooks Soft%20Engneer Pattern DesignPatterns英文版.chm::/pat3bfs.htm"><span style="color: windowtext; text-decoration: none"><font face="Times New Roman" size="3">Builder</font></span></a><font face="Times New Roman" size="3">, and </font><a href="mk:@MSITStore:E: My%20Document eBooks Soft%20Engneer Pattern DesignPatterns英文版.chm::/pat3dfs.htm"><span style="color: windowtext; text-decoration: none"><font face="Times New Roman" size="3">Prototype </font></span></a><font face="Times New Roman"><font size="3">patterns.<span style="color: blue"> All three involve creating a new &quot;factory object&quot; whose responsibility is to create product objects.</span></font></font></span><font size="3"> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"> </p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt">可以发现</span><span style="font-size: 9pt; color: blue"><font face="Times New Roman">Factory Vs Abstract Factory<span style="mso-spacerun: yes"> </span></font></span><span style="font-size: 9pt; color: blue; mso-ascii-: symbol"><span style="mso-char-type: symbol">à</span></span><font face="Times New Roman"><span style="font-size: 9pt; color: blue"><span style="mso-spacerun: yes">&nbsp;&nbsp;  </span>Inheritance Vs Composition</span></font> </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">最后再来谈谈Why? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Why do we need Creator pattern? <br>
</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">相信很多初学者会有这么一个问题, 为什么我们需要创建者模式? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">然而很多人在向别人介绍创建者模式的时候, 常常对于这个问题一带而过.(比如我的老师). </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">回答: 创建者模式是用来创建对象的模式. 而模式是前人经验的总结,所以创建者模式是一个好东西. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Do you need answer like this? What can we learn about Creator Pattern From this ? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">首先对我来说这不是我需要的答案, 并且从中我也仅仅知道了创建者模式是用来创建对象的模式. (晕, 你读读这句话不是废话嘛) </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">那么我的答案是什么? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">用代码说明问题. (源代码有时胜过千言万语) </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">首先创建了一辆奔驰. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Car car=new Benze(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">突然我们的车变了, 变成宝马了. Ok 我修改一下. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Car car=new BMW(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">设想一下在我们的代码中散布了无数这样的代码.不止一处(这点很重要) </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">那么当你以后需要换车的时候, 是不是需要一一修改我们的创建代码把Benze改成BMW. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">然后我们再用工厂来实现一下: </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Car car=benzeFactory().Factory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">呵呵 这算什么? 没事找事做. 如果要换车,你不是还要修改原来的代码改成下面这样. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Car car=bmwFactory().Factory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">是吗? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">如果创建代码只有这里一处可能是这样, 但是如果很多地方都要创建的话就不是了. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">CarFactory carFac=new BenzeFactory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Car car=carFac.Factory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">当你需要换Car的时候你只需修改一处代码就是CarFactory carFac=new XXXFactory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">其他创建车的地方,永远不变,还是Car car=carFac.Factory(); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">Ok? 你明白了吗? </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">我们很难避免修改, 但是我们要尽量做到只修改一处. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">&nbsp;&nbsp;</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">不知道 这样的解释你是否满意. </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">使用创建者模式是为了提高代码的可维护性(即应对未来修改的能力). </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">==============================================================================</font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">创建模式得作用： </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">1、封装创建逻辑，就像idior说得决不仅仅new一个对象； </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">2、封装创建逻辑变化，客户代码不用修改，或仅少量修改； </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">另外，IoC/DI模式，数据驱动的设计，反射技术的运用，创建模式已经有了一些变化，Factory Method 模式似乎已过时。 </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">个人观点！<br>
=============================================================<br>
非常好！看了两遍 </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">1、造爷爷的例子非常好，说出了Facotry method模式的一个致命缺点。 </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">2、Absctract factory模式的图画的很好，就图中的两处&ldquo;注释&rdquo;我想补充一下我的想法： </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">a、从图中我们可以看出Ioc的影子。在右侧注释中，有一命令return new Application(dc)，dc是DocCreator类型，言外之意可以是任何子类型，所以实现了构造函数的注入。这样，汽车工厂的例子可以映射成：CarFactory cf = new CarFactory(BMWCreator()); </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">b、在图中间的注释中我们除了看到create方法被调用外，还应注意有两条命令：docs.Add(doc);以及doc.Open();，前一条命令是典型的&ldquo;缓冲&rdquo;方式，将创建的对象存入docs中，将来再创建时可以克隆一个出来（Prototype模式） </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">而doc.Open();多少让我有点迷惑，是初始化吗？作用是什么？另外NewDoc()的返回值类型是void？希望能和idior探讨一下。 </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">3、另外我对于哪个&ldquo;AnOperation()&rdquo;方法的解释：&ldquo;通常还要加上对创建出来的对象做一些操作(比如初始化一些对象的一些属性, 把对象和环境关联起来) &rdquo;感觉不是特别赞同。如果和本文第一张图相对比的话，可以明显感觉出第三张图的AnOperation是和第一张图的OpenDocument相对应的。那么问题就是OpenDocument是干什么的。我是这么理解的： </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">如果注意第一张图中NewDocument方法最后一条命令是Doc-&gt;Open()，并且可以从最后一张图中看到NewDocument函数返回值为void，因此我们可以推断此NewDocument方法的目的不是return一个Doc，而是调用Doc的Open方法。如果这样的话，就不难理解AnOperation方法的意思了。其实命令Docs.Add(doc)是将创建出来的对象缓存起来，下次就不用再调用NewDocument方法了，而是调用OpenDocument方法（见本文第一张图），由第一张图和第三张图的映射关系，我们也可以推断此处的AnOperation是调用缓冲的对象而不需再创建对象。 </font></font></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><span style="font-size: 9pt"><font face="Times New Roman"><font face="Arial" size="3">BTW，这是我的一个猜测，也希望能和idior探讨一下。<br>
<a href="http://idior.cnblogs.com/archive/2005/04/14/137913.html">http://idior.cnblogs.com/archive/2005/04/14/137913.html</a><br>
</font></font></span></font></p>
</div></div></body></html>